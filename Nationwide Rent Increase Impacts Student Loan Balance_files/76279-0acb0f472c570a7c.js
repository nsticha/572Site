"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[76279],{18171:function(e,t,r){r.d(t,{e:function(){return a},v:function(){return n}});var i=r(31274),n={access:i.eJ.PRIVATE,groups:[],isUnlisted:!1},a={access:i.eJ.PRIVATE,groups:[]}},4793:function(e,t,r){r.d(t,{P:function(){return c},W:function(){return o}});var i=r(98788),n=r(45680),a=r(86187),s=r(52875),o=function(){var e=(0,i.Z)((function(e,t,r){var i,o;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return i={story:{query:a.w.fetchAllStoriesFromUser(t.username),itemLimit:r.storyLimit},collection:{query:a.w.fetchAllCollectionsFromUser(t.username),itemLimit:r.collectionLimit},theme:{query:""}},(o=i[e]).itemLimit?[4,(0,s.dw)({authentication:t,filter:o.query,showUnlisted:!0,num:1})]:[3,2];case 1:return[2,n.sent().total<o.itemLimit];case 2:return[2,!0]}}))}));return function(t,r,i){return e.apply(this,arguments)}}(),c=function(e,t,r){var i={story:r.storyLimit,collection:r.collectionLimit,theme:0}[e];return!!i&&t>=i}},10419:function(e,t,r){r.d(t,{z:function(){return o}});var i=r(90581),n=r(21218),a=r(96397),s=r(39309),o=function(e){(0,n.Z)(r,e);var t=(0,s.Z)(r);function r(e,n){var a;return(0,i.Z)(this,r),(a=t.call(this,"Draft data is missing")).itemId=e,n&&(a.recoveryData="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(n))),a}return r}((0,a.Z)(Error))},82619:function(e,t,r){r.d(t,{oM:function(){return s},ZP:function(){return ce}});var i,n,a,s,o,c=r(13706),l=r(98788),u=r(90581),d=r(27805),p=r(47842),m=r(11389),h=r(34067),g=r(21218),y=r(42838),f=r(70865),b=r(96670),v=r(26297),Z=r(50930),x=r(39309),I=r(45680),P=r(37164),S=r(99698),_=r(8859),w=r(2879),D=r(44141),R=r(42841),E=r(56038),L=r(29284),k=r(99459),C=r(12170),A=r(31274),N=r(58650),T=r(81192),U=r(19601),M=r(84117),B=r(6e3),O=r(16202),j=r(43214),H=r(84170),G=r(26015),z=r(18171),F=r(61201),V=r(4793),J=r(16924),W=r(17383),Y=r(8237),q=r(60120),K=r(48773),$=r(57996),Q=function(){var e=(0,l.Z)((function(e){var t,r,i,n,a,s,o,c,l,u,d,p,m,h,g,v,Z;return(0,I.__generator)(this,(function(x){switch(x.label){case 0:return t=e.type,r=e.itemDetails,i=e.itemProperties,n=e.thumbnail,a=e.baseUrl,s=e.authManager,o=e.portalHost,c=e.shouldPushMetaToAGOItemDetails,l=e.shouldForceUpdateThumbnail,t!==q.o.Story?[3,6]:(u=(0,O.GT)(r),p=JSON.stringify(null!==(d=null===u||void 0===u?void 0:u.thumbnail)&&void 0!==d?d:null),h=JSON.stringify(null!==(m=null===i||void 0===i?void 0:i.thumbnail)&&void 0!==m?m:null),g=p!==h&&"null"!==p,"null"===h&&(i=(0,b.Z)((0,f.Z)({},i),{thumbnail:["default"]})),g||l||!r.thumbnailUrl&&!(0,y.Z)(r.thumbnail,Blob)||(delete r.thumbnailUrl,delete r.thumbnail),g||l?((0,y.Z)(n,Blob)&&(r.thumbnail=n),c?r.thumbnailUrl?[4,(0,j.ti)((0,$.aU)(r.thumbnailUrl,{width:3e3,authManager:s,shouldIgnoreDPR:!0,portalHost:o}),{aspectRatio:1.5,zoom:5,quality:.8,type:"image/jpeg"})]:[3,2]:[2]):[3,5]);case 1:return Z=x.sent(),[3,4];case 2:return[4,(0,K.mI)(a)];case 3:Z=x.sent(),x.label=4;case 4:v=Z,r.thumbnail=v,delete r.thumbnailUrl,x.label=5;case 5:return[3,7];case 6:"undefined"===typeof n&&(0,y.Z)(r.thumbnail,Blob)?delete r.thumbnail:n&&(r.thumbnail=n),x.label=7;case 7:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),X=r(10419),ee=r(86993),te=r(79792),re=function(e){return"smdraftrecovery_".concat(e)},ie=function(e){var t=re(e),r=window.localStorage.getItem(t);return JSON.parse(r)},ne=Object.freeze((i={},(0,p.Z)(i,q.o.Story,R.Z.Category.Story),(0,p.Z)(i,q.o.Collection,R.Z.Category.Collection),(0,p.Z)(i,q.o.Theme,R.Z.Category.Theme),i)),ae=Object.freeze((n={},(0,p.Z)(n,q.o.Story,R.Z.Action.Story_UnpublishStory),(0,p.Z)(n,q.o.Collection,R.Z.Action.Collection_UnpublishCollection),(0,p.Z)(n,q.o.Theme,R.Z.Action.Theme_UnpublishTheme),n)),se=Object.freeze((a={},(0,p.Z)(a,q.o.Story,R.Z.Action.Story_DuplicateStory),(0,p.Z)(a,q.o.Collection,R.Z.Action.Collection_DuplicateCollection),(0,p.Z)(a,q.o.Theme,R.Z.Action.Theme_DuplicateTheme),a));!function(e){e[e.DRAFT_SAVE=0]="DRAFT_SAVE",e[e.PUBLISHING=1]="PUBLISHING",e[e.UNPUBLISHING=2]="UNPUBLISHING",e[e.DISCARDING_UNPUBLISHED_CHANGES=3]="DISCARDING_UNPUBLISHED_CHANGES"}(s||(s={})),function(e){e.DRAFT="draft",e.PUBLISHED="published"}(o||(o={}));var oe=function(e){(0,g.Z)(r,e);var t=(0,x.Z)(r);function r(e){var i;(0,u.Z)(this,r),(i=t.call(this,e)).itemDraftDataJSON="",i.pendingSaveProcesses=[],i.isPublishWorkflowLocked=!1,i.itemResourcesEditInfo={},i.isDataLossAllowed=!1,i.getItemPublishDate=function(){return i.getItemPublishStatus()===E.P.published&&(0,m.Z)(((0,c.Z)(i),(0,h.Z)(r.prototype)),"getItemPublishDate",i).call(i)};var n=(0,c.Z)(i);i.upsertItemResource=function(){var e=(0,l.Z)((function(e,t){var r;return(0,I.__generator)(this,(function(i){return r=function(){var t=(0,l.Z)((function(){var t,r,i,a,s,o,c,l,u,d,p,m,h,g,y,v;return(0,I.__generator)(this,(function(Z){switch(Z.label){case 0:if(!(s=e.authManager||n.authManager))throw new Error("no user session");return o=(0,L.$9)(e.resourceName)?k._H:e.resourceName,l=!e.resource&&!(null===(t=e.options)||void 0===t||null===(r=t.params)||void 0===r?void 0:r.text)&&!e.resourceProperties&&!(null===(i=e.options)||void 0===i||null===(a=i.params)||void 0===a?void 0:a.properties),!e.isRemove&&(o===k._H||!e.isAdd&&!l)?[4,(0,k.$J)({resourceName:o,itemId:n.itemId,itemOwner:n.itemOwner,portalHost:n.config.PORTAL_HOST,authManager:s})]:[3,3];case 1:return c=Z.sent(),[4,n.confirmDataLossBeforeSave({resourceName:o,currentResourceProperties:c})];case 2:Z.sent(),Z.label=3;case 3:return d=function(t){var r,i,a;return u={editor:s.username,modified:Date.now(),id:(0,P.x0)()},(0,f.Z)({},{authentication:s,id:n.itemId,name:e.resourceName,resource:e.resource,owner:n.itemOwner,private:!0!==e.isPublished},e.options,{params:(0,f.Z)({},null===(r=e.options)||void 0===r?void 0:r.params,t||!l?{properties:(0,k.x7)({newProps:(0,b.Z)((0,f.Z)({},null===(i=e.options)||void 0===i||null===(a=i.params)||void 0===a?void 0:a.properties,e.resourceProperties),{editInfo:u}),currentProps:c})}:{})})},!0!==e.isAdd?[3,6]:[4,(0,S.zJ)(d(!0))];case 4:return p=Z.sent(),[4,n.trackItemResourceEditInfo({resourceName:o,editInfo:u})];case 5:return Z.sent(),[2,p];case 6:return!1!==e.isAdd?[3,9]:[4,(0,S.zy)(d(!1))];case 7:return m=Z.sent(),[4,n.trackItemResourceEditInfo({resourceName:o,editInfo:u})];case 8:return Z.sent(),[2,m];case 9:return!0!==e.isRemove?[3,13]:(h=d(!1),[4,(0,S.ug)({authentication:h.authentication,id:h.id,resource:h.name,owner:h.owner})]);case 10:return g=Z.sent(),o===k._H?[3,12]:[4,n.trackItemResourceEditInfo({resourceName:o,removeTrackingInfo:!0})];case 11:Z.sent(),Z.label=12;case 12:return[2,g];case 13:return Z.trys.push([13,17,,20]),[4,(0,S.zy)(d(!1))];case 14:return(y=Z.sent()).success?[4,n.trackItemResourceEditInfo({resourceName:o,editInfo:u})]:[3,16];case 15:return Z.sent(),[2,y];case 16:throw y;case 17:return Z.sent(),[4,(0,S.zJ)(d(!0))];case 18:return v=Z.sent(),[4,n.trackItemResourceEditInfo({resourceName:o,editInfo:u})];case 19:return Z.sent(),[2,v];case 20:return[2]}}))}));return function(){return t.apply(this,arguments)}}(),t?[2,r()]:[2,n.addPendingItemRequest(r)]}))}));return function(t,r){return e.apply(this,arguments)}}();var a=(0,c.Z)(i);i.confirmDataLossBeforeSave=(0,l.Z)((function(){var e,t,r,i,n,s,o,c,l=arguments;return(0,I.__generator)(this,(function(u){switch(u.label){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:{},a.isDataLossAllowed||"function"!==typeof a.confirmDataLoss?[3,4]:(s=e.resourceName?(0,L.$9)(e.resourceName)?k._H:e.resourceName:k._H,(c=e.currentResourceProperties)?[3,2]:[4,(0,k.$J)({resourceName:s,itemId:a.itemId,itemOwner:a.itemOwner,portalHost:a.config.PORTAL_HOST,authManager:a.authManager})]);case 1:c=u.sent(),u.label=2;case 2:return(null===(o=c)||void 0===o||null===(t=o.editInfo)||void 0===t?void 0:t.id)&&(null===(r=a.itemResourcesEditInfo[s])||void 0===r?void 0:r.id)&&(null===(i=a.itemResourcesEditInfo[s])||void 0===i?void 0:i.id)!==(null===o||void 0===o||null===(n=o.editInfo)||void 0===n?void 0:n.id)?[4,a.confirmDataLoss(o.editInfo)]:[3,4];case 3:if(!u.sent())throw a.onDataOverwriteRejected(),new Error(G.J8);a.isDataLossAllowed=!0,setTimeout((function(){a.isDataLossAllowed=!1}),5e3),u.label=4;case 4:return[2]}}))})),i.addPendingItemRequest=function(e){var t=(0,C.fF)(i.pendingItemRequests).then(e);return i.pendingItemRequests=t,t};var d=(0,c.Z)(i);i.shareStory=function(){var e=(0,l.Z)((function(e){var t;return(0,I.__generator)(this,(function(r){return t=function(){var t=(0,l.Z)((function(){var t,r,i,n,a,s,o,c,l,u,p,m,h,g,y,f,b,v,x,P,_,D,E,L;return(0,I.__generator)(this,(function(I){switch(I.label){case 0:return a=e?e.access:d.itemSharingLevel.access,s=e?e.groups||[]:d.itemSharingLevel.groups||[],o=e?e.isUnlisted&&e.access===A.eJ.PUBLIC:d.itemSharingLevel.isUnlisted&&d.itemSharingLevel.access===A.eJ.PUBLIC,[4,(0,N.mY)({itemDetails:d.itemDetails,authManager:d.authManager})];case 1:return c=I.sent(),p=(u=[]).concat,[4,null===(t=d.authManager)||void 0===t?void 0:t.getUser()];case 2:return l=p.apply(u,[(null===(r=I.sent())||void 0===r?void 0:r.groups)||[]]).reduce((function(e,t){return e[t.id]=t,e}),{}),[4,null===(i=d.authManager)||void 0===i?void 0:i.getUser()];case 3:return m=I.sent(),h=null===m||void 0===m?void 0:m.favGroupId,g=(0,w.A7)(d.itemDetails,d.authManager),y=c.filter((function(e){return e!==h&&!(null===s||void 0===s?void 0:s.includes(e))&&(0,w.Q1)({group:l[e],hasItemOwnerPermission:g,allowSharingToUpdateGroups:!0})})),f=s.filter((function(e){return e!==h&&!(null===c||void 0===c?void 0:c.includes(e))&&(0,w.Q1)({group:l[e],hasItemOwnerPermission:g,allowSharingToUpdateGroups:!0})})),b=ne[d.type],R.Z.trackEvent(b,R.Z.Action.Story_ShareStory,a),s&&s.length>0&&R.Z.trackEvent(b,R.Z.Action.Story_ShareStory,R.Z.Name.Story_Share_Groups,s.length+1),v=null===(n=d.itemDetails.typeKeywords)||void 0===n?void 0:n.includes(T.L7),!o||v?[3,5]:(null===(x=d.itemDetails.typeKeywords)||void 0===x||x.push(T.L7),[4,(0,S.$G)({authentication:d.authManager,item:d.itemDetails})]);case 4:return I.sent(),[3,7];case 5:return o||!v?[3,7]:(d.itemDetails.typeKeywords=null===(P=d.itemDetails.typeKeywords)||void 0===P?void 0:P.filter((function(e){return e!==T.L7})),[4,(0,S.$G)({authentication:d.authManager,item:d.itemDetails})]);case 6:I.sent(),I.label=7;case 7:return _=g?[(0,S.zT)({id:d.itemId,access:a===A.eJ.SHARED?A.eJ.PRIVATE:a,authentication:d.authManager,owner:d.itemOwner})]:[],D=f.map((function(e){return(0,S.Ju)({id:d.itemDetails.id,groupId:e,confirmItemControl:!0,authentication:d.authManager,owner:d.itemOwner})})),E=y.map((function(e){return(0,S.lF)({id:d.itemDetails.id,groupId:e,authentication:d.authManager,owner:d.itemOwner})})),[4,Promise.all((0,Z.Z)(_).concat((0,Z.Z)(D),(0,Z.Z)(E)))];case 8:return L=I.sent(),a!==A.eJ.PUBLIC||d.type===q.o.Theme?[3,10]:[4,d.upsertOembedResources(!0)];case 9:I.sent(),I.label=10;case 10:return d.emit("share-end",L),[2,L]}}))}));return function(){return t.apply(this,arguments)}}(),[2,d.addPendingItemRequest(t)]}))}));return function(t){return e.apply(this,arguments)}}();var g=(0,c.Z)(i);i.publishStory=(0,l.Z)((function(){var e,t,r,i,n,a,o,c;return(0,I.__generator)(this,(function(l){switch(l.label){case 0:if(!g.onPublishMethodStart(s.PUBLISHING))return[3,8];l.label=1;case 1:return l.trys.push([1,7,,8]),e=g.getItemPublishStatus()===E.P.draft,[4,g.emitBeforePublish((function(e){return g.emit("publishStatusUpdate",e)}))];case 2:return l.sent(),[4,g.saveStory(s.PUBLISHING)];case 3:return t=l.sent(),[4,g.shareStory()];case 4:return r=l.sent(),[4,g.upsertItemResource({isAdd:!0,isPublished:!0,resourceName:U.f,resource:(0,D.ds)(g.itemData)},!0)];case 5:return i=l.sent(),n=[t,r,i],[4,g.authManager.getUser()];case 6:return a=l.sent(),o=a.userLicenseTypeId,function(e){try{var t,r,i,n=(t={},(0,p.Z)(t,q.o.Story,R.Z.Category.Story),(0,p.Z)(t,q.o.Collection,R.Z.Category.Collection),(0,p.Z)(t,q.o.Theme,R.Z.Category.Theme),t)[e.type],a=(r={},(0,p.Z)(r,q.o.Story,R.Z.Category.StoryStatistics),(0,p.Z)(r,q.o.Collection,R.Z.Category.CollectionStatistics),(0,p.Z)(r,q.o.Theme,R.Z.Category.ThemeStatistics),r)[e.type],s=(i={},(0,p.Z)(i,q.o.Story,R.Z.Action.Story_PublishStory),(0,p.Z)(i,q.o.Collection,R.Z.Action.Collection_PublishCollection),(0,p.Z)(i,q.o.Theme,R.Z.Action.Theme_PublishTheme),i)[e.type];if(R.Z.trackEvent(n,s,e.firstPublish?R.Z.Name.Story_PublishStory_FromDraft:R.Z.Name.Story_PublishStory_Republish),e.firstPublish){var o,c=e.licenseType;c||(c=""),o=c.includes("creator")?R.Z.Name.Story_PublishStory_UserType_Creator:c.includes("GISProfessional")?R.Z.Name.Story_PublishStory_UserType_GISProfessional:c.includes("Storyteller")?R.Z.Name.Story_PublishStory_UserType_StoryTeller:R.Z.Name.Story_PublishStory_UserType_Public,R.Z.trackEvent(n,R.Z.Action.Story_PublishStory_UserType,o)}var l=new Date;if(e.firstPublish?R.Z.trackEvent(a,R.Z.Action.StoryStatistics_FirstPublish_DayOfMonth,l.getDate().toString()):R.Z.trackEvent(a,R.Z.Action.StoryStatistics_Republish_DayOfMonth,l.getDate().toString()),"story"===e.type){var u={},d=0,m=0;Object.keys(e.itemData.nodes).forEach((function(t){var r,i=e.itemData.nodes[t];if("immersive-slide"!==i.type&&"immersive-side-panel"!==i.type){if("immersive"===i.type){var n=i.data.type;"sidecar"===n&&(n="floating-panel"===i.data.subtype?"sidecar-float":"docked-panel"===i.data.subtype?"sidecar-docked":"sidecare-slideshow"),i.type=n}else"gallery"===i.type&&(i.type="square-dynamic"===i.data.galleryLayout?"gallery-square-dynamic":"jigsaw"===i.data.galleryLayout?"gallery-jigsaw":"gallery-filmstrip");var a,s;if("number"===typeof u[i.type]?u[i.type]=u[i.type]+1:u[i.type]=1,("image"===i.type||"video"===i.type||"audio"===i.type||"embed"===i.type||"expressmap"===i.type||"thematic-map"===i.type||"webmap"===i.type||"swipe"===i.type)&&(d+=1,(null===(a=i.data)||void 0===a||null===(s=a.alt)||void 0===s?void 0:s.length)>0&&(m+=1)),!i.data||"slideshow"!==i.type&&"sidecar-float"!==i.type&&"sidecar-docked"!==i.type||(i.data.type,R.Z.trackEvent(R.Z.Category.StoryStatistics,e.firstPublish?R.Z.Action.StoryStatistics_SideCar_FirstPublish_SlidesCount:R.Z.Action.StoryStatistics_SideCar_Republish_SlidesCount,R.Z.Name.Builder_Sidecar,i.children?i.children.length:0)),"tour"===i.type&&i.data){var o="explorer"===i.data.type;R.Z.trackEvent(R.Z.Category.StoryStatistics,e.firstPublish?o?R.Z.Action.StoryStatistics_Explorer_FirstPublish_SlidesCount:R.Z.Action.StoryStatistics_GuidedTour_FirstPublish_SlidesCount:o?R.Z.Action.StoryStatistics_Explorer_Republish_SlidesCount:R.Z.Action.StoryStatistics_GuidedTour_Republish_SlidesCount,o?R.Z.Name.Builder_Explorer:R.Z.Name.Builder_GuidedTour,i.data.places?i.data.places.length:0);var c="";switch(i.data.subtype){case"map-focused":c="Map_Focused";break;case"media-focused":c="Media_Focused";break;case"list":c="List";break;case"grid":c="Grid"}R.Z.trackEvent(R.Z.Category.StoryStatistics,o?R.Z.Action.StoryStatistics_Explorer_Layout:R.Z.Action.StoryStatistics_GuidedTour_Layout,c)}"credits"===i.type&&i.config&&!i.config.isHidden&&R.Z.trackEvent(R.Z.Category.StoryStatistics,e.firstPublish?R.Z.Action.StoryStatistics_FirstPublish_CreditsToggledOn:R.Z.Action.StoryStatistics_Republish_CreditsToggledOn),"story"===i.type&&(null===(r=i.config)||void 0===r?void 0:r.storyLocale)&&R.Z.trackEvent(R.Z.Category.StoryStatistics,e.firstPublish?R.Z.Action.StoryStatistics_FirstPublish_StoryLocale:R.Z.Action.StoryStatistics_Republish_StoryLocale,i.config.storyLocale)}}));var h=e.firstPublish?R.Z.Action.StoryStatistics_FirstPublish_NodeCount:R.Z.Action.StoryStatistics_Republish_NodeCount;Object.keys(u).forEach((function(e){R.Z.trackEvent(R.Z.Category.StoryStatistics,h,e,u[e])}));var g=e.firstPublish?R.Z.Action.StoryStatistics_FirstPublish_AltTextUsed:R.Z.Action.StoryStatistics_Republish_AltTextUsed,y=d>0&&m>0,f=Math.round(m/d*100);R.Z.trackEvent(R.Z.Category.StoryStatistics,g,y.toString(),f)}if(e.type===q.o.Theme){var b=e.itemData,v=b.resources,Z=b.titleFont,x=b.bodyFont,I=b.variables,P={title:{action:e.firstPublish?R.Z.Action.ThemeStatistics_FirstPublish_TitleFont:R.Z.Action.ThemeStatistics_Republish_TitleFont,themeVariablesFontId:I.titleFontId},body:{action:e.firstPublish?R.Z.Action.ThemeStatistics_FirstPublish_BodyFont:R.Z.Action.ThemeStatistics_Republish_BodyFont,themeVariablesFontId:I.bodyFontId}};!function(t){var r={google:0};t.forEach((function(e){var t=e.type,i=e.data,n=P[t];if((0,Y.ed)(n.themeVariablesFontId))R.Z.trackEvent(R.Z.Category.ThemeStatistics,n.action,W.s[n.themeVariablesFontId].displayName);else if(i){var a=null===v||void 0===v?void 0:v[i.resource].data;a&&(r[a.provider]++,R.Z.trackEvent(R.Z.Category.ThemeStatistics,n.action,a.displayName))}})),r.google&&R.Z.trackEvent(R.Z.Category.ThemeStatistics,e.firstPublish?R.Z.Action.ThemeStatistics_FirstPublish_UsedGoogleFonts:R.Z.Action.ThemeStatistics_Republish_UsedGoogleFonts)}([{type:"title",data:Z},{type:"body",data:x}])}}catch(S){return}}({type:g.type,itemDetails:g.itemDetails,itemData:g.itemData,firstPublish:e,licenseType:o}),g.onPublishMethodEnd(s.PUBLISHING,[e,null,n]),[3,8];case 7:throw c=l.sent(),g.onPublishMethodEnd(s.PUBLISHING,[!1,c]),new Error(c);case 8:return[2]}}))}));var x=(0,c.Z)(i);i.discardUnpublishedChanges=(0,l.Z)((function(){var e,t,r;return(0,I.__generator)(this,(function(i){switch(i.label){case 0:if(!x.onPublishMethodStart(s.DISCARDING_UNPUBLISHED_CHANGES))return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,x.saveStory(s.DISCARDING_UNPUBLISHED_CHANGES)];case 2:return e=i.sent(),t=[e],R.Z.trackEvent(ne[x.type],R.Z.Action.Story_DiscardUnpublishedChanges),x.onPublishMethodEnd(s.DISCARDING_UNPUBLISHED_CHANGES,[t]),[3,4];case 3:throw r=i.sent(),x.onPublishMethodEnd(s.DISCARDING_UNPUBLISHED_CHANGES,[null,r]),new Error(r);case 4:return[2]}}))}));var H=(0,c.Z)(i);i.unpublishStory=function(){var e=(0,l.Z)((function(e){var t,r,i,n,a;return(0,I.__generator)(this,(function(o){switch(o.label){case 0:if(!H.onPublishMethodStart(s.UNPUBLISHING))return[3,5];o.label=1;case 1:return o.trys.push([1,4,,5]),[4,H.saveStory(s.UNPUBLISHING,e)];case 2:return t=o.sent(),r=z.v,[4,H.shareStory(r)];case 3:return i=o.sent(),H.itemSharingLevel=r,n=[t,i],e||R.Z.trackEvent(ne[H.type],ae[H.type]),H.onPublishMethodEnd(s.UNPUBLISHING,[n]),[3,5];case 4:throw a=o.sent(),H.onPublishMethodEnd(s.UNPUBLISHING,[null,a]),new Error(a);case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();var $=(0,c.Z)(i);i.hasUnsavedChanges=(0,l.Z)((function(){var e,t;return(0,I.__generator)(this,(function(r){switch(r.label){case 0:return e=$.itemDraftDataJSON,t=JSON.stringify,[4,$.getStoryData(s.DRAFT_SAVE)];case 1:return e!==t.apply(JSON,[r.sent().itemData])?[2,!0]:[2,!1]}}))})),i.setGetStoryDataMethod=function(e){i.getStoryData=e},i.setGenerateStoryItemUrlMethod=function(e){i.generateStoryItemUrl=e},i.setParseItemResourcesForPublish=function(e){i.parseItemResourcesForPublish=e},i.setUpdateStoryTitle=function(e){i.updateStoryTitle=e},i.setEmitBeforePublish=function(e){i.emitBeforePublish=e},i.setConfirmDataLossMethod=function(e){i.confirmDataLoss=e},i.setConfirmAdminAction=function(e){i.confirmAdminAction=e};var X=(0,c.Z)(i);i.fetchStoryBuilderData=(0,l.Z)((function(){var e,t,i,n,a,s,o,c;return(0,I.__generator)(this,(function(l){switch(l.label){case 0:return t={itemId:X.itemId,authManager:X.authManager,portalHost:X.config.PORTAL_HOST},i=(0,b.Z)((0,f.Z)({},t),{type:X.type}),[4,r.fetchItemDetails(t)];case 1:if("update"!==(n=l.sent()).itemControl&&"admin"!==n.itemControl&&!n.origin)throw new J.Z({type:"story-privileges-edit",itemType:X.type});if(X.setItemDetails(n),n.origin)throw new J.Z({type:"distributed-collab-no-draft"});return[4,(0,N.mY)({itemDetails:X.itemDetails,authManager:X.authManager,excludeFavoritesGroup:!0})];case 2:return a=l.sent(),X.itemSharingLevel={access:X.itemDetails.access,groups:a,isUnlisted:null!==(s=null===(e=X.itemDetails.typeKeywords)||void 0===e?void 0:e.includes(T.L7))&&void 0!==s&&s},[4,r.fetchItemDraftData({itemDetails:X.itemDetails,type:X.type,authManager:X.authManager,portalHost:X.config.PORTAL_HOST})];case 3:return o=l.sent(),X.setItemDraftData(o),[4,X.trackItemResourceEditInfo({resourceName:"draft.json"})];case 4:return l.sent(),X.getItemPublishStatus()===E.P.draft?[3,6]:[4,r.fetchPublishedItemData(i)];case 5:c=l.sent(),X.setItemData(c),l.label=6;case 6:return[2]}}))}));var te=(0,c.Z)(i);i.isStoryOwner=(0,l.Z)((function(){var e,t;return(0,I.__generator)(this,(function(r){switch(r.label){case 0:return[4,null===(e=te.authManager)||void 0===e?void 0:e.getUser()];case 1:return(null===(t=r.sent())||void 0===t?void 0:t.username)===te.itemOwner?[2,!0]:[2,!1]}}))}));var oe=(0,c.Z)(i);i.duplicateStory=(0,l.Z)((function(){var e,t,i;return(0,I.__generator)(this,(function(n){switch(n.label){case 0:return[4,(0,V.W)(oe.type,oe.authManager,oe.storyMapUserPrivileges)];case 1:if(!n.sent())throw new Error(G.Ph);return e="".concat((0,M.Zl)(oe.config.PORTAL_HOST,oe.authManager),"/content/users/").concat(oe.itemOwner,"/items/").concat(oe.itemId,"/copy"),[4,(0,_.WY)(e,{authentication:oe.authManager,httpMethod:"POST",params:{includeResources:!0,copyPrivateResources:!0,f:"json"}})];case 2:return t=n.sent(),R.Z.trackEvent(ne[oe.type],se[oe.type]),[4,r.fetchItemDetails({itemId:t.itemId,authManager:oe.authManager,portalHost:oe.config.PORTAL_HOST})];case 3:return i=n.sent(),[4,(0,C.Up)(L.jH,{promiseArguments:[{itemDetails:i,portalHost:oe.config.PORTAL_HOST,authManager:oe.authManager}],maxRetries:60,delay:5e3})];case 4:return n.sent(),[2,t]}}))}));var ce=(0,c.Z)(i);i.duplicateStoryCleanup=function(){var e=(0,l.Z)((function(e){var t,r;return(0,I.__generator)(this,(function(i){switch(i.label){case 0:return t="".concat(e," "),ce.itemDetails.title?(r=e?(0,B.E)({stringModifier:t,originalString:ce.itemDetails.title,maxLength:A.e4}):void 0)?[4,(0,S.$G)({item:{id:ce.itemId,title:r},authentication:ce.authManager})]:[3,2]:[3,2];case 1:i.sent(),i.label=2;case 2:return e?[4,ce.updateStoryTitle(t)]:[3,4];case 3:i.sent(),i.label=4;case 4:return[4,ce.unpublishStory(!0)];case 5:return[2,i.sent()]}}))}));return function(t){return e.apply(this,arguments)}}();var le=(0,c.Z)(i);i.trackItemResourceEditInfo=function(){var e=(0,l.Z)((function(e){var t,r,i,n;return(0,I.__generator)(this,(function(a){switch(a.label){case 0:return t=e.resourceName,r=e.editInfo,e.removeTrackingInfo?(delete le.itemResourcesEditInfo[t],[2]):(i=(0,L.$9)(t)?k._H:t,r?(le.itemResourcesEditInfo[i]=r,[3,3]):[3,1]);case 1:return[4,(0,k.$J)({resourceName:i,itemId:le.itemId,authManager:le.authManager,portalHost:le.config.PORTAL_HOST,itemOwner:le.itemOwner})];case 2:n=a.sent(),le.itemResourcesEditInfo[i]=null===n||void 0===n?void 0:n.editInfo,a.label=3;case 3:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();var ue=(0,c.Z)(i);i.fetchItemResource=function(){var e=(0,l.Z)((function(e){var t,n,a;return(0,I.__generator)(this,(function(s){switch(s.label){case 0:return t=e.skipEditInfoTracking,n=(0,v.Z)(e,["skipEditInfoTracking"]),[4,(0,m.Z)(((0,c.Z)(i),(0,h.Z)(r.prototype)),"fetchItemResource",i).call(ue,n)];case 1:return a=s.sent(),t?[3,3]:[4,ue.trackItemResourceEditInfo({resourceName:n.resourceName})];case 2:s.sent(),s.label=3;case 3:return[2,a]}}))}));return function(t){return e.apply(this,arguments)}}(),i.getItemFirstPublishDate=function(){return i.getItemPublishStatus()===E.P.published&&(0,m.Z)(((0,c.Z)(i),(0,h.Z)(r.prototype)),"getItemFirstPublishDate",i).call(i)},i.saveStory=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.DRAFT_SAVE,t=arguments.length>1?arguments[1]:void 0,r=(0,c.Z)(i),n=function(){var i=(0,l.Z)((function(){var i,n,a,o,c,u,d,p,m,h,g,x,P;return(0,I.__generator)(this,(function(S){switch(S.label){case 0:return S.trys.push([0,5,,6]),r.emit("story-save-start"),[4,r.updateDataAndDetails(e)];case 1:S.sent(),i=!!(0,O.W$)({itemDetails:r.itemDetails,typekeywordId:F.i1.firstPublishedDate}),n=!!(0,O.W$)({itemDetails:r.itemDetails,typekeywordId:F.i1.publishedDate}),e===s.DRAFT_SAVE&&r.getItemPublishStatus()===E.P.published?r.setItemPublishStatus(E.P.unpublishedChanges):e===s.DISCARDING_UNPUBLISHED_CHANGES?(r.setItemPublishStatus(E.P.published),r.setItemDraftData(r.itemData)):e===s.PUBLISHING?(r.setItemPublishStatus(E.P.published),a=new Date,r.setItemPublishDate(a),n||i||r.setItemFirstPublishDate(a),r.updateAppVersion(s.PUBLISHING),r.setItemDetails((0,O.TQ)({itemDetails:r.itemDetails,typekeywordId:T.sO})),r.setItemData(r.itemDraftData)):e===s.UNPUBLISHING&&(r.setItemPublishStatus(E.P.draft),r.setItemPublishDate("remove"),r.setItemFirstPublishDate("remove"),r.updateAppVersion(s.UNPUBLISHING),r.setItemData({unpublished:!0}),c=(null!==(o=r.itemDetails.typeKeywords)&&void 0!==o?o:[]).filter((function(e){return!e.match("Copy Item")})),r.setItemDetails((0,b.Z)((0,f.Z)({},r.itemDetails),{typeKeywords:(0,Z.Z)(c)}))),r.updateAppVersion(),u="".concat(T.AY).concat(Date.now(),".json");try{d={timestamp:Date.now(),downloaded:!1,data:r.itemDraftData},window.localStorage.setItem(re(r.itemId),JSON.stringify(d))}catch(w){}return[4,r.upsertItemResource({isPublished:!1,isAdd:!0,resourceName:u,resource:(0,D.ds)(r.itemDraftData)})];case 2:return p=S.sent(),r.setItemDetails((0,O.TQ)({itemDetails:r.itemDetails,typekeywordId:T.ss})),r.setItemDetails((0,O.jT)({itemDetails:r.itemDetails,typekeywordId:T.W2,data:u})),m=function(){var t=(0,l.Z)((function(){var t,i,n;return(0,I.__generator)(this,(function(a){return t=r.itemDetails,i=t.thumbnail,n=(0,v.Z)(t,["thumbnail"]),[2,(0,_.WY)("".concat((0,M.Zl)(r.config.PORTAL_HOST,r.authManager),"/content/users/").concat(r.itemOwner,"/items/").concat(r.itemId,"/update\n          "),{authentication:r.authManager,params:(0,b.Z)((0,f.Z)({},n,(0,y.Z)(i,Blob)?{thumbnail:i}:{}),{text:e===s.PUBLISHING||e===s.UNPUBLISHING?r.itemData:void 0})})]}))}));return function(){return t.apply(this,arguments)}}(),[4,r.addPendingItemRequest(m)];case 3:return h=S.sent(),[4,r.updateItemResources({mode:e,draftResourceId:u,storyType:r.type,isDuplicateCleanup:t})];case 4:return g=S.sent(),x=[p,h,g],r.onSaveEnd(void 0,x),[2,x];case 5:throw P=S.sent(),r.onSaveEnd(P,void 0),P;case 6:return[2]}}))}));return function(){return i.apply(this,arguments)}}(),a="".concat(e,"-").concat(!!t);if(i.pendingSaveProcesses.length>0){var o=i.pendingSaveProcesses[i.pendingSaveProcesses.length-1];if(!o.isCurrentSave&&o.key===a||new RegExp("^".concat(s.PUBLISHING,"-")).test(o.key))return o.promise;var u={key:a},d=new Promise((function(e,t){o.promise.finally((function(){u.isCurrentSave=!0,n().then(e).catch(t)}))}));return u.promise=d,i.pendingSaveProcesses.push(u),d}var p={key:a,promise:n(),isCurrentSave:!0};return i.pendingSaveProcesses.push(p),p.promise},i.autosaveStory=(0,C.e2)(i.saveStory,{debounceTime:1e3,throttleTime:1e4,confirmBeforeUnload:!0,onImmediateCallback:function(e){i.isPublishWorkflowLocked?e("Cancel: pending publish"):i.cancelPendingAutosave=e}}),i.onSaveEnd=function(e,t,r){i.pendingSaveProcesses.shift(),window.removeEventListener("beforeunload",i.defaultWindowUnloadEvent),i.emit("story-save-end",e,t,r)},i.getPublishEventName=function(e){switch(e){case s.PUBLISHING:return"story-publish";case s.DISCARDING_UNPUBLISHED_CHANGES:return"discard-unpublished-changes";default:return"story-unpublish"}},i.onPublishMethodStart=function(e){var t,r;return!i.isPublishWorkflowLocked&&(null===(r=(t=i).cancelPendingAutosave)||void 0===r||r.call(t,"Cancel: Publish method started"),i.isPublishWorkflowLocked=!0,i.emit("".concat(i.getPublishEventName(e),"-start")),window.addEventListener("beforeunload",i.defaultWindowUnloadEvent),!0)},i.onPublishMethodEnd=function(e,t){i.isPublishWorkflowLocked=!1,i.emit.apply(i,["".concat(i.getPublishEventName(e),"-end")].concat((0,Z.Z)(t))),i.emit("publish-method-end"),window.removeEventListener("beforeunload",i.defaultWindowUnloadEvent)},i.onDataOverwriteRejected=function(){window.removeEventListener("beforeunload",i.defaultWindowUnloadEvent),i.emit("DATA_OVERWRITE_REJECTED")},i.getStoryData=function(){var e=(0,l.Z)((function(e){return(0,I.__generator)(this,(function(e){return[2,{itemDetails:{},itemData:{root:"",nodes:{},resources:{}}}]}))}));return function(t){return e.apply(this,arguments)}}(),i.generateStoryItemUrl=function(){throw new Error("Generate-url function not provided")},i.parseItemResourcesForPublish=function(e,t,r){throw new Error("Story resources not getting parsed.")},i.updateStoryTitle=function(){var e=(0,l.Z)((function(e){return(0,I.__generator)(this,(function(e){throw new Error("Story title not getting updated.")}))}));return function(t){return e.apply(this,arguments)}}(),i.emitBeforePublish=function(e){return Promise.resolve()};var de=(0,c.Z)(i);i.updateDataAndDetails=function(){var e=(0,l.Z)((function(e){var t,r,i,n,a,o;return(0,I.__generator)(this,(function(c){switch(c.label){case 0:return[4,de.getStoryData(e)];case 1:return"undefined"===typeof(t=c.sent())?[3,4]:(e!==s.PUBLISHING&&e!==s.DRAFT_SAVE||de.setItemDraftData(t.itemData),e!==s.PUBLISHING&&e!==s.UNPUBLISHING&&de.getItemPublishStatus()!==E.P.draft?[3,3]:((r=(0,f.Z)({},de.itemDetails,t.itemDetails)).title||(r.title=(0,ee.bH)({type:de.type,dateStamp:r.created})),de.type!==q.o.Theme&&(e===s.PUBLISHING?r.url=de.generateStoryItemUrl({route:"viewer",itemId:de.itemId,itemType:de.type}):e===s.UNPUBLISHING&&(r.url="")),i="undefined"===typeof t.shouldPushMetaToAGOItemDetails||t.shouldPushMetaToAGOItemDetails,[4,Q({type:de.type,itemDetails:r,itemProperties:t.properties,thumbnail:t.thumbnail,baseUrl:de.config.BASE_URL,authManager:de.authManager,portalHost:de.config.PORTAL_HOST,shouldPushMetaToAGOItemDetails:i,shouldForceUpdateThumbnail:t.hasShouldPushMetaToAGOItemDetailsChanged&&i})]));case 2:c.sent(),i?((null===(o=null===(n=t.properties)||void 0===n?void 0:n.metaProperties)||void 0===o?void 0:o.title)&&(r.title=o.title),(null===o||void 0===o?void 0:o.description)&&(r.snippet=o.description),null===(a=t.properties)||void 0===a||delete a.metaProperties):(delete r.title,delete r.snippet,delete r.description),t.properties&&(r.properties=(0,O.MM)(t.properties,r)),r.clearEmptyFields=!0,de.setItemDetails(r),c.label=3;case 3:return[3,5];case 4:throw new Error("Story data not getting updated.");case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();var pe=(0,c.Z)(i);i.updateItemResources=function(){var e=(0,l.Z)((function(e){var t,r,i,n,a,c,l,u,d,p,m,h,g,y,v,x,P;return(0,I.__generator)(this,(function(I){switch(I.label){case 0:return t=e.mode,r=e.storyType,i=e.draftResourceId,n=e.isDuplicateCleanup,a=t!==s.DISCARDING_UNPUBLISHED_CHANGES?pe.itemDraftData:void 0,c=t===s.UNPUBLISHING?void 0:pe.itemData,l=pe.parseItemResourcesForPublish(a,c,r),[4,(0,N.vb)({authManager:pe.authManager,username:pe.itemOwner,itemId:pe.itemId,portal:(0,M.Zl)(pe.config.PORTAL_HOST,pe.authManager)})];case 1:return u=I.sent(),[4,pe.getResourceIdsFromData(l.publishedItemResources,o.PUBLISHED,t)];case 2:return d=I.sent(),[4,pe.getResourceIdsFromData(l.draftItemResources,o.DRAFT,t)];case 3:return p=I.sent(),m=n?{maxRetries:60,delay:5e3}:s.DRAFT_SAVE?{maxRetries:0}:{},h=u.map((function(e){var r=e.resource;if(!(r===i||t===s.DRAFT_SAVE&&(["oembed.json","oembed.xml",U.f].includes(e.resource)||!(0,L.$9)(e.resource)&&Date.now()-864e5<e.created)))if(d.indexOf(r)>=0){if("inherit"!==e.access)return(0,C.Up)(pe.upsertItemResource,(0,b.Z)((0,f.Z)({},m),{promiseArguments:[{isAdd:!1,isPublished:!0,resourceName:r}]}))}else{if(!(p.indexOf(r)>=0))return(0,C.Up)(pe.upsertItemResource,(0,b.Z)((0,f.Z)({},m),{promiseArguments:[{isRemove:!0,resourceName:r}]}));if("private"!==e.access)return(0,C.Up)(pe.upsertItemResource,(0,b.Z)((0,f.Z)({},m),{promiseArguments:[{isAdd:!1,isPublished:!1,resourceName:r}]}))}})),[4,Promise.all(h)];case 4:return g=I.sent(),t!==s.PUBLISHING?[3,6]:(y=l.itemResourcesToPublish.map((function(e){if("expressmap"===e.type||"thematic-map-dataset"===e.type)return pe.copyVersionedItemResource(e.id,o.DRAFT,o.PUBLISHED)})),[4,Promise.all((0,Z.Z)(y))]);case 5:return v=I.sent(),g=g.concat(v),[3,8];case 6:return t!==s.DISCARDING_UNPUBLISHED_CHANGES?[3,8]:(x=l.publishedItemResources.map((function(e){if("expressmap"===e.type||"thematic-map-dataset"===e.type)return pe.copyVersionedItemResource(e.id,o.PUBLISHED,o.DRAFT)})),[4,Promise.all((0,Z.Z)(x))]);case 7:P=I.sent(),g=g.concat(P),I.label=8;case 8:return pe.type===q.o.Theme?[3,10]:[4,pe.updateItemRelationships(l.relatedItems,t)];case 9:I.sent(),I.label=10;case 10:return[2,g]}}))}));return function(t){return e.apply(this,arguments)}}();var me=(0,c.Z)(i);i.copyVersionedItemResource=function(){var e=(0,l.Z)((function(e,t,r){var i,n;return(0,I.__generator)(this,(function(a){switch(a.label){case 0:return i=me.getVersionedItemResourceUrl(e,t),[4,(0,_.WY)(i,{authentication:me.authManager})];case 1:return n=a.sent(),[2,me.upsertItemResource({isPublished:r===o.PUBLISHED,resourceName:(0,N.rj)(e,r),resource:(0,D.ds)(n)})]}}))}));return function(t,r,i){return e.apply(this,arguments)}}();var he=(0,c.Z)(i);i.getResourceIdsFromData=function(){var e=(0,l.Z)((function(e,t,r){var i,n,a;return(0,I.__generator)(this,(function(c){switch(c.label){case 0:return i=[],n=e.map((function(e){return"expressmap"===e.type?(t===o.PUBLISHED&&r===s.PUBLISHING?i.push(he.getExpressMapItemResources(e.id,o.DRAFT)):t===o.DRAFT&&r===s.DISCARDING_UNPUBLISHED_CHANGES?i.push(he.getExpressMapItemResources(e.id,o.PUBLISHED)):i.push(he.getExpressMapItemResources(e.id,t)),(0,N.rj)(e.id,t)):"thematic-map-dataset"===e.type||"express-image-data"===e.type?(0,N.rj)(e.id,t):e.id}),[]),[4,Promise.all(i)];case 1:return a=c.sent(),[2,a.reduce((function(e,t){return e.concat(t)}),n)]}}))}));return function(t,r,i){return e.apply(this,arguments)}}();var ge=(0,c.Z)(i);i.upsertOembedResources=function(){var e=(0,l.Z)((function(e){var t,i,n,a,s,o,c,l,u,d,p;return(0,I.__generator)(this,(function(m){switch(m.label){case 0:return[4,r.fetchItemDetails({itemId:ge.itemId,authManager:ge.authManager,portalHost:ge.config.PORTAL_HOST})];case 1:return t=m.sent(),ge.setItemDetails(t),i=(0,N.Sg)({portalHost:ge.config.PORTAL_HOST,itemDetails:ge.itemDetails,fallbackUrl:"".concat(location.origin).concat((0,K.Zr)(ge.config.BASE_URL)),shouldIgnoreDPR:!0,returnOriginalAspectRatio:!0,size:800}),[4,(0,j.gP)(i)];case 2:return n=m.sent(),a=ge.itemDetails,s=a.title,o=a.url,c=void 0===o?"":o,l=a.byline,u=ge.config.PRODUCT_NAME,d={version:"1.0",type:"rich",title:s,url:c,author_name:l,provider_name:"".concat(u),provider_url:new URL(c).origin,width:800,height:600,thumbnail_url:"".concat(i),thumbnail_height:"".concat(n.height),thumbnail_width:"".concat(n.width),html:'<iframe src="'.concat(c,'" width="800" height="600" scrolling="yes" frameborder="0" allowfullscreen></iframe>'),cache_age:86400},p='<?xml version="1.0" encoding="utf-8" standalone="yes"?>\n    <oembed>\n      <version>1.0</version>\n      <type>rich</type>\n      <title>'.concat(s,"</title>\n      <url>").concat(c,"</url>\n      <author_name>").concat(l,"</author_name>\n      <provider_name>").concat(u,"</provider_name>\n      <provider_url>").concat(new URL(c).origin,"</provider_url>\n      <width>800</width>\n      <height>600</height>\n      <thumbnail_url>").concat(i,"</thumbnail_url>\n      <thumbnail_height>").concat(n.height,"</thumbnail_height>\n      <thumbnail_width>").concat(n.width,'</thumbnail_width>\n      <html><iframe src="').concat(c,'" width="800" height="600" scrolling="yes" frameborder="0" allowfullscreen="true"></iframe></html>\n      <cache_age>86400</cache_age>\n    </oembed>\n    '),[4,Promise.all([ge.upsertItemResource({isPublished:!0,resourceName:"oembed.json",resource:(0,D.ds)(d)},e),ge.upsertItemResource({isPublished:!0,resourceName:"oembed.xml",resource:new Blob([p],{type:"text/xml"})},e)])];case 3:return m.sent(),[2]}}))}));return function(t){return e.apply(this,arguments)}}();var ye=(0,c.Z)(i);return i.getExpressMapItemResources=function(){var e=(0,l.Z)((function(e,t){var r,i;return(0,I.__generator)(this,(function(n){switch(n.label){case 0:return r=ye.getVersionedItemResourceUrl(e,t),[4,(0,_.WY)(r,{authentication:ye.authManager})];case 1:return i=n.sent(),[2,Object.keys(i.popups).reduce((function(e,t){var r=i.popups[t];return r.image&&"string"===typeof r.image?e.concat(r.image):e}),[])]}}))}));return function(t,r){return e.apply(this,arguments)}}(),i.getVersionedItemResourceUrl=function(e,t){return"".concat((0,M.Zl)(i.config.PORTAL_HOST,i.authManager),"/content/items/").concat(i.itemId,"/resources/").concat((0,N.rj)(e,t))},i.defaultWindowUnloadEvent=function(e){e.preventDefault(),e.returnValue=""},i.downloadDraftRecoveryFileFromConsole=function(){(function(e,t){try{var r=re(e),i=ie(e);if(i&&(!t||!i.downloaded))return(0,D.Hy)(i.data,"StoryMap_Draft_Recovery_".concat(e)),window.localStorage.setItem(r,JSON.stringify((0,b.Z)((0,f.Z)({},i),{downloaded:!0}))),!0}catch(n){}return!1})(i.itemId)||console.error("No draft recovery file available for download.")},window.downloadDraftRecoveryFile=i.downloadDraftRecoveryFileFromConsole,i}var i=r.prototype;return i.setItemPublishStatus=function(e){var t,r=(null!==(t=this.itemDetails.typeKeywords)&&void 0!==t?t:[]).filter((function(e){return e!==E.P.draft&&e!==E.P.published&&e!==E.P.unpublishedChanges&&"status:draft"!==e&&"status:published"!==e&&"status:unpublished-changes"!==e}));this.setItemDetails((0,b.Z)((0,f.Z)({},this.itemDetails),{typeKeywords:(0,Z.Z)(r).concat([e])}))},i.updateAppVersion=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.DRAFT_SAVE,r=t===s.PUBLISHING||t===s.UNPUBLISHING?F.Nf.published:F.Nf.draft,i=(null!==(e=this.itemDetails.typeKeywords)&&void 0!==e?e:[]).filter((function(e){return 0!==e.search(r)}));t===s.UNPUBLISHING?this.setItemDetails((0,b.Z)((0,f.Z)({},this.itemDetails),{typeKeywords:i})):this.setItemDetails((0,b.Z)((0,f.Z)({},this.itemDetails),{typeKeywords:(0,Z.Z)(i).concat(["".concat(r,":").concat(this.config.APP_VERSION)])}))},i.setItemFirstPublishDate=function(e){var t,r,i=(null!==(t=this.itemDetails.typeKeywords)&&void 0!==t?t:[]).filter((function(e){return!e.match(F.i1.firstPublishedDate)}));"remove"===e?this.setItemDetails((0,b.Z)((0,f.Z)({},this.itemDetails),{typeKeywords:(0,Z.Z)(i)})):this.setItemDetails((0,b.Z)((0,f.Z)({},this.itemDetails),{typeKeywords:(0,Z.Z)(null!==(r=this.itemDetails.typeKeywords)&&void 0!==r?r:[]).concat(["".concat(F.i1.firstPublishedDate,":").concat(new Date(e).getTime())])}))},i.updateItemRelationships=function(e,t){var r=this;return(0,l.Z)((function(){var i,n,a,o,c;return(0,I.__generator)(this,(function(l){switch(l.label){case 0:return i={destinationItemId:r.itemId,authentication:r.authManager},n=[],[4,(0,S.oO)({authentication:r.authManager,id:r.itemId,relationshipType:T.t4})];case 1:return a=l.sent().relatedItems.map((function(e){return e.id})),o=e.reduce((function(e,t){return t.type!==T.t4||a.includes(t.itemId)?e:e.concat(t)}),[]),c=[],a.forEach((function(t){e.find((function(e){return e.type===T.t4&&e.itemId===t}))||c.push({itemId:t,type:T.t4})}),[]),o.forEach((function(e){n.push((0,S.bV)((0,b.Z)((0,f.Z)({},i),{originItemId:e.itemId,relationshipType:e.type}))),e.type===T.t4&&R.Z.trackEvent(R.Z.Category.Theme,R.Z.Action.Theme_AddRelationshipTheme2Story)})),c.forEach((function(e){n.push((0,S.Fr)((0,b.Z)((0,f.Z)({},i),{originItemId:e.itemId,relationshipType:e.type})))})),t!==s.DRAFT_SAVE&&t!==s.DISCARDING_UNPUBLISHED_CHANGES?[3,3]:[4,Promise.allSettled(n)];case 2:return l.sent(),[3,5];case 3:return[4,Promise.all(n)];case 4:l.sent(),l.label=5;case 5:return[2]}}))}))()},i.setItemDraftData=function(e){var t=H.LN.sanitize(e,{allowUndefined:!0});this._itemDraftData=t,this.itemDraftDataJSON=JSON.stringify(t)},i.setItemPublishDate=function(e){var t,r=(null!==(t=this.itemDetails.typeKeywords)&&void 0!==t?t:[]).filter((function(e){return!e.match(F.i1.publishedDate)}));"remove"===e?this.setItemDetails((0,b.Z)((0,f.Z)({},this.itemDetails),{typeKeywords:(0,Z.Z)(r)})):this.setItemDetails((0,b.Z)((0,f.Z)({},this.itemDetails),{typeKeywords:(0,Z.Z)(r).concat(["".concat(F.i1.publishedDate,":").concat(new Date(e).getTime())])}))},(0,d.Z)(r,[{key:"itemDraftData",get:function(){return this._itemDraftData},set:function(e){if(this._itemDraftData)throw new Error("Item draft data have already been set on the StoryItem and cannot be modified from outside of the StoryItem");this.setItemDraftData(e)}}]),r}(te.jI);oe.fetchItemDraftData=function(){var e=(0,l.Z)((function(e){var t,i,n,a,s;return(0,I.__generator)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,5,,6]),[4,(0,L.jH)({itemDetails:e.itemDetails,portalHost:e.portalHost,authManager:e.authManager})];case 1:return t=o.sent(),e.type===q.o.Collection&&t.items?[4,r.e(97738).then(r.bind(r,97738))]:[3,4];case 2:return[4,(0,o.sent().convertToNewCollectionsDataSchema)(t,e.portalHost,(null===(i=e.config)||void 0===i?void 0:i.COLLECTION_ITEM_LIMIT)||G.E5,e.authManager)];case 3:t=o.sent(),o.label=4;case 4:if(oe.validateItemData(e.type,t))return[2,t];throw t;case 5:if(404===(n=o.sent()).code)throw a=ie(e.itemDetails.id),s=new X.z(e.itemDetails.id,a&&a.data?a&&a.data:void 0),R.Z.trackEvent(R.Z.Category.Error,R.Z.Action.Error_DraftDataMissing),s;throw n;case 6:return[2]}}))}));return function(t){return e.apply(this,arguments)}}();var ce=oe},79792:function(e,t,r){r.d(t,{jI:function(){return E}});var i=r(13706),n=r(98788),a=r(90581),s=r(27805),o=r(21218),c=r(70865),l=r(96670),u=r(39309),d=r(45680),p=r(22699),m=r(99698),h=r(8859),g=r(84117),y=r(6e3),f=r(84170),b=r(16202),v=r(56038),Z=r(31274),x=r(1371),I=r(81192),P=r(19601),S=r(26015),_=r(18171),w=r(61201),D=r(52297),R=r(60120),E=function(e){(0,o.Z)(r,e);var t=(0,u.Z)(r);function r(e){var s;(0,a.Z)(this,r),(s=t.call(this))._isOrgItem=!1,s._viewerMode="view",s.preloadedItemResourceImages={},s.getItemResourceUrl=function(e,t){var r,i=e.authManager||s.authManager,n=s.shouldItemResourceUseCDN(),a=e.queryParameters?Object.assign({},e.queryParameters):{};!e.skipToken&&!n&&i&&i.token&&(a.token=i.token);var o="".concat(null!==(r=e.sharingUrl)&&void 0!==r?r:(0,g.Zl)(s.config.PORTAL_HOST),"/content/items/").concat(null!==t&&void 0!==t?t:s.itemId,"/resources/").concat(e.resourceName).concat(a?"?"+(0,y.qC)(a):"");if(n){o=o.replace(/^https:\/\/www.arcgis.com/,"https://cdn.arcgis.com")}return o},s.preloadItemResourceImage=function(e,t){var r=s.getKeyForPreloadedItemResourceImage(e,t);return new Promise((function(i){if("undefined"!==typeof s.preloadedItemResourceImages[r])i({image:s.preloadedItemResourceImages[r],key:r,fileName:e,width:t});else{var n=new Image;n.src=s.getItemResourceImageFullUrl({imageFileName:e,width:t}),n.onload=function(){s.preloadedItemResourceImages[r]=n,i({image:n,key:r,fileName:e,width:t})},n.onerror=function(r){i({error:r.error,fileName:e,width:t})}}}))},s.getKeyForPreloadedItemResourceImage=function(e,t){return"".concat(e,"_w").concat(t)};var o=(0,i.Z)(s);return s._fetchItemResource=function(){var e=(0,n.Z)((function(e){var t,r;return(0,d.__generator)(this,(function(i){switch(i.label){case 0:return t=o.getItemResourceUrl((0,l.Z)((0,c.Z)({},e),{skipToken:!0})),[4,(0,h.WY)(t,{authentication:o.authManager})];case 1:return r=i.sent(),/\.json$/.test(e.resourceName)?[2,f.LN.sanitize(r,{allowUndefined:!0})]:[2,r]}}))}));return function(t){return e.apply(this,arguments)}}(),s._type=e.type,s.config=e.config,s.version=e.version,e.authManager&&(s.authManager=e.authManager),s._getStoryMapUserPrivileges=e.getStoryMapUserPrivileges,e.viewerMode&&(s.viewerMode=e.viewerMode),s}var p=r.prototype;return p.getItemPublishDate=function(){try{var e=(0,b.W$)({itemDetails:this.itemDetails,typekeywordId:w.i1.publishedDate})||(0,b.W$)({itemDetails:this.itemDetails,typekeywordId:"publish-date"});if(e)return new Date(parseInt(e,10));throw new Error("No published date")}catch(t){return"builder"!==this.viewerMode&&new Date(this.itemDetails?this.itemDetails.created:Date.now())}},p.getItemFirstPublishDate=function(){try{var e=(0,b.W$)({itemDetails:this.itemDetails,typekeywordId:w.i1.firstPublishedDate});if(e)return new Date(parseInt(e,10));throw new Error("No first published date")}catch(t){return"builder"!==this.viewerMode&&new Date(this.itemDetails?this.itemDetails.created:Date.now())}},p.getItemPublishStatus=function(){if(!this.itemDetails||!this.itemDetails.typeKeywords||!this.itemDetails.typeKeywords.length)return v.P.draft;var e=(0,D.S$)(this.itemDetails);return e||((0,b.$Y)(this.itemDetails)&&this.itemDetails.access!==Z.eJ.PRIVATE?v.P.published:v.P.draft)},p.getItemResourceImageFullUrl=function(e){var t=e.imageFileName,r=e.width,i=e.itemId,n=e.shouldIgnoreDPR,a=e.sharingUrl;if(!t)return"";if(t.startsWith("https://"))return t;var s=r&&(0,x.n)({width:r,fileName:t,shouldIgnoreDPR:n}),o={resourceName:t,authManager:void 0,sharingUrl:a,queryParameters:s?{w:s}:void 0};return this.getItemResourceUrl(o,i)},p.unloadPreloadedItemResourceImage=function(e,t){delete this.preloadedItemResourceImages[this.getKeyForPreloadedItemResourceImage(e,t)]},p.shouldItemResourceUseCDN=function(){return"view"===this.viewerMode&&"www.arcgis.com"===this.config.PORTAL_HOST&&this.itemSharingLevel.access===Z.eJ.PUBLIC},p.fetchItemResource=function(e){return this._fetchItemResource(e)},p.setItemDetails=function(e){var t;this._itemId=e.id,this._itemOwner=e.owner,this._itemDetails=e,(this._itemDetails.orgId||this._itemDetails.isOrgItem||0===(null!==(t=this._itemDetails.typeKeywords)&&void 0!==t?t:[]).filter((function(e){return e===S.nt})).length)&&(this._isOrgItem=!0)},p.setItemData=function(e){var t=f.LN.sanitize(e,{allowUndefined:!0});this._itemData=t},(0,s.Z)(r,[{key:"itemId",get:function(){return this._itemId},set:function(e){this._itemId||(this._itemId=e)}},{key:"type",get:function(){return this._type}},{key:"itemOwner",get:function(){return this._itemOwner}},{key:"itemDetails",get:function(){return this._itemDetails},set:function(e){if(this._itemDetails)throw new Error("Item details have already been set on the StoryItem and cannot be modified from outside of the StoryItem");this.setItemDetails(e)}},{key:"itemData",get:function(){return this._itemData},set:function(e){if(this._itemData)throw new Error("Item data have already been set on the StoryItem and cannot be modified from outside of the StoryItem");this.setItemData(e)}},{key:"itemSharingLevel",get:function(){var e,t,r,i;return this._itemSharingLevel?this._itemSharingLevel.access===Z.eJ.PRIVATE&&(null===(e=this._itemSharingLevel.groups)||void 0===e?void 0:e.length)&&(null===(t=this._itemSharingLevel.groups)||void 0===t?void 0:t.length)>0?{access:Z.eJ.SHARED,groups:this._itemSharingLevel.groups,isUnlisted:!1}:this._itemSharingLevel:this.itemDetails&&this.itemDetails.access?{access:this.itemDetails.access,groups:[],isUnlisted:null!==(i=null===(r=this.itemDetails.typeKeywords)||void 0===r?void 0:r.includes(I.L7))&&void 0!==i&&i}:_.v},set:function(e){this._itemSharingLevel=e}},{key:"version",get:function(){return this._itemVersion},set:function(e){this._itemVersion=e}},{key:"isOrgItem",get:function(){return this._isOrgItem}},{key:"viewerMode",get:function(){return this._viewerMode},set:function(e){this._viewerMode=e}},{key:"authManager",get:function(){return this._authManager},set:function(e){!this.itemOwner&&e&&e.username&&(this._itemOwner=e.username),this._authManager=e}},{key:"storyMapUserPrivileges",get:function(){return this._getStoryMapUserPrivileges()}}]),r}(p.EventEmitter);E.validateItemData=function(e,t){return!(e!==R.o.Story&&e!==R.o.Collection||!t||"string"!==typeof t.root)||e===R.o.Theme&&"object"===typeof t},E.fetchItemDetails=function(){var e=(0,n.Z)((function(e){var t;return(0,d.__generator)(this,(function(r){switch(r.label){case 0:return t=e.authManager?e.authManager:void 0,[4,(0,m.rV)(e.itemId,{authentication:t,portal:t?void 0:(0,g.Zl)(e.portalHost)})];case 1:return[2,r.sent()]}}))}));return function(t){return e.apply(this,arguments)}}(),E.fetchPublishedItemData=function(){var e=(0,n.Z)((function(e){var t,i,n;return(0,d.__generator)(this,(function(a){switch(a.label){case 0:return[4,(0,P.L)({id:e.itemId,authManager:e.authManager,portalHost:e.portalHost,language:e.language})];case 1:return t=a.sent(),e.type===R.o.Collection&&(null===t||void 0===t?void 0:t.items)?[4,r.e(97738).then(r.bind(r,97738))]:[3,4];case 2:return[4,(0,a.sent().convertToNewCollectionsDataSchema)(t,e.portalHost,(null===(i=e.config)||void 0===i?void 0:i.COLLECTION_ITEM_LIMIT)||S.E5,e.authManager)];case 3:t=a.sent(),a.label=4;case 4:if(E.validateItemData(e.type,t))return[2,t];throw(n=new Error("invalid json response body at ".concat((0,g.Zl)(e.portalHost,e.authManager),"/content/items/").concat(e.itemId,"/data. reason: Unexpected end of JSON input"))).name="FetchError",n.type="invalid-json",n}}))}));return function(t){return e.apply(this,arguments)}}(),t.ZP=E},49423:function(e,t,r){r.d(t,{Z:function(){return v}});var i=r(66383),n=r(52322),a=r(19702),s=r.n(a),o=r(2784),c=r(72779),l=r.n(c),u=r(14979),d=r(39010),p=r(60508),m=r(45345),h=r(37873),g=r(27480),y=r(50211),f="dismissed-callouts";function b(e){var t=(0,o.useState)(!1),r=t[0],i=t[1];(0,o.useEffect)((function(){e&&function(e){return(0,y.$o)({name:f,id:e})}(e)&&i(!0)}),[]);return[r,function(){i(!0),e&&function(e){(0,y.qQ)({name:f,id:e,value:!0})}(e)}]}var v=function(e){var t=e.className,r=e.title,a=e.dismissedStorageId,c=e.children,y=e.closeButtonAriaLabel,f=e.size,v=void 0===f?"large":f,Z=e.hasIcon,x=void 0!==Z&&Z,I=e.isDismissible,P=void 0!==I&&I,S=e.marginTop,_=void 0===S?"0":S,w=e.marginBottom,D=void 0===w?"0":w,R=(0,d.Fj)(),E=R.theme,L=R.productVariables,k=(0,i.Z)(b(a),2),C=k[0],A=k[1],N=(0,p.uw)(),T=N.isViewportMinWidth,U=N.screenWidth,M=(0,o.useState)(!1),B=M[0],O=M[1];if((0,o.useEffect)((function(){O(T("large"))}),[T,U]),C)return null;var j=E.colors.labelInformation,H={styles:(0,n.jsx)(s(),{id:"ea9816c5b6af0e8b",dynamic:[j,h.Z.spacing.xs,h.Z.spacing.xs,m.ZP.center(),h.Z.responsiveBreakpoints.medium,h.Z.spacing.sm,h.Z.spacing.sm,h.Z.responsiveBreakpoints.large,h.Z.spacing.lg,h.Z.spacing.lg],children:".callout-icon.__jsx-style-dynamic-selector{background-color:".concat(j,";-webkit-border-radius:50%;-moz-border-radius:50%;border-radius:50%;width:").concat(h.Z.spacing.xs,";height:").concat(h.Z.spacing.xs,";").concat(m.ZP.center(),"\n    }@media(min-width:").concat(h.Z.responsiveBreakpoints.medium,"){.callout-icon.__jsx-style-dynamic-selector{width:").concat(h.Z.spacing.sm,";height:").concat(h.Z.spacing.sm,"}}@media(min-width:").concat(h.Z.responsiveBreakpoints.large,"){.callout-icon.__jsx-style-dynamic-selector{width:").concat(h.Z.spacing.lg,";height:").concat(h.Z.spacing.lg,"}}")}),className:s().dynamic([["ea9816c5b6af0e8b",[j,h.Z.spacing.xs,h.Z.spacing.xs,m.ZP.center(),h.Z.responsiveBreakpoints.medium,h.Z.spacing.sm,h.Z.spacing.sm,h.Z.responsiveBreakpoints.large,h.Z.spacing.lg,h.Z.spacing.lg]]])};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("aside",{role:"note",className:s().dynamic([["df79c7433b8fcb5c",[h.Z.spacing.xxs,E.colors.backgroundSecondary,E.colors.labelPrimary,h.Z.spacing.xxxxs,j,L.borderRadius.regular,_,D,h.Z.spacing.xxs,m.ZP.typography.bodySmall(),h.Z.spacing.xxxs,h.Z.spacing.xxs,m.ZP.typography.caption(),m.ZP.gappedList(h.Z.spacing.xxs),m.ZP.typography.subtitleLarge(),m.ZP.typography.subtitleSmall(),h.Z.spacing.xs,h.Z.spacing.xs,h.Z.responsiveBreakpoints.medium,h.Z.spacing.xxxs,h.Z.spacing.xs,h.Z.spacing.xxxs]]])+" "+(l()("callout",v,t)||""),children:[x&&(0,n.jsxs)("div",{className:s().dynamic([["df79c7433b8fcb5c",[h.Z.spacing.xxs,E.colors.backgroundSecondary,E.colors.labelPrimary,h.Z.spacing.xxxxs,j,L.borderRadius.regular,_,D,h.Z.spacing.xxs,m.ZP.typography.bodySmall(),h.Z.spacing.xxxs,h.Z.spacing.xxs,m.ZP.typography.caption(),m.ZP.gappedList(h.Z.spacing.xxs),m.ZP.typography.subtitleLarge(),m.ZP.typography.subtitleSmall(),h.Z.spacing.xs,h.Z.spacing.xs,h.Z.responsiveBreakpoints.medium,h.Z.spacing.xxxs,h.Z.spacing.xs,h.Z.spacing.xxxs]]]),children:[(0,n.jsx)(g.Z,{className:l()("callout-icon",H.className),color:h.Z.color.white,size:B?24:16,path:B?u.xTG:u.Bh7}),H.styles]}),(0,n.jsxs)("div",{className:s().dynamic([["df79c7433b8fcb5c",[h.Z.spacing.xxs,E.colors.backgroundSecondary,E.colors.labelPrimary,h.Z.spacing.xxxxs,j,L.borderRadius.regular,_,D,h.Z.spacing.xxs,m.ZP.typography.bodySmall(),h.Z.spacing.xxxs,h.Z.spacing.xxs,m.ZP.typography.caption(),m.ZP.gappedList(h.Z.spacing.xxs),m.ZP.typography.subtitleLarge(),m.ZP.typography.subtitleSmall(),h.Z.spacing.xs,h.Z.spacing.xs,h.Z.responsiveBreakpoints.medium,h.Z.spacing.xxxs,h.Z.spacing.xs,h.Z.spacing.xxxs]]])+" callout-body",children:[r&&(0,n.jsx)("div",{className:s().dynamic([["df79c7433b8fcb5c",[h.Z.spacing.xxs,E.colors.backgroundSecondary,E.colors.labelPrimary,h.Z.spacing.xxxxs,j,L.borderRadius.regular,_,D,h.Z.spacing.xxs,m.ZP.typography.bodySmall(),h.Z.spacing.xxxs,h.Z.spacing.xxs,m.ZP.typography.caption(),m.ZP.gappedList(h.Z.spacing.xxs),m.ZP.typography.subtitleLarge(),m.ZP.typography.subtitleSmall(),h.Z.spacing.xs,h.Z.spacing.xs,h.Z.responsiveBreakpoints.medium,h.Z.spacing.xxxs,h.Z.spacing.xs,h.Z.spacing.xxxs]]])+" callout-title",children:r}),c]}),P&&(0,n.jsx)("div",{className:s().dynamic([["df79c7433b8fcb5c",[h.Z.spacing.xxs,E.colors.backgroundSecondary,E.colors.labelPrimary,h.Z.spacing.xxxxs,j,L.borderRadius.regular,_,D,h.Z.spacing.xxs,m.ZP.typography.bodySmall(),h.Z.spacing.xxxs,h.Z.spacing.xxs,m.ZP.typography.caption(),m.ZP.gappedList(h.Z.spacing.xxs),m.ZP.typography.subtitleLarge(),m.ZP.typography.subtitleSmall(),h.Z.spacing.xs,h.Z.spacing.xs,h.Z.responsiveBreakpoints.medium,h.Z.spacing.xxxs,h.Z.spacing.xs,h.Z.spacing.xxxs]]])+" dismissible-wrapper",children:(0,n.jsx)("button",{type:"button","aria-label":y,onClick:A,"data-testid":"callout-close-button",className:s().dynamic([["df79c7433b8fcb5c",[h.Z.spacing.xxs,E.colors.backgroundSecondary,E.colors.labelPrimary,h.Z.spacing.xxxxs,j,L.borderRadius.regular,_,D,h.Z.spacing.xxs,m.ZP.typography.bodySmall(),h.Z.spacing.xxxs,h.Z.spacing.xxs,m.ZP.typography.caption(),m.ZP.gappedList(h.Z.spacing.xxs),m.ZP.typography.subtitleLarge(),m.ZP.typography.subtitleSmall(),h.Z.spacing.xs,h.Z.spacing.xs,h.Z.responsiveBreakpoints.medium,h.Z.spacing.xxxs,h.Z.spacing.xs,h.Z.spacing.xxxs]]])+" callout-close-button",children:(0,n.jsx)(g.Z,{path:u.oCz,color:E.colors.labelPrimary})})})]}),(0,n.jsx)(s(),{id:"df79c7433b8fcb5c",dynamic:[h.Z.spacing.xxs,E.colors.backgroundSecondary,E.colors.labelPrimary,h.Z.spacing.xxxxs,j,L.borderRadius.regular,_,D,h.Z.spacing.xxs,m.ZP.typography.bodySmall(),h.Z.spacing.xxxs,h.Z.spacing.xxs,m.ZP.typography.caption(),m.ZP.gappedList(h.Z.spacing.xxs),m.ZP.typography.subtitleLarge(),m.ZP.typography.subtitleSmall(),h.Z.spacing.xs,h.Z.spacing.xs,h.Z.responsiveBreakpoints.medium,h.Z.spacing.xxxs,h.Z.spacing.xs,h.Z.spacing.xxxs],children:".callout.__jsx-style-dynamic-selector{display:grid;grid-auto-flow:column;gap:".concat(h.Z.spacing.xxs,";max-width:100%;background-color:").concat(E.colors.backgroundSecondary,";color:").concat(E.colors.labelPrimary,";-webkit-border-start:").concat(h.Z.spacing.xxxxs," solid ").concat(j,";-moz-border-start:").concat(h.Z.spacing.xxxxs," solid ").concat(j,";border-inline-start:").concat(h.Z.spacing.xxxxs," solid ").concat(j,";-webkit-border-radius:").concat(L.borderRadius.regular,";-moz-border-radius:").concat(L.borderRadius.regular,";border-radius:").concat(L.borderRadius.regular,";margin:").concat(_," 0 ").concat(D,"}.callout.large.__jsx-style-dynamic-selector{padding:").concat(h.Z.spacing.xxs,";").concat(m.ZP.typography.bodySmall(),"\n        }.callout.small.__jsx-style-dynamic-selector{padding:").concat(h.Z.spacing.xxxs," ").concat(h.Z.spacing.xxs,";").concat(m.ZP.typography.caption(),"\n        }.callout-body.__jsx-style-dynamic-selector{").concat(m.ZP.gappedList(h.Z.spacing.xxs),"\n        }.large.__jsx-style-dynamic-selector .callout-title.__jsx-style-dynamic-selector{").concat(m.ZP.typography.subtitleLarge(),"\n        }.small.__jsx-style-dynamic-selector .callout-title.__jsx-style-dynamic-selector{").concat(m.ZP.typography.subtitleSmall(),"\n        }.callout-close-button.__jsx-style-dynamic-selector{width:").concat(h.Z.spacing.xs,";height:").concat(h.Z.spacing.xs,";padding:0}.dismissible-wrapper.__jsx-style-dynamic-selector{text-align:end}@media(min-width:").concat(h.Z.responsiveBreakpoints.medium,"){.callout.__jsx-style-dynamic-selector{grid-row-gap:").concat(h.Z.spacing.xxxs,"}.callout.large.__jsx-style-dynamic-selector{padding:").concat(h.Z.spacing.xs,"}.callout-body.__jsx-style-dynamic-selector{grid-row-gap:").concat(h.Z.spacing.xxxs,"}}")})]})}},65885:function(e,t,r){r.d(t,{_:function(){return l}});var i=r(47842),n=r(52322),a=(r(2784),r(14979)),s=r(31274),o=r(37873),c=r(27480),l=function(e){var t,r=e.className,l=e.accessLevel,u=e.color,d=void 0===u?o.Z.color.white:u,p=e.isUnlisted,m=void 0!==p&&p,h=(t={},(0,i.Z)(t,s.eJ.PRIVATE,a.KK2),(0,i.Z)(t,s.eJ.SHARED,a.gtX),(0,i.Z)(t,s.eJ.PUBLIC,a.d_n),(0,i.Z)(t,s.eJ.ORG,a._u1),(0,i.Z)(t,"unlisted",a.Ik3),t),g=m?"unlisted":l;return g?(0,n.jsx)(c.Z,{path:h[g],size:16,color:d,className:r}):null}},30799:function(e,t,r){var i=r(90581),n=r(21218),a=r(39309),s=r(52322),o=r(19702),c=r.n(o),l=r(2784),u=r(37149),d=r.n(u),p=r(72779),m=r.n(p),h=r(34269),g=r(45345),y=r(22045),f=r(37873),b=r(53200),v=function(e){(0,n.Z)(r,e);var t=(0,a.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).blurTargetOnClose=function(){var e,t;null===(e=document.activeElement)||void 0===e||null===(t=e.blur)||void 0===t||t.call(e)},n.onContentRefUpdated=function(e){n.setState({contentElement:null!==e&&void 0!==e?e:void 0})},n.state={contentElement:void 0},n}return r.prototype.render=function(){return(0,s.jsxs)(h.zo,{appendableElement:this.state.contentElement,children:[(0,s.jsx)(d(),{closeTimeoutMS:500,className:{base:m()("modal-content",this.props.modalClassNames,{"top-offset":"top-offset"===this.props.verticalPosition,"should-center":this.props.shouldCenterModal}),afterOpen:"after-open",beforeClose:"before-close"},contentRef:this.onContentRefUpdated,overlayClassName:{base:m()("modal-overlay",this.props.overlayClassNames,{"should-center":this.props.shouldCenterModal,"white-overlay":this.props.hasWhiteOverlay}),afterOpen:"after-open",beforeClose:"before-close"},isOpen:this.props.isOpen,onRequestClose:this.props.onRequestClose,ariaHideApp:!1,htmlOpenClassName:m()("ReactModal__Html--open",{"no-scroll":this.props.preventScrollWhenOpen}),bodyOpenClassName:b.Ge,portalClassName:m()("ReactModalPortal",this.props.portalClassNames),onAfterClose:this.blurTargetOnClose,shouldCloseOnOverlayClick:this.props.shouldCloseOnOverlayClick,shouldCloseOnEsc:this.props.shouldCloseOnEsc,children:this.props.children}),(0,s.jsx)(c(),{id:"5e1fdc53ea757ec5",dynamic:[b.Ge,b.y$,b.y$,g.ZP.overlayBackground(),g.ZP.overlayBackgroundWhite(),b.AB,b.ib,y._.userIsNotTabbing,f.Z.responsiveBreakpoints.short],children:"html.ReactModal__Html--open.no-scroll{overflow-y:hidden}body.".concat(b.Ge,"{position:static;overflow-y:scroll}.ReactModalPortal{position:fixed;z-index:").concat(b.y$,";height:1px;width:1px}.modal-overlay{position:fixed;z-index:").concat(b.y$,";top:0;left:0;right:0;bottom:0;background-color:").concat(g.ZP.overlayBackground(),";overflow-y:hidden;-webkit-transition:opacity 150ms ease-in-out;-moz-transition:opacity 150ms ease-in-out;-o-transition:opacity 150ms ease-in-out;transition:opacity 150ms ease-in-out}.modal-overlay.should-center{display:grid;justify-items:center;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.modal-overlay.white-overlay{background-color:").concat(g.ZP.overlayBackgroundWhite(),"}.modal-overlay.before-close{-webkit-transition-delay:300ms;-moz-transition-delay:300ms;-o-transition-delay:300ms;transition-delay:300ms}.modal-content{-webkit-transition:opacity ").concat(b.AB,"ms ease-in-out;-moz-transition:opacity ").concat(b.AB,"ms ease-in-out;-o-transition:opacity ").concat(b.AB,"ms ease-in-out;transition:opacity ").concat(b.AB,"ms ease-in-out}.modal-content.after-open.top-offset{position:absolute;top:5vh}.modal-content.after-open:not(.before-close){-webkit-transition-delay:").concat(b.ib,"ms;-moz-transition-delay:").concat(b.ib,"ms;-o-transition-delay:").concat(b.ib,"ms;transition-delay:").concat(b.ib,"ms}.modal-overlay.after-open,.modal-content.after-open{opacity:1}.modal-overlay,.modal-content,.modal-overlay.before-close,.modal-content.before-close{opacity:0}.modal-content.after-open{-webkit-transform:scale(1);-moz-transform:scale(1);-ms-transform:scale(1);-o-transform:scale(1);transform:scale(1)}.modal-content.after-open:not(.top-offset){position:fixed;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);-moz-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);-o-transform:translate(-50%,-50%);transform:translate(-50%,-50%)}.modal-content,.modal-content.before-close{-webkit-transform:scale(.9);-moz-transform:scale(.9);-ms-transform:scale(.9);-o-transform:scale(.9);transform:scale(.9)}.modal-content.before-close{-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}").concat(y._.userIsNotTabbing," .modal-content:focus{outline:none}@media(prefers-reduced-motion:reduce){.modal-content,.modal-overlay{-webkit-transition:none;-moz-transition:none;-o-transition:none;transition:none}}@media(max-height:").concat(f.Z.responsiveBreakpoints.short,"){.modal-overlay.after-open.should-center{overflow-y:auto}.modal-content.after-open.should-center{position:absolute;top:5vh;margin-bottom:5vh}}")})]})},r}(l.PureComponent);v.defaultProps={shouldCloseOnOverlayClick:!0,shouldCloseOnEsc:!0},t.Z=v},76995:function(e,t,r){var i=r(90581),n=r(21218),a=r(39309),s=r(52322),o=r(19702),c=r.n(o),l=r(2784),u=r(72779),d=r.n(u),p=r(60508),m=r(45345),h=r(37873),g=r(53200),y=r(30799),f=r(56067),b=r(57087),v=r(48916),Z=function(e){(0,n.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return r.prototype.render=function(){var e=h.Z.spacing.xs,t="large"===this.props.size?g.FW:g.Ur;return(0,s.jsxs)(y.Z,{isOpen:this.props.isShowingModal,shouldCloseOnOverlayClick:this.props.shouldCloseOnOverlayClick,shouldCloseOnEsc:this.props.shouldCloseOnEsc,preventScrollWhenOpen:!0,onRequestClose:this.props.onCloseButtonClick,shouldCenterModal:!0,verticalPosition:this.props.hasTabs?"top-offset":"center",modalClassNames:this.props.modalClassNames,overlayClassNames:this.props.overlayClassNames,portalClassNames:this.props.portalClassNames,children:[(0,s.jsxs)("div",{className:c().dynamic([["4822c4daf5eed9f6",[t,h.Z.color.white,h.Z.spacing.xxs,h.Z.spacing.xxs,h.Z.color.white,m.ZP.shadow.lg(),m.ZP.overflowWrap(),h.Z.spacing.xs,h.Z.responsiveBreakpoints.short]]])+" "+(d()("modal-popup-container",this.props.modalPopupClassNames)||""),children:[(0,s.jsx)(v.Z,{className:this.props.headerClassName,startItems:this.props.headerStartItems,headerTitle:this.props.headerTitle,headerSubtitle:this.props.headerSubtitle,showCloseButton:"function"===typeof this.props.onCloseButtonClick,onCloseButtonClick:this.props.onCloseButtonClick,closeButtonLabel:this.props.closeButtonLabel,shouldCloseOnXButtonClick:this.props.shouldCloseOnXButtonClick,sidePadding:e}),this.props.children&&(0,s.jsx)(f.Z,{className:this.props.bodyClassName,children:this.props.children,sidePadding:e,hasTopMargin:!this.props.hasTabs}),(0,s.jsx)(b.Z,{isPrimaryButtonDisabled:this.props.isPrimaryButtonDisabled,primaryButtonTitle:this.props.primaryButtonTitle,onPrimaryButtonClick:this.props.onPrimaryButtonClick,primaryButton:this.props.primaryButton,primaryButtonVariant:this.props.primaryButtonVariant,secondaryButtonVariant:this.props.secondaryButtonVariant,secondaryButtonTitle:this.props.secondaryButtonTitle,isSecondaryButtonDisabled:this.props.isSecondaryButtonDisabled,onSecondaryButtonClick:this.props.onSecondaryButtonClick,onDeleteButtonClick:this.props.onDeleteButtonClick,deleteButtonTitle:this.props.deleteButtonTitle,sidePadding:e})]}),(0,s.jsx)(c(),{id:"4822c4daf5eed9f6",dynamic:[t,h.Z.color.white,h.Z.spacing.xxs,h.Z.spacing.xxs,h.Z.color.white,m.ZP.shadow.lg(),m.ZP.overflowWrap(),h.Z.spacing.xs,h.Z.responsiveBreakpoints.short],children:".modal-popup-container.__jsx-style-dynamic-selector{width:".concat(t,";background-color:").concat(h.Z.color.white,";max-width:100vw;padding:").concat(h.Z.spacing.xxs," 0 ").concat(h.Z.spacing.xxs,";display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;border:.1rem solid ").concat(h.Z.color.white,";").concat(m.ZP.shadow.lg(),"\n            ").concat(m.ZP.overflowWrap(),"\n            max-height: 90vh;}.modal-popup-side-padding-wrapper.__jsx-style-dynamic-selector{padding:0 ").concat(h.Z.spacing.xs,"}@media(max-height:").concat(h.Z.responsiveBreakpoints.short,"){.modal-popup-container.__jsx-style-dynamic-selector{max-height:none}}")})]})},r}(l.PureComponent);t.Z=(0,p.VO)(Z)},56067:function(e,t,r){var i=r(90581),n=r(21218),a=r(39309),s=r(52322),o=r(19702),c=r.n(o),l=r(2784),u=r(72779),d=r.n(u),p=r(39010),m=r(45345),h=r(37873),g=function(e){(0,n.Z)(r,e);var t=(0,a.Z)(r);function r(){return(0,i.Z)(this,r),t.apply(this,arguments)}return r.prototype.render=function(){return(0,s.jsxs)(l.Fragment,{children:[(0,s.jsx)("div",{className:c().dynamic([["a30b13508c7a4321",[m.ZP.typography.bodyLarge(),h.Z.color.darkGreen,m.ZP.overflowWrap(),this.props.hasTopMargin?h.Z.spacing.xxs:0,this.props.sidePadding,h.Z.spacing.lg,this.props.sidePadding,h.Z.spacing.xxs,this.props.websiteDesign.theme.colors.labelLink,h.Z.responsiveBreakpoints.medium,this.props.spacingBottomLg,h.Z.responsiveBreakpoints.short]]])+" "+(d()("modal-popup-body",this.props.className)||""),children:this.props.children}),(0,s.jsx)(c(),{id:"a30b13508c7a4321",dynamic:[m.ZP.typography.bodyLarge(),h.Z.color.darkGreen,m.ZP.overflowWrap(),this.props.hasTopMargin?h.Z.spacing.xxs:0,this.props.sidePadding,h.Z.spacing.lg,this.props.sidePadding,h.Z.spacing.xxs,this.props.websiteDesign.theme.colors.labelLink,h.Z.responsiveBreakpoints.medium,this.props.spacingBottomLg,h.Z.responsiveBreakpoints.short],children:".modal-popup-body.__jsx-style-dynamic-selector{".concat(m.ZP.typography.bodyLarge(),"\n            color: ").concat(h.Z.color.darkGreen,";").concat(m.ZP.overflowWrap(),"\n            \n            margin: ").concat(this.props.hasTopMargin?h.Z.spacing.xxs:0,"\n              calc(").concat(this.props.sidePadding," / 2) ").concat(h.Z.spacing.lg,";padding:0 -webkit-calc(").concat(this.props.sidePadding,"/2);padding:0 -moz-calc(").concat(this.props.sidePadding,"/2);padding:0 calc(").concat(this.props.sidePadding,"/2);overflow-y:auto;-webkit-box-flex:1;-webkit-flex-grow:1;-moz-box-flex:1;-ms-flex-positive:1;flex-grow:1}.modal-popup-body.__jsx-style-dynamic-selector>:not(:first-child){margin-top:").concat(h.Z.spacing.xxs,"}.modal-popup-body.__jsx-style-dynamic-selector a{color:").concat(this.props.websiteDesign.theme.colors.labelLink,"}@media(min-width:").concat(h.Z.responsiveBreakpoints.medium,"){.modal-popup-body.__jsx-style-dynamic-selector{margin-bottom:").concat(this.props.spacingBottomLg,"}}@media(max-height:").concat(h.Z.responsiveBreakpoints.short,"){.modal-popup-body.__jsx-style-dynamic-selector{overflow:visible;-webkit-box-flex:0;-webkit-flex-grow:0;-moz-box-flex:0;-ms-flex-positive:0;flex-grow:0}}")})]})},r}(l.PureComponent);g.defaultProps={sidePadding:h.Z.spacing.xs,spacingBottomLg:h.Z.spacing.sm,hasTopMargin:!0},t.Z=(0,p.EL)(g)},57087:function(e,t,r){var i=r(90581),n=r(21218),a=r(39309),s=r(52322),o=r(19702),c=r.n(o),l=r(2784),u=r(72779),d=r.n(u),p=r(39010),m=r(37873),h=r(75848),g=function(e){(0,n.Z)(r,e);var t=(0,a.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).renderDeleteButton=function(){return(0,s.jsx)(h.ZP,{type:"dangerous",onClick:e.props.onDeleteButtonClick,children:e.props.deleteButtonTitle})},e}return r.prototype.render=function(){var e,t=this.props.onDeleteButtonClick?this.renderDeleteButton():void 0;return(0,s.jsxs)(l.Fragment,{children:[(0,s.jsxs)("div",{className:c().dynamic([["acef8253f767999c",[m.Z.spacing.xxs,this.props.sidePadding,this.props.websiteDesign.theme.colors.outlineSubduedDefault,m.Z.spacing.xs,m.Z.spacing.xxs,m.Z.spacing.xxxs]]])+" "+(d()("modal-popup-footer",this.props.className,{vertical:"vertical"===this.props.orientation})||""),children:[(this.props.startContent||t)&&(0,s.jsxs)("div",{className:c().dynamic([["acef8253f767999c",[m.Z.spacing.xxs,this.props.sidePadding,this.props.websiteDesign.theme.colors.outlineSubduedDefault,m.Z.spacing.xs,m.Z.spacing.xxs,m.Z.spacing.xxxs]]])+" "+(d()("start-content-container",{vertical:"vertical"===this.props.orientation})||""),children:[t,this.props.startContent]}),(0,s.jsxs)("div",{className:c().dynamic([["acef8253f767999c",[m.Z.spacing.xxs,this.props.sidePadding,this.props.websiteDesign.theme.colors.outlineSubduedDefault,m.Z.spacing.xs,m.Z.spacing.xxs,m.Z.spacing.xxxs]]])+" "+(d()("modal-popup-footer-action-button-container",{vertical:"vertical"===this.props.orientation})||""),children:[this.props.secondaryButtonTitle&&this.props.onSecondaryButtonClick&&(0,s.jsx)(h.ZP,{type:"text",onClick:this.props.onSecondaryButtonClick,disabled:this.props.isSecondaryButtonDisabled,children:this.props.secondaryButtonTitle}),null!==(e=this.props.primaryButton)&&void 0!==e?e:(0,s.jsx)(h.ZP,{onClick:this.props.onPrimaryButtonClick,disabled:this.props.isPrimaryButtonDisabled,children:this.props.primaryButtonTitle})]})]}),(0,s.jsx)(c(),{id:"acef8253f767999c",dynamic:[m.Z.spacing.xxs,this.props.sidePadding,this.props.websiteDesign.theme.colors.outlineSubduedDefault,m.Z.spacing.xs,m.Z.spacing.xxs,m.Z.spacing.xxxs],children:".modal-popup-footer.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-moz-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;padding:".concat(m.Z.spacing.xxs," ").concat(this.props.sidePadding," 0;border-top:1px solid ").concat(this.props.websiteDesign.theme.colors.outlineSubduedDefault,";width:100%}.modal-popup-footer.vertical.__jsx-style-dynamic-selector{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch}.start-content-container.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;-webkit-margin-end:auto;-moz-margin-end:auto;margin-inline-end:auto;-webkit-padding-end:").concat(m.Z.spacing.xs,";-moz-padding-end:").concat(m.Z.spacing.xs,";padding-inline-end:").concat(m.Z.spacing.xs,"}.start-content-container.vertical.__jsx-style-dynamic-selector{-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:stretch;-webkit-align-items:stretch;-moz-box-align:stretch;-ms-flex-align:stretch;align-items:stretch;-webkit-margin-end:unset;-moz-margin-end:unset;margin-inline-end:unset;-webkit-padding-end:unset;-moz-padding-end:unset;padding-inline-end:unset;margin-bottom:").concat(m.Z.spacing.xxs,"}.modal-popup-footer-action-button-container.__jsx-style-dynamic-selector{display:grid;-webkit-box-pack:center;-webkit-justify-content:center;-moz-box-pack:center;-ms-flex-pack:center;justify-content:center;grid-auto-flow:column;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center;grid-column-gap:").concat(m.Z.spacing.xxxs,"}.modal-popup-footer-action-button-container.vertical.__jsx-style-dynamic-selector{grid-auto-flow:row;-webkit-box-pack:stretch;-webkit-justify-content:stretch;-moz-box-pack:stretch;-ms-flex-pack:stretch;justify-content:stretch}")})]})},r}(l.PureComponent);g.defaultProps={sidePadding:m.Z.spacing.xs,primaryButtonVariant:"primary",secondaryButtonVariant:"secondary",orientation:"horizontal"},t.Z=(0,p.EL)(g)},48916:function(e,t,r){var i=r(90581),n=r(21218),a=r(70865),s=r(96670),o=r(39309),c=r(52322),l=r(19702),u=r.n(l),d=r(2784),p=r(72779),m=r.n(p),h=r(14979),g=r(39010),y=r(45345),f=r(37873),b=r(75848),v=r(27480),Z=function(e){(0,n.Z)(r,e);var t=(0,o.Z)(r);function r(){var e;return(0,i.Z)(this,r),(e=t.apply(this,arguments)).renderCloseButton=function(){var t={styles:(0,c.jsx)(u(),{id:"fa43e8156beb585b",dynamic:[f.Z.spacing.xxxxs],children:".large-close-btn.__jsx-style-dynamic-selector{padding:".concat(f.Z.spacing.xxxxs,"}")}),className:u().dynamic([["fa43e8156beb585b",[f.Z.spacing.xxxxs]]])},r={type:"single-icon",onClick:e.props.onCloseButtonClick,ariaLabel:e.props.closeButtonLabel,disabled:!e.props.shouldCloseOnXButtonClick};return"large"===e.props.closeBtnSize?(0,c.jsxs)(b.ZP,(0,s.Z)((0,a.Z)({},r),{className:m()("large-close-btn",t.className),children:[(0,c.jsx)(v.Z,{path:h.ddx,size:32}),t.styles]})):(0,c.jsx)(b.ZP,(0,s.Z)((0,a.Z)({},r),{iconSize:24,children:(0,c.jsx)(v.Z,{path:h.oCz})}))},e}return r.prototype.render=function(){return(0,c.jsxs)("div",{className:u().dynamic([["4e954d9e89fb03a1",[this.props.sidePadding,f.Z.spacing.xxs,y.ZP.gapped({direction:"horizontal",gap:f.Z.spacing.xxs,alignItems:"center",justifyContent:"center"}),y.ZP.gapped({direction:"horizontal",gap:f.Z.spacing.sm,alignItems:"center",justifyContent:"center"}),this.props.websiteDesign.theme.colors.labelPrimary,y.ZP.typography.headingSmall(),y.ZP.typography.headingLarge(),this.props.websiteDesign.theme.colors.labelPrimary,y.ZP.typography.bodySmall(),f.Z.spacing.sm]]])+" "+(m()("modal-popup-header",this.props.className,{sticky:this.props.isHeaderSticky})||""),children:[(0,c.jsxs)("div",{className:u().dynamic([["4e954d9e89fb03a1",[this.props.sidePadding,f.Z.spacing.xxs,y.ZP.gapped({direction:"horizontal",gap:f.Z.spacing.xxs,alignItems:"center",justifyContent:"center"}),y.ZP.gapped({direction:"horizontal",gap:f.Z.spacing.sm,alignItems:"center",justifyContent:"center"}),this.props.websiteDesign.theme.colors.labelPrimary,y.ZP.typography.headingSmall(),y.ZP.typography.headingLarge(),this.props.websiteDesign.theme.colors.labelPrimary,y.ZP.typography.bodySmall(),f.Z.spacing.sm]]])+" title-close-wrapper",children:[(0,c.jsxs)("div",{className:u().dynamic([["4e954d9e89fb03a1",[this.props.sidePadding,f.Z.spacing.xxs,y.ZP.gapped({direction:"horizontal",gap:f.Z.spacing.xxs,alignItems:"center",justifyContent:"center"}),y.ZP.gapped({direction:"horizontal",gap:f.Z.spacing.sm,alignItems:"center",justifyContent:"center"}),this.props.websiteDesign.theme.colors.labelPrimary,y.ZP.typography.headingSmall(),y.ZP.typography.headingLarge(),this.props.websiteDesign.theme.colors.labelPrimary,y.ZP.typography.bodySmall(),f.Z.spacing.sm]]])+" start-items",children:[this.props.startItems,(0,c.jsx)("h3",{className:u().dynamic([["4e954d9e89fb03a1",[this.props.sidePadding,f.Z.spacing.xxs,y.ZP.gapped({direction:"horizontal",gap:f.Z.spacing.xxs,alignItems:"center",justifyContent:"center"}),y.ZP.gapped({direction:"horizontal",gap:f.Z.spacing.sm,alignItems:"center",justifyContent:"center"}),this.props.websiteDesign.theme.colors.labelPrimary,y.ZP.typography.headingSmall(),y.ZP.typography.headingLarge(),this.props.websiteDesign.theme.colors.labelPrimary,y.ZP.typography.bodySmall(),f.Z.spacing.sm]]])+" "+(m()("modal-popup-header-title",{small:"sm"===this.props.titleSize,large:"lg"===this.props.titleSize})||""),children:this.props.headerTitle})]}),(0,c.jsxs)("div",{className:u().dynamic([["4e954d9e89fb03a1",[this.props.sidePadding,f.Z.spacing.xxs,y.ZP.gapped({direction:"horizontal",gap:f.Z.spacing.xxs,alignItems:"center",justifyContent:"center"}),y.ZP.gapped({direction:"horizontal",gap:f.Z.spacing.sm,alignItems:"center",justifyContent:"center"}),this.props.websiteDesign.theme.colors.labelPrimary,y.ZP.typography.headingSmall(),y.ZP.typography.headingLarge(),this.props.websiteDesign.theme.colors.labelPrimary,y.ZP.typography.bodySmall(),f.Z.spacing.sm]]])+" end-items",children:[this.props.endItems,this.props.showCloseButton&&this.renderCloseButton()]})]}),this.props.headerSubtitle&&(0,c.jsx)("h4",{className:u().dynamic([["4e954d9e89fb03a1",[this.props.sidePadding,f.Z.spacing.xxs,y.ZP.gapped({direction:"horizontal",gap:f.Z.spacing.xxs,alignItems:"center",justifyContent:"center"}),y.ZP.gapped({direction:"horizontal",gap:f.Z.spacing.sm,alignItems:"center",justifyContent:"center"}),this.props.websiteDesign.theme.colors.labelPrimary,y.ZP.typography.headingSmall(),y.ZP.typography.headingLarge(),this.props.websiteDesign.theme.colors.labelPrimary,y.ZP.typography.bodySmall(),f.Z.spacing.sm]]])+" modal-popup-header-subtitle",children:this.props.headerSubtitle}),(0,c.jsx)(u(),{id:"4e954d9e89fb03a1",dynamic:[this.props.sidePadding,f.Z.spacing.xxs,y.ZP.gapped({direction:"horizontal",gap:f.Z.spacing.xxs,alignItems:"center",justifyContent:"center"}),y.ZP.gapped({direction:"horizontal",gap:f.Z.spacing.sm,alignItems:"center",justifyContent:"center"}),this.props.websiteDesign.theme.colors.labelPrimary,y.ZP.typography.headingSmall(),y.ZP.typography.headingLarge(),this.props.websiteDesign.theme.colors.labelPrimary,y.ZP.typography.bodySmall(),f.Z.spacing.sm],children:".modal-popup-header.__jsx-style-dynamic-selector{padding:0 ".concat(this.props.sidePadding," ").concat(f.Z.spacing.xxs,"}.modal-popup-header.sticky.__jsx-style-dynamic-selector{position:-webkit-sticky;position:sticky;top:0;z-index:1;background-color:inherit}.title-close-wrapper.__jsx-style-dynamic-selector{display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;-moz-box-orient:horizontal;-moz-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-moz-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-webkit-align-items:center;-moz-box-align:center;-ms-flex-align:center;align-items:center}.start-items.__jsx-style-dynamic-selector{").concat(y.ZP.gapped({direction:"horizontal",gap:f.Z.spacing.xxs,alignItems:"center",justifyContent:"center"}),"\n          }.end-items.__jsx-style-dynamic-selector{").concat(y.ZP.gapped({direction:"horizontal",gap:f.Z.spacing.sm,alignItems:"center",justifyContent:"center"}),"\n          }.modal-popup-header-title.__jsx-style-dynamic-selector{color:").concat(this.props.websiteDesign.theme.colors.labelPrimary,"}.modal-popup-header-title.small.__jsx-style-dynamic-selector{").concat(y.ZP.typography.headingSmall(),"\n          }.modal-popup-header-title.large.__jsx-style-dynamic-selector{").concat(y.ZP.typography.headingLarge(),"\n          }.modal-popup-header-subtitle.__jsx-style-dynamic-selector{color:").concat(this.props.websiteDesign.theme.colors.labelPrimary,";").concat(y.ZP.typography.bodySmall(),"\n            margin-top: ").concat(f.Z.spacing.sm,";}")})]})},r}(d.PureComponent);Z.defaultProps={showCloseButton:!0,shouldCloseOnXButtonClick:!0,sidePadding:f.Z.spacing.xs,closeBtnSize:"default",titleSize:"sm"},t.Z=(0,g.EL)(Z)},53200:function(e,t,r){r.d(t,{AB:function(){return n},FW:function(){return c},Ge:function(){return s},Ur:function(){return o},ib:function(){return i},y$:function(){return a}});var i=150,n=300,a=99,s="modal-body-open",o="56rem",c="84.8rem"},79295:function(e,t,r){var i=r(70865),n=r(52322),a=(r(2784),r(78851));t.ZP=function(e){return function(t){return(0,n.jsx)(a.uL.Consumer,{children:function(r){return(0,n.jsx)(e,(0,i.Z)({},t,r))}})}}},38388:function(e,t,r){var i,n;r.d(t,{Im:function(){return o},Yn:function(){return a},eW:function(){return s},jJ:function(){return i}}),function(e){e.STORY_MAP="storymap",e.WEBMAP="webmap",e.WEBSCENE="webscene",e.MAP_LAYER="map-layer",e.STORYMAP_THEME="storymap-theme"}(i||(i={})),function(e){e.ARCGIS_STREAM_LAYER="ArcGISStreamLayer",e.BING_AERIAL_LAYER="BingMapsAerial",e.BING_ROAD_LAYER="BingMapsRoad",e.BING_HYBRID_LAYER="BingMapsHybrid",e.BUILDING_SCENE_LAYER="BuildingSceneLayer",e.CSV_LAYER="CSV",e.ELEVATION_LAYER="ArcGISTiledElevationServiceLayer",e.FEATURE_LAYER="ArcGISFeatureLayer",e.GEO_RSS_LAYER="GeoRSS",e.GROUP_LAYER="GroupLayer",e.IMAGE_SERVICE_LAYER="ArcGISImageServiceLayer",e.IMAGE_SERVICE_VECTOR_LAYER="ArcGISImageServiceVectorLayer",e.INTEGRATED_MESH_LAYER="IntegratedMeshLayer",e.KML_LAYER="KML",e.MAP_SERVICE_LAYER="ArcGISMapServiceLayer",e.OPEN_STREET_MAP_LAYER="OpenStreetMap",e.POINT_CLOUD_LAYER="PointCloudLayer",e.SCENE_LAYER="ArcGISSceneServiceLayer",e.TILED_IMAGE_SERVICE_LAYER="ArcGISTiledImageServiceLayer",e.TILED_MAP_SERVICE_LAYER="ArcGISTiledMapServiceLayer",e.VECTOR_TILE_LAYER="VectorTileLayer",e.WEB_FEATURE_SERVICE_LAYER="WFS",e.WEB_TILE_LAYER="WebTiledLayer",e.WMS_LAYER="WMS"}(n||(n={}));var a=new Error("The issue cannot be automatically fixed"),s=new Error("App cannot be registered. Registration must be provided"),o=new Error("No app proxy information provided")},2879:function(e,t,r){r.d(t,{A7:function(){return p},Mp:function(){return Z},Nx:function(){return x},Q1:function(){return m},XM:function(){return f},kW:function(){return v},pA:function(){return b}});var i=r(98788),n=r(1899),a=r(45680),s=r(99698),o=r(31274),c=r(58650),l=r(29284),u=r(19601),d=r(38388),p=function(e,t){return"admin"===e.itemControl||e.owner===(null===t||void 0===t?void 0:t.username)},m=function(e){var t,r,i,n=e.group,a=e.hasItemOwnerPermission,s=e.allowSharingToUpdateGroups;return!("admin"!==(null===(t=n.userMembership)||void 0===t?void 0:t.memberType)&&"owner"!==(null===(r=n.userMembership)||void 0===r?void 0:r.memberType)&&(n.isViewOnly||"member"!==(null===(i=n.userMembership)||void 0===i?void 0:i.memberType)||!a)||(s||n.capabilities&&n.capabilities.includes("updateitemcontrol"))&&!s)},h=function(){var e=(0,i.Z)((function(e){var t,r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return e.requiredSharingLevel.groups&&0!==e.requiredSharingLevel.groups.length&&(!e.isNestedItem||e.itemDetails.access!==o.eJ.PUBLIC&&e.requiredSharingLevel.access!==o.eJ.PUBLIC)?[4,(0,c.mY)({itemDetails:e.itemDetails,authManager:e.authManager})]:[2,!1];case 1:return t=i.sent(),0===(r=e.requiredSharingLevel.groups.filter((function(e){return!t.includes(e)}))).length?[2,!1]:[2,r]}}))}));return function(t){return e.apply(this,arguments)}}(),g=function(e,t){var r=[o.eJ.PRIVATE,o.eJ.SHARED,o.eJ.ORG,o.eJ.PUBLIC];return r.indexOf(t.access)>=r.indexOf(e)},y=function(){var e=(0,i.Z)((function(e){var t,r,i,s,c,l,u,d,h;return(0,a.__generator)(this,(function(a){switch(a.label){case 0:return t=p(e.itemDetails,e.authManager),g(e.requiredSharingLevel.access,e.itemDetails)||t?[4,e.authManager.getUser()]:[2,!1];case 1:if(r=a.sent(),e.requiredSharingLevel.access===o.eJ.ORG&&(e.storyMapUserPrivileges&&!e.storyMapUserPrivileges.canShareOrg||!e.storyMapUserPrivileges&&r.privileges&&r.privileges.indexOf("portal:user:shareToOrg")<0&&r.privileges.indexOf("portal:admin:shareToOrg")<0))return[2,!1];if(e.requiredSharingLevel.access===o.eJ.PUBLIC&&(e.storyMapUserPrivileges&&!e.storyMapUserPrivileges.canSharePublic||!e.storyMapUserPrivileges&&r.privileges&&r.privileges.indexOf("portal:user:shareToPublic")<0&&r.privileges.indexOf("portal:admin:shareToPublic")<0))return[2,!1];if(e.requiredSharingLevel.groups&&e.requiredSharingLevel.groups.length>0&&(e.storyMapUserPrivileges&&!e.storyMapUserPrivileges.canShareToGroup||!e.storyMapUserPrivileges&&r.privileges&&r.privileges.indexOf("portal:user:shareToGroup")<0&&r.privileges.indexOf("portal:admin:shareToGroup")<0))return[2,!1];if(e.newRequiredGroups){i=!0,s=!1,c=void 0;try{for(l=function(){var i,n=d.value,a=null===(i=r.groups)||void 0===i?void 0:i.find((function(e){return e.id===n}));if(!a||!m({group:a,hasItemOwnerPermission:t,allowSharingToUpdateGroups:e.allowSharingToUpdateGroups}))return{v:!1}},u=e.newRequiredGroups[Symbol.iterator]();!(i=(d=u.next()).done);i=!0)if(h=l(),"object"===(0,n.Z)(h))return[2,h.v]}catch(y){s=!0,c=y}finally{try{i||null==u.return||u.return()}finally{if(s)throw c}}}return[2,!0]}}))}));return function(t){return e.apply(this,arguments)}}(),f=function(e){var t;return(null!==(t=e.typeKeywords)&&void 0!==t?t:[]).indexOf("Requires Credits")>=0},b=function(e){var t;return(null!==(t=e.typeKeywords)&&void 0!==t?t:[]).indexOf("Requires Subscription")>=0},v=function(){var e=(0,i.Z)((function(e,t){var r,n,c,l,u,p,m,v,Z,x,I,P,S;return(0,a.__generator)(this,(function(_){switch(_.label){case 0:return n={access:e.access},c=(null===(r=t.rules.sharing)||void 0===r?void 0:r.requiredSharingLevel)?t.rules.sharing.requiredSharingLevel:{access:e.access},t.item.type!==d.jJ.MAP_LAYER||c.access!==o.eJ.PUBLIC||(l=f(e),u=b(e),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{var t=new URL(e);return t.origin+t.pathname.replace(/\/\d*$/,"")}catch(r){return e}}(e.url),!l&&!u||function(e,t){try{var r=t.rules.sharing.appProxy.existingAppProxy.proxies.filter((function(t){return e===t.sourceUrl})).length>0,i=t.rules.sharing.appProxy.serviceProxyParams.referrers.filter((function(e){return!t.rules.sharing.appProxy.existingAppProxy.referrers.includes(e)})).length>0;return r&&!i}catch(n){return!1}}(p,t))?(Z=g(c.access,e),[4,h({isNestedItem:!!t.isNestedItem,itemDetails:e,requiredSharingLevel:c,authManager:t.authManager})]):(m=!!(t.rules.sharing&&t.rules.sharing.appProxy&&t.rules.sharing.appProxy.isAppAdmin&&(t.rules.sharing.appProxy.isRegisteredApp||!t.rules.sharing.appProxy.isRegisteredApp&&t.rules.sharing.appProxy.registerAppParams&&t.rules.sharing.appProxy.registerAppParams.redirect_uris.length>0)),(v={hasIssue:!0,sharingLevel:n,issue:{type:"app-proxy-required",hasFix:m,severity:"error",isPremiumContent:l,isSubscriberContent:u}}).issue.hasFix&&(v.issue.fix={type:"app-proxy",sourceUrl:p}),[2,v]);case 1:return x=_.sent(),Z&&!x?[3,3]:[4,y({itemDetails:e,requiredSharingLevel:c,newRequiredGroups:x,authManager:t.authManager,storyMapUserPrivileges:t.storyMapUserPrivileges,allowSharingToUpdateGroups:null===(I=t.rules.sharing)||void 0===I?void 0:I.allowSharingToUpdateGroups})];case 2:return P=_.sent(),S={hasIssue:!0,sharingLevel:n,issue:{type:"sharing-access-level",severity:"error",requiredSharingLevel:c,currentSharingLevel:n,hasFix:P}},P&&(S.issue.fix=(0,i.Z)((function(){var r;return(0,a.__generator)(this,(function(i){switch(i.label){case 0:return r=[],Z||r.push((0,s.zT)({authentication:t.authManager,id:e.id,access:c.access===o.eJ.SHARED?o.eJ.PRIVATE:c.access,owner:e.owner})),!1!==x&&x.forEach((function(i){var n;r.push((0,s.Ju)({id:e.id,groupId:i,confirmItemControl:null===(n=t.rules.sharing)||void 0===n?void 0:n.allowSharingToUpdateGroups,authentication:t.authManager,owner:e.owner}))})),[4,Promise.all(r)];case 1:return[2,i.sent()]}}))}))),[2,S];case 3:return[2,{hasIssue:!1,sharingLevel:n}]}}))}));return function(t,r){return e.apply(this,arguments)}}(),Z=function(e){return e.typeKeywords&&e.typeKeywords.includes("Registered App")},x=function(e,t){return t.item.checkDraftData?(0,l.jH)({itemDetails:e,portalHost:t.portalHost,authManager:t.authManager}):(0,u.L)({id:t.item.itemId,authManager:t.authManager,portalHost:t.portalHost})}},29284:function(e,t,r){r.d(t,{$9:function(){return m},TJ:function(){return h},jH:function(){return g}});var i=r(98788),n=r(70865),a=r(96670),s=r(26297),o=r(45680),c=r(99698),l=r(58650),u=r(84117),d=r(81192),p=r(16202),m=function(e){return/^draft(?:_\d+)?.json$/.test(e)},h=function(e){return e.filter((function(e){return m(e.resource)})).sort((function(e,t){var r,i,n,a,s=new RegExp("".concat(d.AY,"(?<timestamp>[0-9]+).json"),"g"),o=new RegExp("".concat(d.AY,"(?<timestamp>[0-9]+).json"),"g"),c=null===(r=s.exec(e.resource))||void 0===r||null===(i=r.groups)||void 0===i?void 0:i.timestamp,l=null===(n=o.exec(t.resource))||void 0===n||null===(a=n.groups)||void 0===a?void 0:a.timestamp;return"undefined"===typeof c?1:"undefined"===typeof l?-1:Number(l)-Number(c)}))},g=function(){var e=(0,i.Z)((function(e){var t,r,i,m,g,y,f,b,v,Z,x,I,P,S;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:t=e.itemDetails,r=(0,s.Z)(e,["itemDetails"]),o.label=1;case 1:return o.trys.push([1,3,,17]),i=function(e){return(0,p.W$)({itemDetails:e,typekeywordId:d.W2})||"draft.json"}(t),[4,(0,l.Dn)((0,a.Z)((0,n.Z)({},r),{itemId:e.itemDetails.id,resourceId:i}))];case 2:return[2,o.sent()];case 3:return m=o.sent(),(0,p.$Y)(t)?[4,(0,c.m_)(e.itemDetails.id,{authentication:e.authManager})]:[3,5];case 4:return g=o.sent(),[2,(0,a.Z)((0,n.Z)({},g),{title:t.title,snippet:t.snippet})];case 5:return[4,(0,l.vb)({authManager:e.authManager,username:e.itemDetails.owner,itemId:e.itemDetails.id,portal:(0,u.Zl)(e.portalHost,e.authManager)})];case 6:y=o.sent(),f=h(y),b=!0,v=!1,Z=void 0,o.label=7;case 7:o.trys.push([7,14,15,16]),x=f[Symbol.iterator](),o.label=8;case 8:if(b=(I=x.next()).done)return[3,13];P=I.value,o.label=9;case 9:return o.trys.push([9,11,,12]),[4,(0,l.Dn)((0,a.Z)((0,n.Z)({},r),{itemId:e.itemDetails.id,resourceId:P.resource}))];case 10:return[2,o.sent()];case 11:return o.sent(),[3,12];case 12:return b=!0,[3,8];case 13:return[3,16];case 14:return S=o.sent(),v=!0,Z=S,[3,16];case 15:try{b||null==x.return||x.return()}finally{if(v)throw Z}return[7];case 16:throw m;case 17:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()},99459:function(e,t,r){r.d(t,{$J:function(){return p},_H:function(){return d},x7:function(){return u}});var i=r(98788),n=r(45680),a=r(98537),s=r.n(a),o=r(58650),c=r(84117),l=r(29284),u=function(e){var t=e.currentProps,r=e.newProps;return s()({},t,r)},d="DRAFT_DATA_RESOURCE",p=function(){var e=(0,i.Z)((function(e){var t,r,i,a,s,u,p;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:return t=e.resourceName,r=e.itemId,i=e.itemOwner,a=e.authManager,s=e.portalHost,[4,(0,o.vb)({authManager:a,username:i,itemId:r,portal:(0,c.Zl)(s,a)})];case 1:return u=n.sent(),(null===(p=t===d?(0,l.TJ)(u)[0]:u.filter((function(e){return e.resource===t}))[0])||void 0===p?void 0:p.properties)?[2,JSON.parse(null===p||void 0===p?void 0:p.properties)||null]:[2,null]}}))}));return function(t){return e.apply(this,arguments)}}()},19601:function(e,t,r){r.d(t,{L:function(){return l},f:function(){return c}});var i=r(98788),n=r(45680),a=r(99698),s=r(84117),o=r(58650),c="published_data.json",l=function(){var e=(0,i.Z)((function(e){var t,r,i,l,u;return(0,n.__generator)(this,(function(n){switch(n.label){case 0:t=e.id,r=e.authManager,i=e.portalHost,l=e.language,u=r?void 0:(0,s.Zl)(i),n.label=1;case 1:return n.trys.push([1,3,,5]),[4,(0,o.Dn)({itemId:t,resourceId:l?"published_data_".concat(l,".json"):c,portalHost:i,authManager:r})];case 2:return[2,n.sent()];case 3:return n.sent(),[4,(0,a.m_)(t,{authentication:r,portal:u})];case 4:return[2,n.sent()];case 5:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()}}]);