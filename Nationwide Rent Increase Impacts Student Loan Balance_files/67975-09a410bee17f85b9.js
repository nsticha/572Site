"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[67975],{16924:function(t,n,r){r.d(n,{Z:function(){return u}});var e=r(90581),i=r(21218),o=r(96397),a=r(39309),c=r(70490),u=function(t){(0,i.Z)(r,t);var n=(0,a.Z)(r);function r(t){var i;(0,e.Z)(this,r),(i=n.call(this)).name="StoryBuilderError";var o=t.type,a=t.itemType;i.type=i.message=o,i.itemType=a;var u=(0,c.P)(i.type).statusCode;return i.statusCode=u,i}return r}((0,o.Z)(Error))},70490:function(t,n,r){r.d(n,{P:function(){return u},v:function(){return s}});var e=r(52322),i=r(42670),o=r(14979),a=r(27480),c=r(37873),u=function(t){var n,r="unknown";switch(t){case"story-privileges-create":case"story-privileges-edit":case"story-privileges-preview":case"theme-public-account":case"story-inaccessible":case"unsupported-account":case"sign-in":case"blocked-org":r=t,n=403;break;case"story-not-found":r=t,n=404;break;case"story-load":case"org-settings-load":r=t,n=500;break;default:r="unknown",n=500}return{errorType:r,statusCode:n}},s=function(t,n){return{"unsupported-account":{title:(0,e.jsx)(i.Z,{id:"page.error.unsupportedTitle"}),description:(0,e.jsx)(i.Z,{id:"page.error.".concat(n,".unknownDescription")})},"sign-in":{description:(0,e.jsx)(i.Z,{id:"page.error.signInDescription"})},"story-inaccessible":{description:(0,e.jsx)(i.Z,{id:"page.error.".concat(n,".InaccessibleDescription")})},"story-not-found":{description:(0,e.jsx)(i.Z,{id:"page.error.".concat(n,".InaccessibleDescription")})},"story-privileges-create":{description:(0,e.jsx)(i.Z,{id:"page.error.".concat(n,".PrivilegesCreateDescription")})},"story-privileges-edit":{description:(0,e.jsx)(i.Z,{id:"page.error.".concat(n,".PrivilegesEditDescription")})},"story-privileges-preview":{description:(0,e.jsx)(i.Z,{id:"page.error.".concat(n,".PrivilegesPreviewDescription")})},"story-load":{description:(0,e.jsx)(i.Z,{id:"page.error.".concat(n,".LoadDescription")})},"org-settings-load":{description:(0,e.jsx)(i.Z,{id:"page.error.orgSettings.loadDescription"})},"theme-public-account":{title:(0,e.jsx)(i.Z,{id:"page.error.unknownTitle"}),description:(0,e.jsx)(i.Z,{id:"publicAccount.disabled.link",values:{"product-doc":function(t){return(0,e.jsx)("a",{href:"https://storymaps.arcgis.com/redirect/pricing",children:t})}}})},"blocked-org":{icon:(0,e.jsx)(a.Z,{path:o.ZGJ,size:32,sizeMultiplier:3,color:c.Z.color.emeraldGreen}),description:(0,e.jsx)(i.Z,{id:"page.error.noAccess"}),link:{href:"https://".concat(t),isExternal:!0,text:(0,e.jsx)(i.Z,{id:"page.error.arcgisHome"})}},"distributed-collab-no-draft":{description:(0,e.jsx)(i.Z,{id:"page.error.".concat(n,".unknownDescription")})},unknown:{description:(0,e.jsx)(i.Z,{id:"page.error.".concat(n,".unknownDescription")})}}}},92924:function(t,n,r){r.d(n,{$:function(){return e}});var e=function(t,n){try{var r=[window.location.hostname,"arcgis.com"],e=r?[n].concat(r):[n],i=!0,o=!1,a=void 0;try{for(var c,u=e[Symbol.iterator]();!(i=(c=u.next()).done);i=!0){var s=c.value,l=new URL(t).hostname;if(new RegExp(s).test(l))return!0}}catch(d){o=!0,a=d}finally{try{i||null==u.return||u.return()}finally{if(o)throw a}}return!1}catch(p){throw new Error("Only available in browser environments with new URL()")}}},1371:function(t,n,r){r.d(n,{g:function(){return o},n:function(){return i}});var e=r(17236),i=function(t){var n=t.width,r=t.fileName,i=t.shouldIgnoreDPR;if(/\.(svg|gif)$/i.test(null!==r&&void 0!==r?r:""))return 0;var o=n*(i?1:(0,e.D7)()),a=!0,c=!1,u=void 0;try{for(var s,l=[20,50,100,200,400,600,800,1200,1600,2e3,2400][Symbol.iterator]();!(a=(s=l.next()).done);a=!0){var d=s.value;if(o<=d||1/(o/d)>.8)return d}}catch(p){c=!0,u=p}finally{try{a||null==l.return||l.return()}finally{if(c)throw u}}return Math.round(o)},o=function(t){var n=t.basePortalUrl,r=t.userName,e=t.thumbnail,o=t.token,a=t.timestamp,c=t.imageWidth;if(!n||!r||!e)return"";var u="".concat(n,"/community/users/").concat(r,"/info/").concat(e),s=[];if(o&&s.push("token=".concat(o)),a&&s.push("ts=".concat(a)),c){var l=i({width:c,fileName:e});l&&s.push("w=".concat(l))}return s.length?"".concat(u,"?").concat(s.join("&")):u}},58650:function(t,n,r){r.d(n,{Dn:function(){return y},E8:function(){return x},HX:function(){return b},LZ:function(){return h},NJ:function(){return k},Sg:function(){return I},WQ:function(){return g},ZX:function(){return Z},mY:function(){return w},pz:function(){return D},rj:function(){return v},vb:function(){return m}});var e=r(98788),i=r(50930),o=r(45680),a=r(99698),c=r(8859),u=r(81192),s=r(31274),l=r(57996),d=r(16202),p=r(56038),f=r(84117),h=function(){var t=(0,e.Z)((function(t){var n,r,e,i,c;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n=t.authManager,r=t.isFavorite,e=t.itemId,i=t.owner,[4,n.getUser()];case 1:return c=o.sent(),r?[4,(0,a.Ju)({id:e,groupId:c.favGroupId,authentication:n,owner:i})]:[3,3];case 2:return[2,o.sent()];case 3:return[4,(0,a.lF)({id:e,groupId:c.favGroupId,authentication:n,owner:i})];case 4:return[2,o.sent()]}}))}));return function(n){return t.apply(this,arguments)}}(),v=function(t,n){return"published"===n?"".concat(u.wC).concat(t):"".concat(u.AY).concat(t)},g=function(){var t=(0,e.Z)((function(t,n,r){var e,i,c,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return n?[4,n.getUser()]:[2,!1];case 1:return(e=o.sent()).favGroupId?[4,(0,a.Ye)(e.favGroupId,{authentication:n,paging:{num:100,start:"number"===typeof r?r:1}})]:[2,!1];case 2:return i=o.sent(),c=i.items,u=i.nextStart,-1!==c.findIndex((function(n){return n.id===t}))?[2,!0]:-1!==u?[2,g(t,n,u)]:[2,!1]}}))}));return function(n,r,e){return t.apply(this,arguments)}}(),m=function(){var t=(0,e.Z)((function(t){var n,r,e,c,u;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,(0,a.C)(t.itemId,{authentication:t.authManager,portal:t.portal,params:{owner:t.username}})];case 1:return n=o.sent(),r=n.total,e=n.num,c=n.resources,r>e?[4,Promise.all(new Array(Math.ceil(r/e)).fill(void 0).reduce((function(n,r,o){return(0,i.Z)(n).concat([(0,a.C)(t.itemId,{authentication:t.authManager,portal:t.portal,params:{owner:t.username,start:o*e+1}})])}),[]))]:[3,3];case 2:return u=o.sent(),[2,u.reduce((function(t,n){return(0,i.Z)(t).concat((0,i.Z)(n.resources))}),[])];case 3:return[2,c]}}))}));return function(n){return t.apply(this,arguments)}}(),y=function(t){var n="".concat((0,f.Zl)(t.portalHost,t.authManager),"/content/items/").concat(t.itemId,"/resources/").concat(t.resourceId);return(0,c.WY)(n,{authentication:t.authManager})},w=function(){var t=(0,e.Z)((function(t){var n,r,e,c,u,s,l,d,p,f;return(0,o.__generator)(this,(function(o){switch(o.label){case 0:return[4,(0,a.tX)(t.itemDetails.id,{authentication:t.authManager})];case 1:return c=o.sent(),u=(null===(n=c.admin)||void 0===n?void 0:n.map((function(t){return t.id})))||[],s=(null===(r=c.member)||void 0===r?void 0:r.map((function(t){return t.id})))||[],l=(null===(e=c.other)||void 0===e?void 0:e.map((function(t){return t.id})))||[],d=(0,i.Z)(u).concat((0,i.Z)(s),(0,i.Z)(l)),t.excludeFavoritesGroup?[4,t.authManager.getUser()]:[3,3];case 2:return p=o.sent(),f=p.favGroupId,[2,d.filter((function(t){return t!==f}))];case 3:return[2,d]}}))}));return function(n){return t.apply(this,arguments)}}(),Z=function(t){return t.typeKeywords&&t.typeKeywords.includes("Copy Item")},b=function(t){return t===p.d.Image||t===p.d.PDF},k=function(t,n,r){return b(t.type)&&t.access!==s.eJ.PUBLIC&&(null===r||void 0===r?void 0:r.token)?"".concat(n,"?token=").concat(r.token):n},I=function(t){var n,r=t.portalHost,e=t.itemDetails,i=t.fallbackUrl,o=t.authManager,a=t.size,c=t.isGroup,f=t.returnOriginalAspectRatio,h=t.shouldIgnoreDPR,v=e.modified&&Math.abs(new Date(e.modified).getTime()-Date.now())<36e5?"&d=".concat(e.modified):"",g=(0,d.GT)(e);if(e.id&&(e.thumbnail||(null===g||void 0===g||null===(n=g.thumbnail)||void 0===n?void 0:n[0]))){if(/^https:\/\//.test(e.thumbnail))return e.thumbnail;if(e.type===u.Cs){var m,y;if("default"===(null===g||void 0===g||null===(m=g.thumbnail)||void 0===m?void 0:m[0]))return i;if((a||f)&&"url"===(null===g||void 0===g||null===(y=g.thumbnail)||void 0===y?void 0:y[0]))return(0,l.aU)(g.thumbnail[1],{width:null!==a&&void 0!==a?a:400,authManager:o,shouldIgnoreDPR:h,portalHost:r,publicItemIdForCDN:e.access===s.eJ.PUBLIC&&e.id?e.id:void 0})}return"https://".concat(r,"/sharing/rest/").concat(c?"community/groups":"content/items","/").concat(e.id,"/info/").concat(e.thumbnail,"/?w=").concat(800).concat((null===o||void 0===o?void 0:o.token)?"&token=".concat(o.token):"").concat(v)}return e.type===p.d.Image?"https://".concat(r,"/sharing/rest/content/items/").concat(e.id,"/data").concat((null===o||void 0===o?void 0:o.token)?"?token=".concat(o.token):""):i},D=function(t,n,r){var e=(0,f.$E)(n,r);return"".concat(e,"/home/item.html?id=").concat(t)},x=function(t,n){try{var r=new URL(t);if(!function(t){return/ago-items?-/.test(t.host)&&t.host.endsWith(".amazonaws.com")&&t.searchParams.has("X-Amz-Security-Token")&&t.searchParams.has("X-Amz-Credential")}(r))return;var e=(0,f.Zl)(n),i=r.pathname.match(/^\/([A-Za-z0-9]{32})\//),o=i&&i[1];if(o)return"".concat(e,"/content/items/").concat(o,"/data")}catch(a){return}}},57996:function(t,n,r){r.d(n,{Jt:function(){return l},aU:function(){return d}});var e=r(47842),i=r(92924),o=r(1371),a=r(84117),c=r(17236),u=r(83708),s={width:"w",widthWithArcGISBreakPoints:"wago",authManagerToken:"ust",sharingUrl:"https://su.example"},l=function(t){var n=function(t){return"{{".concat(t,"}}")};if("simple"===t.template)return"sharingUrl"===t.replacer?s.sharingUrl:n(s[t.replacer]);if("queryParam"===t.template){var r=t.replacers.reduce((function(t,n){return"width"===n.replacer?t.concat([[s[n.replacer],n.queryParam]]):s[n.replacer]?t.concat([[s[n.replacer]]]):t}),[]);return n("".concat("qp","|").concat(JSON.stringify(r)))}return""},d=function(t,n){var r,l=!1,d=n.width?n.width*(n.shouldIgnoreDPR?1:(0,c.D7)()):void 0,p=t.replace(new RegExp("{{".concat(s.width,"}}")),String(null!==(r=null!==d&&void 0!==d?d:window.innerWidth)&&void 0!==r?r:2e3)).replace(new RegExp("^".concat(s.sharingUrl)),(0,a.Zl)(n.portalHost));n.publicItemIdForCDN&&new RegExp("^".concat((0,a.Zl)("www.arcgis.com"),"/content/items/").concat(n.publicItemIdForCDN,"/resources/\\S")).test(p)&&(l=!0,p=p.replace(/^https:\/\/www/,"https://cdn"));var f=[];return p=p.replace(new RegExp("{{".concat("qp","\\|").concat("([^;]*)","}}")),(function(t,n){try{f=JSON.parse(n)}catch(r){}return""})),p=f.reduce((function(t,r){var a,c=r[0];if(c===s.width&&d){var p=r[1];return(0,u.Cn)(t,(0,e.Z)({},p,String(d)))}if(c===s.widthWithArcGISBreakPoints&&d){var f=(0,o.n)({width:d,shouldIgnoreDPR:!0});return(0,u.Cn)(t,{w:String(f)})}return!l&&c===s.authManagerToken&&(null===(a=n.authManager)||void 0===a?void 0:a.token)&&(0,i.$)(t,n.portalHost)?(0,u.Cn)(t,{token:n.authManager.token}):t}),p),p}},16202:function(t,n,r){r.d(n,{$Y:function(){return p},GT:function(){return f},MM:function(){return h},TQ:function(){return l},W$:function(){return s},bk:function(){return v},jT:function(){return d}});var e=r(70865),i=r(96670),o=r(50930),a=r(98537),c=r.n(a),u=r(81192),s=function(t){var n="".concat(t.typekeywordId,":");return t.itemDetails.typeKeywords&&t.itemDetails.typeKeywords.reduce((function(t,r){return 0===r.search(n)?r.replace(n,""):t}),void 0)||void 0},l=function(t){var n,r,o="".concat(t.typekeywordId,":"),a=null!==(r=null===(n=t.itemDetails.typeKeywords)||void 0===n?void 0:n.filter((function(t){return 0!==t.search(o)})))&&void 0!==r?r:[];return(0,i.Z)((0,e.Z)({},t.itemDetails),{typeKeywords:a})},d=function(t){var n,r="".concat(t.typekeywordId,":"),a=(null!==(n=(0,e.Z)({},t.itemDetails).typeKeywords)&&void 0!==n?n:[]).filter((function(t){return 0!==t.search(r)}));return(0,i.Z)((0,e.Z)({},t.itemDetails),{typeKeywords:(0,o.Z)(a).concat(["".concat(r).concat(t.data)])})},p=function(t){return t.typeKeywords&&t.typeKeywords.includes("storymapcollection")&&0===t.typeKeywords.filter((function(t){return/smversiondraft/.test(t)})).length},f=function(t){try{var n="string"===typeof t.properties?JSON.parse(t.properties):t.properties;return null!==n&&void 0!==n?n:void 0}catch(r){return}},h=function(t,n){if("replace"===n)return JSON.stringify(t);var r,e=null!==(r=f(n))&&void 0!==r?r:{},i=c()({},e,t);return JSON.stringify(i)},v=function(t){return"undefined"!==typeof s({itemDetails:t,typekeywordId:u.sO})}}}]);