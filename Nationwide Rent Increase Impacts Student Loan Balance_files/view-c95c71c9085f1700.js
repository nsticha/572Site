(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[98434],{7335:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/stories/view",function(){return r(26996)}])},26996:function(e,t,r){"use strict";r.r(t);var i=r(98788),n=r(90581),o=r(21218),a=r(70865),s=r(96670),u=r(39309),d=r(45680),l=r(52322),p=r(2784),c=r(79792),f=r(60120),h=r(23796),v=r(49055),m=r(20174),y=r(3593),w=r(16924),g=r(37417),Z=r(11337),I=r(82639),_=r(23177),b=r(47208),S=r(84190),P=r(9641),E=r(942),M=function(e){(0,o.Z)(r,e);var t=(0,u.Z)(r);function r(e){var i;(0,n.Z)(this,r),(i=t.call(this,e)).storyItem=new c.ZP({type:f.o.Story,authManager:i.props.authManager,version:"published",getStoryMapUserPrivileges:function(){return i.props.storyMapUserPrivileges},viewerMode:"view",config:i.props.config}),i.initialThemeItemInfo=void 0,i.getShouldShowHeader=function(){var e,t,r;return!i.storyItem.isOrgItem||!(i.props.isEmbedded&&"true"!==(null===(e=i.props.query)||void 0===e?void 0:e.header)&&""!==(null===(t=i.props.query)||void 0===t?void 0:t.header)||"false"===(null===(r=i.props.query)||void 0===r?void 0:r.header))};var o=!(0,Z.e)();return o&&(i.storyItem.itemId=e.id,i.storyItem.itemDetails=e.itemDetails,i.storyItem.itemData=e.publishedData),i.state={isReady:o,shouldShowViewerHeader:i.getShouldShowHeader()},i}var p=r.prototype;return p.componentDidMount=function(){var e=this;return(0,i.Z)((function(){var t,r,i,n,o,a,s,u;return(0,d.__generator)(this,(function(d){switch(d.label){case 0:return d.trys.push([0,4,,5]),(0,h.Mq)(e.props.locale),e.state.isReady?[3,3]:[4,(0,_.A)({id:null===(t=e.props.query)||void 0===t?void 0:t.id,config:e.props.config,signInUrl:e.props.signInUrl,authManager:e.props.authManager,itemType:f.o.Story})];case 1:return(null===(r=d.sent())||void 0===r?void 0:r.id)?(i=r.id,n=r.itemDetails,o=r.publishedData,a=r.pageLocale,s=r.initialThemeItemInfo,e.storyItem.itemId=i,e.storyItem.itemDetails=n,e.storyItem.itemData=o,e.initialThemeItemInfo=s,[4,e.props.setLocaleFromPage({pageLocale:a})]):[2];case 2:d.sent(),e.setState({isReady:!0,shouldShowViewerHeader:e.getShouldShowHeader()}),d.label=3;case 3:return[3,5];case 4:return u=d.sent(),e.setState((function(){throw u})),[3,5];case 5:return[2]}}))}))()},p.render=function(){var e,t,r,i;return this.state.isReady?(0,l.jsxs)(g.H,{areLabFeaturesEnabled:this.props.config.ENABLE_LAB_FEATURES&&"true"===(null===(e=this.props.query)||void 0===e?void 0:e.areLabFeaturesEnabled),children:[(0,l.jsx)(m.c,{children:(0,l.jsx)(y.Z,(0,s.Z)((0,a.Z)({},this.props),{itemType:f.o.Story,query:this.props.query,signInUrl:this.props.signInUrl,storyItem:this.storyItem,initialThemeItemInfo:null!==(i=this.props.initialThemeItemInfo)&&void 0!==i?i:this.initialThemeItemInfo,mode:"view",shouldShowViewerHeader:this.state.shouldShowViewerHeader,canShowEditButtonNudge:!0,printMode:null===(t=this.props.query)||void 0===t?void 0:t.printMode,redirectOnLoadError:b.q,avatar:(0,l.jsx)(P.Z,{}),appLogo:(0,l.jsx)(E.Z,{link:this.props.config.OVERVIEW_URL}),canJumpToLinkedBlock:!0}))}),(0,l.jsx)(S.Z,{itemId:this.storyItem.itemId,itemMode:"published",allowPrint:!!(null===(r=this.props.query)||void 0===r?void 0:r.printMode)})]}):(0,l.jsx)(v.Z,{})},r.getInitialProps=function(e,t){return(0,i.Z)((function(){var r,i,n,o;return(0,d.__generator)(this,(function(a){if(r=e.query.id,i=t.authManager,n=t.config,o=t.signInUrl,"string"!==typeof r||!(0,I.J)(r))throw new w.Z({type:"story-inaccessible",itemType:f.o.Story});return[2,(0,_.A)({ctx:e,id:r,config:n,authManager:i,signInUrl:o,itemType:f.o.Story})]}))}))()},r}(p.Component);M.requiresAuthentication=!1,M.hasPageSpecificLocale=!0,t.default=M},20174:function(e,t,r){"use strict";r.d(t,{c:function(){return p}});var i=r(90581),n=r(21218),o=r(70865),a=r(96670),s=r(39309),u=r(52322),d=r(2784),l=r(18558),p=function(e){(0,n.Z)(r,e);var t=(0,s.Z)(r);function r(e){var n;return(0,i.Z)(this,r),(n=t.call(this,e)).updateStoryOffsetContext=function(e,t){t?n.setState((0,a.Z)((0,o.Z)({},e),{updateStoryOffsetContext:n.updateStoryOffsetContext})):n.setState((function(t){return(0,a.Z)((0,o.Z)({},t,e),{updateStoryOffsetContext:n.updateStoryOffsetContext})}))},n.state={updateStoryOffsetContext:n.updateStoryOffsetContext,storyOffset:{navBarHeight:"0rem"}},n}return r.prototype.render=function(){return(0,u.jsx)(l.B.Provider,{value:this.state,children:this.props.children})},r}(d.PureComponent)},37417:function(e,t,r){"use strict";r.d(t,{H:function(){return a},J:function(){return s}});var i=r(70865),n=r(52322),o=(0,r(2784).createContext)({areLabFeaturesEnabled:!1}),a=function(e){var t=e.children,r=e.areLabFeaturesEnabled;return(0,n.jsx)(o.Provider,{value:{areLabFeaturesEnabled:r},children:t})},s=function(e){return function(t){return(0,n.jsx)(o.Consumer,{children:function(r){return(0,n.jsx)(e,(0,i.Z)({},t,r))}})}}},84190:function(e,t,r){"use strict";var i=r(52322),n=r(2784),o=r(34084),a=r(9518),s=r(42841),u=function(){s.Z.trackEvent(s.Z.Category.Viewer,s.Z.Action.Viewer_Print)},d=(0,n.memo)((function(e){var t=(0,o.Gr)(),r=t.routeTo,d=t.getUrlFromRouteDef,l=(0,n.useCallback)((function(t){if(e.allowPrint)u();else{null===t||void 0===t||t.preventDefault(),t&&s.Z.trackEvent({draft:s.Z.Category.Builder,published:s.Z.Category.Builder,preview:s.Z.Category.Builder}[e.itemMode],{draft:s.Z.Action.Builder_Print_Preview,published:s.Z.Action.Builder_Print_Preview,preview:s.Z.Action.Builder_Print_Preview}[e.itemMode],s.Z.Name.From_Keyboard);var i={route:{draft:"story-draft-print",published:"story-published-print",preview:"story-preview-print"}[e.itemMode],itemId:e.itemId};switch(e.itemMode){case"draft":return void r({method:"push",routeDef:i});case"published":case"preview":return void(window.location.href=d(i));default:throw new Error("invalid item mode")}}}),[r,d,e.itemId,e.allowPrint,e.itemMode]),p=(0,n.useCallback)((function(){e.allowPrint?u():(s.Z.trackEvent({draft:s.Z.Category.Builder,published:s.Z.Category.Viewer,preview:s.Z.Category.Viewer}[e.itemMode],{draft:s.Z.Action.Builder_Print_Preview,published:s.Z.Action.Viewer_Print_Preview,preview:s.Z.Action.Viewer_Print_Preview}[e.itemMode],s.Z.Name.From_Browser_Menu),l())}),[l,e.allowPrint,e.itemMode]);return(0,n.useEffect)((function(){return window.addEventListener("beforeprint",p),function(){window.removeEventListener("beforeprint",p)}}),[p]),(0,i.jsx)(a.Z,{triggerKey:"p",isCtrl:!0,isMeta:!0,on:l})}));t.Z=d}},function(e){e.O(0,[47174,87417,68619,80619,41020,67975,52297,76279,77808,32086,70820,8572,90873,49774,92888,40179],(function(){return t=7335,e(e.s=t);var t}));var t=e.O();_N_E=t}]);