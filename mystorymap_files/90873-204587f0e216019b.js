"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[90873],{942:function(e,t,o){var n=o(90581),i=o(21218),a=o(70865),s=o(39309),r=o(52322),c=o(2784),p=o(89274),l=o(27657),d=o(37873),u=o(99939),m=o(75514),h=function(e){(0,i.Z)(o,e);var t=(0,s.Z)(o);function o(){return(0,n.Z)(this,o),t.apply(this,arguments)}return o.prototype.render=function(){var e=!0;this.props.linked&&this.props.config&&(e=this.props.isExternal||this.props.link===this.props.config.OVERVIEW_URL);var t=(0,r.jsx)(l.Z,(0,a.Z)({size:this.props.size,type:this.props.type},this.props.linked&&{alt:this.props.intl.formatMessage({id:"common.myStories"})}));return this.props.linked?(0,r.jsx)(m.Z,{href:this.props.link||"",as:this.props.linkAs,prefetch:this.props.prefetch,isExternal:e,children:(0,r.jsx)("a",{children:t})}):t},o}(c.PureComponent);h.defaultProps={linked:!0,size:d.Z.spacing.sm,type:"full"},t.Z=(0,u.Df)((0,p.ZP)(h))},9534:function(e,t,o){o.d(t,{h:function(){return h}});var n=o(70865),i=o(96670),a=o(52322),s=o(19702),r=o.n(s),c=(o(2784),o(72779)),p=o.n(c),l=o(42864),d=o(61355),u=o(75848),m=o(27480),h=function(e){var t=(0,l.z$)(),o=e.trackingEventData?t.getDataAttributes(e.trackingEventData):{},s={styles:(0,a.jsx)(r(),{id:"fdb33912e95ade24",children:".media-toolbar-button.flipped.jsx-fdb33912e95ade24{-webkit-transform:scale(-1,1);-moz-transform:scale(-1,1);-ms-transform:scale(-1,1);-o-transform:scale(-1,1);transform:scale(-1,1)}"}),className:"jsx-fdb33912e95ade24"};return(0,a.jsx)(d.Z,{tooltipContent:e.tooltipContent,children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(u.ZP,(0,i.Z)((0,n.Z)({type:"single-icon",id:e.buttonId,onClick:e.onClick,className:p()("media-toolbar-button",s.className,{flipped:e.shouldFlip}),disabled:e.isDisabled,ariaLabel:e.tooltipContent},o),{isPressed:e.isActive&&!e.isDisabled,children:(0,a.jsx)(m.Z,(0,i.Z)((0,n.Z)({},e.iconProps),{size:16,shouldFlipRTL:e.rtlIcon}))})),s.styles]})},e.buttonId)};t.Z=h},97728:function(e,t,o){var n=o(98788),i=o(45680),a=o(52322),s=o(19702),r=o.n(s),c=o(2784),p=o(72779),l=o.n(p),d=o(71216),u=(0,c.memo)((function(e){var t=e.isShowing,o=e.toggleStoryOverlay,s=e.isInvisible,p=(0,d.XL)().backgroundColor,u=(0,c.useState)(t),m=u[0],h=u[1];(0,c.useEffect)((function(){t&&h(!0)}),[t]);var g=function(){var e=(0,n.Z)((function(){return(0,i.__generator)(this,(function(e){switch(e.label){case 0:return o?(window.scrollTo(0,0),[4,o(!1)]):[3,2];case 1:e.sent(),t||h(!1),e.label=2;case 2:return[2]}}))}));return function(){return e.apply(this,arguments)}}();return(0,a.jsxs)(a.Fragment,{children:[m&&(0,a.jsx)("div",{onAnimationEnd:g,className:r().dynamic([["95a0d98d906354a1",[p,s?0:1]]])+" "+(l()("story-overlay",{"fade-in":!s&&t,"fade-out":!s&&!t})||"")}),(0,a.jsx)(r(),{id:"95a0d98d906354a1",dynamic:[p,s?0:1],children:".story-overlay.__jsx-style-dynamic-selector{background-color:".concat(p,";position:fixed;width:100%;height:100%;top:0;left:0;right:0;bottom:0;z-index:2;opacity:").concat(s?0:1,";pointer-events:none}.fade-in.__jsx-style-dynamic-selector{-webkit-animation:fadeIn 250ms ease-in;-moz-animation:fadeIn 250ms ease-in;-o-animation:fadeIn 250ms ease-in;animation:fadeIn 250ms ease-in}@-webkit-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-moz-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@-o-keyframes fadeIn{0%{opacity:0}100%{opacity:1}}@keyframes fadeIn{0%{opacity:0}100%{opacity:1}}.fade-out.__jsx-style-dynamic-selector{-webkit-animation:fadeOut 250ms ease-out;-moz-animation:fadeOut 250ms ease-out;-o-animation:fadeOut 250ms ease-out;animation:fadeOut 250ms ease-out}@-webkit-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@-moz-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@-o-keyframes fadeOut{0%{opacity:1}100%{opacity:0}}@keyframes fadeOut{0%{opacity:1}100%{opacity:0}}")})]})}));t.Z=u},99197:function(e,t,o){o.d(t,{AD:function(){return g},An:function(){return p},Cd:function(){return a},Cx:function(){return n},Kj:function(){return c},O4:function(){return d},XR:function(){return u},fS:function(){return l},jf:function(){return i},l:function(){return m},li:function(){return r},oc:function(){return h},qi:function(){return y},sk:function(){return s}});var n="item-end-reached",i="stop-scrolling-item",a="autoplay-next-item",s="toggle-item-autoplay",r="toggle-item-speed",c="reset-item",p="iframe-ready-for-communication",l="enable-item-autoplay",d="disable-item-autoplay",u="update-parent-pause",m="active-item-iframe",h=1500,g=1e3,y={slow:{displaySpeed:"1/2x",pageScrollDelay:40,collectionAutoplayDuration:12e4},medium:{displaySpeed:"1x",pageScrollDelay:20,collectionAutoplayDuration:6e4},fast:{displaySpeed:"2x",pageScrollDelay:10,collectionAutoplayDuration:3e4}}},3593:function(e,t,o){o.d(t,{Z:function(){return ze}});var n=o(13706),i=o(98788),a=o(90581),s=o(47842),r=o(21218),c=o(70865),p=o(96670),l=o(39309),d=o(45680),u=o(52322),m=o(19702),h=o.n(m),g=o(2784),y=o(42670),f=o(89274),x=o(97729),v=o.n(x),w=o(71719),b=o(39010),Z=o(37873),S=o(22045),I=o(70121),k=o(79295),T=o(60508),j=o(42841),P=o(99939),_=o(43438),C=o(13156),D=o(14979),A=o(45345),M=o(57087),L=o(27480),E=o(2305),O=function(e){var t=(0,E.Z)(),o=(0,b.Fj)().theme,n=(0,T.uw)();return(0,u.jsxs)("div",{className:h().dynamic([["c528a5e00b3117f6",[Z.Z.spacing.sm,A.ZP.shadow.sm(),A.ZP.overflowWrap(),Z.Z.spacing.xxs,Z.Z.spacing.xxs,Z.Z.spacing.xxs,Z.Z.color.white,Z.Z.spacing.xs,Z.Z.spacing.xxs,A.ZP.typography.subtitleSmall(),Z.Z.color.darkGreen,Z.Z.spacing.xxxs,Z.Z.spacing.xs,Z.Z.spacing.md,A.ZP.typography.bodySmall(),Z.Z.color.cadet,Z.Z.spacing.xs,Z.Z.spacing.xs,Z.Z.spacing.xxs,o.colors.labelLink,A.ZP.typography.bodyLarge(),Z.Z.spacing.xxxxs,Z.Z.spacing.xxxxs,Z.Z.spacing.xxxs,S.K.RTL,Z.Z.spacing.xxxxs,Z.Z.responsiveBreakpoints.large,Z.Z.responsiveBreakpoints.extraLarge]]])+" container",children:[(0,u.jsx)("h3",{className:h().dynamic([["c528a5e00b3117f6",[Z.Z.spacing.sm,A.ZP.shadow.sm(),A.ZP.overflowWrap(),Z.Z.spacing.xxs,Z.Z.spacing.xxs,Z.Z.spacing.xxs,Z.Z.color.white,Z.Z.spacing.xs,Z.Z.spacing.xxs,A.ZP.typography.subtitleSmall(),Z.Z.color.darkGreen,Z.Z.spacing.xxxs,Z.Z.spacing.xs,Z.Z.spacing.md,A.ZP.typography.bodySmall(),Z.Z.color.cadet,Z.Z.spacing.xs,Z.Z.spacing.xs,Z.Z.spacing.xxs,o.colors.labelLink,A.ZP.typography.bodyLarge(),Z.Z.spacing.xxxxs,Z.Z.spacing.xxxxs,Z.Z.spacing.xxxs,S.K.RTL,Z.Z.spacing.xxxxs,Z.Z.responsiveBreakpoints.large,Z.Z.responsiveBreakpoints.extraLarge]]])+" title",children:t("component.builderHeader.storySettings.analytics.message.title")}),(0,u.jsx)("div",{dangerouslySetInnerHTML:{__html:e.message},className:h().dynamic([["c528a5e00b3117f6",[Z.Z.spacing.sm,A.ZP.shadow.sm(),A.ZP.overflowWrap(),Z.Z.spacing.xxs,Z.Z.spacing.xxs,Z.Z.spacing.xxs,Z.Z.color.white,Z.Z.spacing.xs,Z.Z.spacing.xxs,A.ZP.typography.subtitleSmall(),Z.Z.color.darkGreen,Z.Z.spacing.xxxs,Z.Z.spacing.xs,Z.Z.spacing.md,A.ZP.typography.bodySmall(),Z.Z.color.cadet,Z.Z.spacing.xs,Z.Z.spacing.xs,Z.Z.spacing.xxs,o.colors.labelLink,A.ZP.typography.bodyLarge(),Z.Z.spacing.xxxxs,Z.Z.spacing.xxxxs,Z.Z.spacing.xxxs,S.K.RTL,Z.Z.spacing.xxxxs,Z.Z.responsiveBreakpoints.large,Z.Z.responsiveBreakpoints.extraLarge]]])+" message-container"}),(0,u.jsx)(M.Z,{primaryButtonTitle:t("component.builderHeader.storySettings.analytics.message.button.allow"),onPrimaryButtonClick:e.onAllowClicked,orientation:n.isViewportMinWidth("medium")?"horizontal":"vertical",startContent:(0,u.jsx)("h4",{className:h().dynamic([["c528a5e00b3117f6",[Z.Z.spacing.sm,A.ZP.shadow.sm(),A.ZP.overflowWrap(),Z.Z.spacing.xxs,Z.Z.spacing.xxs,Z.Z.spacing.xxs,Z.Z.color.white,Z.Z.spacing.xs,Z.Z.spacing.xxs,A.ZP.typography.subtitleSmall(),Z.Z.color.darkGreen,Z.Z.spacing.xxxs,Z.Z.spacing.xs,Z.Z.spacing.md,A.ZP.typography.bodySmall(),Z.Z.color.cadet,Z.Z.spacing.xs,Z.Z.spacing.xs,Z.Z.spacing.xxs,o.colors.labelLink,A.ZP.typography.bodyLarge(),Z.Z.spacing.xxxxs,Z.Z.spacing.xxxxs,Z.Z.spacing.xxxs,S.K.RTL,Z.Z.spacing.xxxxs,Z.Z.responsiveBreakpoints.large,Z.Z.responsiveBreakpoints.extraLarge]]])+" footer-label",children:t("component.builderHeader.storySettings.analytics.message.allowTracking")})}),(0,u.jsx)("button",{"aria-label":t("common.close"),onClick:e.onDismissClicked,className:h().dynamic([["c528a5e00b3117f6",[Z.Z.spacing.sm,A.ZP.shadow.sm(),A.ZP.overflowWrap(),Z.Z.spacing.xxs,Z.Z.spacing.xxs,Z.Z.spacing.xxs,Z.Z.color.white,Z.Z.spacing.xs,Z.Z.spacing.xxs,A.ZP.typography.subtitleSmall(),Z.Z.color.darkGreen,Z.Z.spacing.xxxs,Z.Z.spacing.xs,Z.Z.spacing.md,A.ZP.typography.bodySmall(),Z.Z.color.cadet,Z.Z.spacing.xs,Z.Z.spacing.xs,Z.Z.spacing.xxs,o.colors.labelLink,A.ZP.typography.bodyLarge(),Z.Z.spacing.xxxxs,Z.Z.spacing.xxxxs,Z.Z.spacing.xxxs,S.K.RTL,Z.Z.spacing.xxxxs,Z.Z.responsiveBreakpoints.large,Z.Z.responsiveBreakpoints.extraLarge]]])+" close-button",children:(0,u.jsx)(L.Z,{path:D.nYe,size:16,color:o.colors.labelPrimary})}),(0,u.jsx)(h(),{id:"c528a5e00b3117f6",dynamic:[Z.Z.spacing.sm,A.ZP.shadow.sm(),A.ZP.overflowWrap(),Z.Z.spacing.xxs,Z.Z.spacing.xxs,Z.Z.spacing.xxs,Z.Z.color.white,Z.Z.spacing.xs,Z.Z.spacing.xxs,A.ZP.typography.subtitleSmall(),Z.Z.color.darkGreen,Z.Z.spacing.xxxs,Z.Z.spacing.xs,Z.Z.spacing.md,A.ZP.typography.bodySmall(),Z.Z.color.cadet,Z.Z.spacing.xs,Z.Z.spacing.xs,Z.Z.spacing.xxs,o.colors.labelLink,A.ZP.typography.bodyLarge(),Z.Z.spacing.xxxxs,Z.Z.spacing.xxxxs,Z.Z.spacing.xxxs,S.K.RTL,Z.Z.spacing.xxxxs,Z.Z.responsiveBreakpoints.large,Z.Z.responsiveBreakpoints.extraLarge],children:".container.__jsx-style-dynamic-selector{--space-from-bottom:".concat(Z.Z.spacing.sm,";").concat(A.ZP.shadow.sm(),"\n          ").concat(A.ZP.overflowWrap(),"\n          position: fixed;z-index:9999;bottom:var(--space-from-bottom);left:50%;-webkit-transform:translateX(-50%);-moz-transform:translateX(-50%);-ms-transform:translateX(-50%);-o-transform:translateX(-50%);transform:translateX(-50%);width:100%;max-width:-webkit-calc(100% - ").concat(Z.Z.spacing.xxs," - ").concat(Z.Z.spacing.xxs,");max-width:-moz-calc(100% - ").concat(Z.Z.spacing.xxs," - ").concat(Z.Z.spacing.xxs,");max-width:calc(100% - ").concat(Z.Z.spacing.xxs," - ").concat(Z.Z.spacing.xxs,");max-height:-webkit-calc(100vh - var(--space-from-bottom) - ").concat(Z.Z.spacing.xxs,");max-height:-moz-calc(100vh - var(--space-from-bottom) - ").concat(Z.Z.spacing.xxs,");max-height:calc(100vh - var(--space-from-bottom) - ").concat(Z.Z.spacing.xxs,");display:-webkit-box;display:-webkit-flex;display:-moz-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;-moz-box-orient:vertical;-moz-box-direction:normal;-ms-flex-direction:column;flex-direction:column;background-color:").concat(Z.Z.color.white,";padding:").concat(Z.Z.spacing.xs," 0 ").concat(Z.Z.spacing.xxs,"}.title.__jsx-style-dynamic-selector{").concat(A.ZP.typography.subtitleSmall(),"\n          color: ").concat(Z.Z.color.darkGreen,";margin-bottom:").concat(Z.Z.spacing.xxxs,";-webkit-padding-start:").concat(Z.Z.spacing.xs,";-moz-padding-start:").concat(Z.Z.spacing.xs,";padding-inline-start:").concat(Z.Z.spacing.xs,";-webkit-padding-end:").concat(Z.Z.spacing.md,";-moz-padding-end:").concat(Z.Z.spacing.md,";padding-inline-end:").concat(Z.Z.spacing.md,"}.message-container.__jsx-style-dynamic-selector{").concat(A.ZP.typography.bodySmall(),"\n          overflow-y: auto;color:").concat(Z.Z.color.cadet,";-webkit-padding-start:").concat(Z.Z.spacing.xs,";-moz-padding-start:").concat(Z.Z.spacing.xs,";padding-inline-start:").concat(Z.Z.spacing.xs,";-webkit-padding-end:").concat(Z.Z.spacing.xs,";-moz-padding-end:").concat(Z.Z.spacing.xs,";padding-inline-end:").concat(Z.Z.spacing.xs,";padding-bottom:").concat(Z.Z.spacing.xxs,"}.message-container.__jsx-style-dynamic-selector a,.message-container.__jsx-style-dynamic-selector a:visited{color:").concat(o.colors.labelLink,"}.footer-label.__jsx-style-dynamic-selector{").concat(A.ZP.typography.bodyLarge(),"\n        }.close-button.__jsx-style-dynamic-selector{position:absolute;top:").concat(Z.Z.spacing.xxxxs,";right:").concat(Z.Z.spacing.xxxxs,";padding:").concat(Z.Z.spacing.xxxs,";line-height:0}").concat(S.K.RTL," .close-button.__jsx-style-dynamic-selector{right:unset;left:").concat(Z.Z.spacing.xxxxs,"}@media(min-width:").concat(Z.Z.responsiveBreakpoints.large,"){.container.__jsx-style-dynamic-selector{width:75%;max-width:").concat(Z.Z.responsiveBreakpoints.extraLarge,"}}")})]})},R=o(86714),B=o(71216),N=o(42486),H=o(34084),z=o(18288),U=o(52297),W=o(22942),K=o(50706),G=o(99824),V=o(60120),q=o(1924),F=o(83584),X=o(9518),Y=o(17236),J=o(97728),Q=o(94764),$=o(75848),ee={"1/2x":D.eIA,"1x":D.P6m,"2x":D.wn_},te=function(e){(0,r.Z)(o,e);var t=(0,l.Z)(o);function o(e){var n;return(0,a.Z)(this,o),(n=t.call(this,e)).setHoverState=function(){n.state.isHovering||n.setState({isShowing:!0,isHovering:!0})},n.removeHoverState=function(){n.state.isHovering&&n.setState({isHovering:!1})},n.state={isShowing:n.props.isShowing,isHovering:!1},n}var n=o.prototype;return n.componentDidUpdate=function(){this.props.isShowing===this.state.isShowing||this.state.isHovering||this.setState({isShowing:this.props.isShowing})},n.render=function(){var e=this.state.isShowing?"visible":"hidden",t=this.props.intl.formatMessage({id:"component.autoplay.returnToTop"}),o=this.props.intl.formatMessage({id:"component.autoplay.play"}),n=this.props.intl.formatMessage({id:"component.autoplay.pause"}),i=this.props.intl.formatMessage({id:"component.autoplay.toggleSpeed"});return(0,u.jsxs)("div",{onMouseEnter:this.setHoverState,onMouseLeave:this.removeHoverState,className:h().dynamic([["65bb7188544cea6d",[this.props.appOffset.bottom,Z.Z.spacing.xxl,Z.Z.spacing.xxxxs,A.ZP.hexA(this.props.websiteDesign.theme.colors.backgroundPrimary,.85),e,this.state.isShowing?1:0,Z.Z.spacing.xs,Z.Z.spacing.md,A.ZP.gapped({direction:"horizontal",gap:Z.Z.spacing.xs,alignItems:"center",justifyContent:"center"})]]])+" autoplay",children:[(0,u.jsxs)("div",{className:h().dynamic([["65bb7188544cea6d",[this.props.appOffset.bottom,Z.Z.spacing.xxl,Z.Z.spacing.xxxxs,A.ZP.hexA(this.props.websiteDesign.theme.colors.backgroundPrimary,.85),e,this.state.isShowing?1:0,Z.Z.spacing.xs,Z.Z.spacing.md,A.ZP.gapped({direction:"horizontal",gap:Z.Z.spacing.xs,alignItems:"center",justifyContent:"center"})]]])+" autoplay-controls-wrapper",children:[(0,u.jsx)($.ZP,{type:"single-icon",onClick:this.props.onResetClick,ariaLabel:t,children:(0,u.jsx)(L.Z,{path:D.MiK})}),this.props.isPlaying?(0,u.jsx)($.ZP,{type:"single-icon",onClick:this.props.onPlayToggle,ariaLabel:n,children:(0,u.jsx)(L.Z,{path:D.LEk})}):(0,u.jsx)($.ZP,{type:"single-icon",onClick:this.props.onPlayToggle,ariaLabel:o,children:(0,u.jsx)(L.Z,{path:D.Ck6})}),(0,u.jsx)($.ZP,{type:"single-icon",onClick:this.props.onSpeedToggle,ariaLabel:i,children:(0,u.jsx)(L.Z,{path:ee[this.props.speed]})})]}),(0,u.jsx)(h(),{id:"65bb7188544cea6d",dynamic:[this.props.appOffset.bottom,Z.Z.spacing.xxl,Z.Z.spacing.xxxxs,A.ZP.hexA(this.props.websiteDesign.theme.colors.backgroundPrimary,.85),e,this.state.isShowing?1:0,Z.Z.spacing.xs,Z.Z.spacing.md,A.ZP.gapped({direction:"horizontal",gap:Z.Z.spacing.xs,alignItems:"center",justifyContent:"center"})],children:".autoplay.__jsx-style-dynamic-selector{position:fixed;left:50%;-webkit-transform:translateX(-50%);-moz-transform:translateX(-50%);-ms-transform:translateX(-50%);-o-transform:translateX(-50%);transform:translateX(-50%);bottom:-webkit-calc(".concat(this.props.appOffset.bottom," + ").concat(Z.Z.spacing.xxl,");bottom:-moz-calc(").concat(this.props.appOffset.bottom," + ").concat(Z.Z.spacing.xxl,");bottom:calc(").concat(this.props.appOffset.bottom," + ").concat(Z.Z.spacing.xxl,");-webkit-border-radius:").concat(Z.Z.spacing.xxxxs,";-moz-border-radius:").concat(Z.Z.spacing.xxxxs,";border-radius:").concat(Z.Z.spacing.xxxxs,";background-color:").concat(A.ZP.hexA(this.props.websiteDesign.theme.colors.backgroundPrimary,.85),";z-index:10;visibility:").concat(e,";opacity:").concat(this.state.isShowing?1:0,";-webkit-transition:opacity.5s linear,visibility.5s linear;-moz-transition:opacity.5s linear,visibility.5s linear;-o-transition:opacity.5s linear,visibility.5s linear;transition:opacity.5s linear,visibility.5s linear;padding:").concat(Z.Z.spacing.xs," ").concat(Z.Z.spacing.md,"}.autoplay-controls-wrapper.__jsx-style-dynamic-selector{").concat(A.ZP.gapped({direction:"horizontal",gap:Z.Z.spacing.xs,alignItems:"center",justifyContent:"center"}),";}")})]})},o}(g.PureComponent),oe=(0,b.EL)((0,z.Jh)((0,f.ZP)(te))),ne=o(99197),ie=function(e){(0,r.Z)(o,e);var t=(0,l.Z)(o);function o(e){var s;(0,a.Z)(this,o),(s=t.call(this,e)).lastMouseMoveTime=0,s.lastScrollTime=0,s.isReaderScrolling=!1,s.autoplayNode=(0,g.createRef)();var r=(0,n.Z)(s);s.autoplayEnabledSetup=(0,i.Z)((function(){var e;return(0,d.__generator)(this,(function(t){switch(t.label){case 0:return(0,Y.xR)()||r.toggleAutoplay(),window.addEventListener("mousemove",r.handleMouseMove),window.addEventListener("wheel",r.handleWindowScroll),window.addEventListener("mousedown",r.handleMouseDown),window.addEventListener("touchstart",r.handleMouseDown),r.interactionTimer=window.setInterval(r.interactionDelayCheck,500),r.props.collectionBlock?[4,null===(e=r.props.collectionBlock)||void 0===e?void 0:e.do("switchToCurrentActiveItem")]:[3,2];case 1:t.sent(),r.autoplayCollectionItem(),t.label=2;case 2:return[2]}}))})),s.autoplayDisabledCleanup=function(){clearInterval(s.interactionTimer),clearInterval(s.scrollTimer),window.removeEventListener("mousemove",s.handleMouseMove),window.removeEventListener("wheel",s.handleWindowScroll),window.removeEventListener("mousedown",s.handleMouseDown),window.removeEventListener("touchstart",s.handleMouseDown),clearTimeout(s.collectionTimeoutId),s.postMessageToActiveItemIframe(ne.O4)},s.onReceiveMessage=function(e){if(e.origin===window.location.origin)if((0,Y.xR)()){var t,o;if(e.data.method===ne.jf&&window.parent.postMessage({method:ne.Cd},window.location.origin),e.data.method===ne.fS&&e.data.speed&&(s.props.enableAutoplay(),s.props.updateAutoplaySpeed(e.data.speed),s.props.isAutoplayPaused&&s.toggleAutoplay()),e.data.method===ne.O4&&(s.props.disableAutoplay(),s.props.isAutoplayPaused||s.toggleAutoplay()),e.data.method===ne.sk&&s.toggleAutoplay(),e.data.method===ne.li&&e.data.speed&&s.props.updateAutoplaySpeed(e.data.speed),e.data.method===ne.Kj)null===(o=(t=s.props).onScrolledToBottom)||void 0===o||o.call(t),s.props.updateIsAutoplayPaused(!1),s.scrollPage()}else{var n,i;if(s.props.isAutoplayEnabled&&e.data.method===ne.An)null===(n=e.source)||void 0===n||n.postMessage({method:ne.fS,speed:s.props.autoplaySpeed});if(e.data.method===ne.Cx)null===(i=e.source)||void 0===i||i.postMessage({method:ne.jf});e.data.method===ne.Cd&&s.switchToNextItem(),e.data.method===ne.XR&&"boolean"===typeof e.data.isPaused&&s.props.isAutoplayPaused!==e.data.isPaused&&s.props.updateIsAutoplayPaused(e.data.isPaused)}};var p=(0,n.Z)(s);return s.switchToNextItem=function(){var e=(0,i.Z)((function(e){var t;return(0,d.__generator)(this,(function(o){switch(o.label){case 0:return[4,null===(t=p.props.collectionBlock)||void 0===t?void 0:t.do("switchToNextItem",e)];case 1:return o.sent(),p.autoplayCollectionItem(),[2]}}))}));return function(t){return e.apply(this,arguments)}}(),s.switchToFirstCollectionItem=function(){s.switchToNextItem(0)},s.autoplayCollectionItem=function(){var e,t=null===(e=s.props.collectionBlock)||void 0===e?void 0:e.do("getActiveItemBlock");if(t){var o=t.do("isStoryMap"),n=t.do("getBlockItemType"),i=t.do("getItemUrl"),a=null===i||void 0===i?void 0:i.startsWith(null===window||void 0===window?void 0:window.origin),r=ne.qi[s.props.autoplaySpeed].collectionAutoplayDuration;"embed"===n&&a||o&&a||(clearTimeout(s.collectionTimeoutId),s.collectionTimeoutId=setTimeout((function(){s.switchToNextItem()}),r))}},s.postMessageToActiveItemIframe=function(e,t){var o,n=null===(o=document.querySelector(".".concat(ne.l)))||void 0===o?void 0:o.contentWindow;null===n||void 0===n||n.postMessage((0,c.Z)({method:e},t))},s.toggleAutoplay=function(e){var t=!s.props.isAutoplayPaused;null===e||void 0===e||e.preventDefault(),s.props.updateIsAutoplayPaused(t),s.props.collectionBlock?(s.postMessageToActiveItemIframe(ne.sk),t?clearTimeout(s.collectionTimeoutId):s.autoplayCollectionItem()):(window.parent.postMessage({method:ne.XR,isPaused:t}),s.scrollPage())},s.handleWindowScroll=function(e){(e.deltaY>0||e.deltaY<0)&&(s.updateScrollTime(),s.isReaderScrolling=!0,s.props.isAutoplayPaused||(s.props.updateIsAutoplayPaused(!0),clearTimeout(s.collectionTimeoutId),s.postMessageToActiveItemIframe(ne.sk)))},s.handleMouseDown=function(e){var t;s.props.isAutoplayPaused||(null===(t=s.autoplayNode.current)||void 0===t?void 0:t.contains(e.target))||(s.props.updateIsAutoplayPaused(!0),clearInterval(s.scrollTimer),clearTimeout(s.collectionTimeoutId),s.postMessageToActiveItemIframe(ne.sk))},s.updateScrollTime=function(){s.lastScrollTime=Date.now()},s.handleMouseMove=function(){s.lastMouseMoveTime=Date.now(),s.setState({areAutoplayControlsShowing:!0})},s.interactionDelayCheck=function(){s.autoplayNode.current?s.isReaderScrolling?s.onReaderScrolling():s.onReaderNotScrolling():clearInterval(s.interactionTimer)},s.onReaderScrolling=function(){Date.now()>s.lastScrollTime+ne.AD?s.isReaderScrolling=!1:s.setState({areAutoplayControlsShowing:!0})},s.onReaderNotScrolling=function(){Date.now()>s.lastMouseMoveTime+ne.oc&&!s.props.isAutoplayPaused?s.setState({areAutoplayControlsShowing:!1}):s.setState({areAutoplayControlsShowing:!0})},s.toggleAutoplaySpeed=function(){"fast"===s.props.autoplaySpeed?s.props.updateAutoplaySpeed("slow"):"slow"===s.props.autoplaySpeed?s.props.updateAutoplaySpeed("medium"):s.props.updateAutoplaySpeed("fast")},s.onResetClick=function(){s.props.collectionBlock?(clearTimeout(s.collectionTimeoutId),s.switchToFirstCollectionItem(),s.postMessageToActiveItemIframe(ne.Kj),s.props.updateIsAutoplayPaused(!1)):s.jumpToTop()},s.jumpToTop=function(){var e,t;null===(t=(e=s.props).onScrolledToBottom)||void 0===t||t.call(e),window.parent.postMessage({method:ne.Cx},window.location.origin),s.props.updateIsAutoplayPaused(!1),s.scrollPage()},s.scrollPage=function(){var e=ne.qi[s.props.autoplaySpeed].pageScrollDelay;clearInterval(s.scrollTimer),s.scrollTimer=window.setInterval((function(){!s.props.isAutoplayPaused&&s.autoplayNode.current?0===window.scrollY?(clearInterval(s.scrollTimer),setTimeout((function(){window.scrollBy(0,2),s.scrollPage()}),2e3)):Math.round(window.innerHeight+window.scrollY)>=document.body.offsetHeight?(clearInterval(s.scrollTimer),setTimeout(s.jumpToTop,3e3)):window.scrollBy(0,2):clearInterval(s.scrollTimer)}),e)},s.state={areAutoplayControlsShowing:!1},s}var s=o.prototype;return s.componentDidMount=function(){window.addEventListener("message",this.onReceiveMessage,!1),(0,Y.xR)()&&window.parent.postMessage({method:ne.An},window.location.origin)},s.componentDidUpdate=function(e,t){e.autoplaySpeed!==this.props.autoplaySpeed&&(this.scrollPage(),this.postMessageToActiveItemIframe(ne.li,{speed:this.props.autoplaySpeed})),!e.isAutoplayEnabled&&this.props.isAutoplayEnabled&&this.autoplayEnabledSetup(),e.isAutoplayEnabled&&!this.props.isAutoplayEnabled&&this.autoplayDisabledCleanup(),(0,Y.xR)()&&!this.props.isAutoplayEnabled&&window.parent.postMessage({method:ne.An},window.location.origin);var o=this.props.collectionDisplay.isCoverShowing;!e.collectionDisplay.isCoverShowing&&o&&this.props.isAutoplayEnabled&&this.props.disableAutoplay()},s.componentWillUnmount=function(){window.removeEventListener("message",this.onReceiveMessage,!1),this.autoplayDisabledCleanup()},s.render=function(){return this.props.isAutoplayEnabled?(0,u.jsxs)(g.Fragment,{children:[(0,u.jsx)(X.Z,{triggerKey:" ",on:this.toggleAutoplay}),!this.props.isAutoplayPaused&&(0,u.jsx)(J.Z,{isShowing:!0,isInvisible:!0}),(0,u.jsx)("div",{ref:this.autoplayNode,children:(0,u.jsx)(oe,{isShowing:!(0,Y.xR)()&&this.state.areAutoplayControlsShowing,speed:ne.qi[this.props.autoplaySpeed].displaySpeed,isPlaying:!this.props.isAutoplayPaused,onResetClick:this.onResetClick,onPlayToggle:this.toggleAutoplay,onSpeedToggle:this.toggleAutoplaySpeed})})]}):null},o}(g.PureComponent),ae=(0,Q.p)((0,F.HH)(ie)),se=o(80326),re=o(12170),ce=o(6e3),pe=function(e){(0,r.Z)(o,e);var t=(0,l.Z)(o);function o(e){var n;return(0,a.Z)(this,o),(n=t.call(this,e)).margins={top:65,bottom:130,side:65},n.deviceSpecs={phone:{landscape:{width:734,height:388,fileName:"frame-phone-landscape.png"},portrait:{width:388,height:734,fileName:"frame-phone.png"}},tablet:{landscape:{width:1100,height:782,fileName:"frame-tablet-landscape.png"},portrait:{width:782,height:1100,fileName:"frame-tablet.png"}},desktop:{landscape:{width:1370,height:878,fileName:"frame-desktop.png"},portrait:{width:1370,height:878,fileName:"frame-desktop.png"}}},n.scaleWrapper=(0,g.createRef)(),n.scaledPreview=(0,g.createRef)(),n.previewIframe=(0,g.createRef)(),n.handleResize=function(){n.forceUpdate()},n.findTransformScale=function(){var e,t=null===(e=n.scaleWrapper.current)||void 0===e?void 0:e.getBoundingClientRect();if(!t)return 1;var o=n.deviceSpecs[n.props.device],i=Math.round(t.height-n.margins.top-n.margins.bottom),a=Math.min(i/o.portrait.height,1),s=Math.round(t.width-2*n.margins.side),r=Math.min(s/o.landscape.width,1);return+Math.min(a,r).toFixed(2)},n.findTopPosition=function(e){if(!n.scaleWrapper.current||!n.scaledPreview.current)return 0;var t=Math.round(n.scaleWrapper.current.getBoundingClientRect().height),o=Math.round(e||n.scaledPreview.current.getBoundingClientRect().height);return n.margins.top+(t-o-n.margins.top-n.margins.bottom)/2},n.handleResizeDebouncedly=(0,re.Ds)(n.handleResize,200),n}var n=o.prototype;return n.componentDidMount=function(){this.forceUpdate(),this.scrollWindowToTop(),window.addEventListener("resize",this.handleResizeDebouncedly)},n.componentDidUpdate=function(e){e.device===this.props.device&&e.orientation===this.props.orientation||this.scrollIframeToTop()},n.componentWillUnmount=function(){window.removeEventListener("resize",this.handleResizeDebouncedly)},n.render=function(){var e=this.deviceSpecs[this.props.device][this.props.orientation],t=this.findTransformScale(),o=Math.round(e.height*t),n=this.findTopPosition(o),i=this.props.query?(0,ce.qC)(this.props.query):void 0,a=void 0===this.props.selectedItemId?i?"./embedded-preview?".concat(i):"./embedded-preview":i?"./embedded-preview?item=".concat(this.props.selectedItemId,"&").concat(i):"./embedded-preview?item=".concat(this.props.selectedItemId);return(0,u.jsx)(g.Fragment,{children:(0,u.jsxs)("div",{ref:this.scaleWrapper,className:h().dynamic([["800a9668e8a46165",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,n,Z.Z.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" "+"scale-wrapper ".concat(this.props.device," ").concat(this.props.orientation),children:[(0,u.jsx)("div",{className:h().dynamic([["800a9668e8a46165",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,n,Z.Z.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" scaled",children:(0,u.jsx)("div",{ref:this.scaledPreview,className:h().dynamic([["800a9668e8a46165",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,n,Z.Z.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" center-horizontally scaled-preview",children:(0,u.jsxs)("div",{className:h().dynamic([["800a9668e8a46165",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,n,Z.Z.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" preview-container specified-dimensions",children:[(0,u.jsx)("img",{src:"".concat(this.props.config.BASE_URL,"/static/storymaps-website-common/images/device-preview/").concat(e.fileName),alt:this.props.intl.formatMessage({id:"component.preview.chromeAlt"}),loading:"lazy",className:h().dynamic([["800a9668e8a46165",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,n,Z.Z.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" device-chrome"}),(0,u.jsx)("iframe",{src:a,ref:this.previewIframe,loading:"lazy",className:h().dynamic([["800a9668e8a46165",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,n,Z.Z.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])})]})})}),"desktop"!==this.props.device&&(0,u.jsx)("div",{className:h().dynamic([["800a9668e8a46165",[this.props.websiteDesign.theme.colors.backgroundSecondary,t,n,Z.Z.spacing.lg,this.props.device,this.props.orientation,e.width,e.height]]])+" rotate-button-wrapper center-horizontally",children:(0,u.jsx)($.ZP,{type:"single-icon",iconSize:24,onClick:this.props.onOrientationChange,ariaLabel:this.props.intl.formatMessage({id:"component.preview.rotateLabel"}),children:(0,u.jsx)(L.Z,{path:D.J9s})})}),(0,u.jsx)(h(),{id:"800a9668e8a46165",dynamic:[this.props.websiteDesign.theme.colors.backgroundSecondary,t,n,Z.Z.spacing.lg,this.props.device,this.props.orientation,e.width,e.height],children:".center-horizontally.__jsx-style-dynamic-selector{position:absolute;left:50%;-webkit-transform:translateX(-50%);-moz-transform:translateX(-50%);-ms-transform:translateX(-50%);-o-transform:translateX(-50%);transform:translateX(-50%);top:0}.scale-wrapper.__jsx-style-dynamic-selector{height:100vh;position:relative;background-color:".concat(this.props.websiteDesign.theme.colors.backgroundSecondary,"}.scaled.__jsx-style-dynamic-selector{-webkit-transform:scale(").concat(t,");-moz-transform:scale(").concat(t,");-ms-transform:scale(").concat(t,");-o-transform:scale(").concat(t,");transform:scale(").concat(t,");position:relative;top:").concat(n,"px}.preview-container.__jsx-style-dynamic-selector{margin:0 auto}.rotate-button-wrapper.__jsx-style-dynamic-selector{top:auto;bottom:").concat(Z.Z.spacing.lg,"}iframe.__jsx-style-dynamic-selector{position:absolute;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;-webkit-border-radius:8px;-moz-border-radius:8px;border-radius:8px}.").concat(this.props.device,".").concat(this.props.orientation,".__jsx-style-dynamic-selector .specified-dimensions.__jsx-style-dynamic-selector{width:").concat(e.width,"px;height:").concat(e.height,"px}.phone.portrait.__jsx-style-dynamic-selector iframe.__jsx-style-dynamic-selector{top:4.8%;left:1.9%;height:90.4%;width:96.3%}.phone.landscape.__jsx-style-dynamic-selector iframe.__jsx-style-dynamic-selector{left:4.8%;top:1.9%;width:90.4%;height:96.3%}.tablet.portrait.__jsx-style-dynamic-selector iframe.__jsx-style-dynamic-selector{top:4.6%;left:1.4%;height:90.6%;width:97.2%}.tablet.landscape.__jsx-style-dynamic-selector iframe.__jsx-style-dynamic-selector{left:4.6%;top:1.4%;width:90.6%;height:97.2%}.desktop.__jsx-style-dynamic-selector iframe.__jsx-style-dynamic-selector{top:6.4%;left:1.8%;width:96.5%;height:90.9%}")})]})})},n.scrollWindowToTop=function(){var e,t=null===window||void 0===window||null===(e=window.document)||void 0===e?void 0:e.documentElement;t&&(t.scrollTop=0)},n.scrollIframeToTop=function(){try{var e,t,o,n,i=null===(e=this.previewIframe)||void 0===e||null===(t=e.current)||void 0===t||null===(o=t.contentWindow)||void 0===o||null===(n=o.document)||void 0===n?void 0:n.documentElement;i&&this.scrollToTop(i)}catch(a){}},n.scrollToTop=function(e){var t=this;if(e.scrollTop>0){var o=e.clientHeight?Math.round(e.clientHeight/2):300;setTimeout((function(){e.scrollBy(0,-1*o),t.scrollToTop(e)}),10)}},o}(g.Component),le=(0,b.EL)((0,f.ZP)((0,P.Df)((0,T.VO)(pe)))),de=o(61355),ue=o(6403),me=o(9534),he=o(81049),ge=o(9920),ye=o(99466),fe="storyPreviewControlsNudge",xe="collectionPreviewControlsNudge",ve=function(e){(0,r.Z)(o,e);var t=(0,l.Z)(o);function o(e){var n;return(0,a.Z)(this,o),(n=t.call(this,e)).deviceSpecs=[{value:"phone",iconProps:{path:D.IfO},stringId:"component.previewHeader.device.phone"},{value:"tablet",iconProps:{path:D.Z5o,shouldFlipRTL:!0},stringId:"component.previewHeader.device.tablet"},{value:"desktop",iconProps:{path:D.G0F},stringId:"component.previewHeader.device.desktop"},{value:"fullscreen",iconProps:{path:D.mIy,shouldFlipRTL:!0},stringId:"component.previewHeader.device.full"}],n.renderControls=function(){var e=n.props.intl.formatMessage({id:"component.preview.controls.close"});return(0,u.jsxs)("div",{className:h().dynamic([["f47cf496838a507a",[A.ZP.gapped({direction:"horizontal",alignItems:"center",justifyContent:"center"}),A.ZP.shadow.md(),n.props.websiteDesign.theme.colors.surfaceDefault,n.props.websiteDesign.productVariables.borderRadius.mid]]])+" preview-controls",children:[n.deviceSpecs.map((function(e){var t=e.value,o=n.props.intl.formatMessage({id:e.stringId});return(0,u.jsx)(me.h,{isActive:n.props.device===t,iconProps:e.iconProps,buttonId:e.stringId,onClick:function(){n.onPreviewChangeWrapper(t)},tooltipContent:o},"".concat(t,"-frag"))})),(0,u.jsx)(he.Z,{}),(0,u.jsx)(ge.e,{routeDef:{route:"builder",itemId:n.props.itemId,itemType:n.props.itemType},children:(0,u.jsx)($.ZP,{type:"single-icon",className:"edit-link",ariaLabel:e,children:(0,u.jsx)(de.Z,{tooltipContent:e,children:(0,u.jsx)(L.Z,{path:D.nYe,size:16})})})}),(0,u.jsx)(h(),{id:"f47cf496838a507a",dynamic:[A.ZP.gapped({direction:"horizontal",alignItems:"center",justifyContent:"center"}),A.ZP.shadow.md(),n.props.websiteDesign.theme.colors.surfaceDefault,n.props.websiteDesign.productVariables.borderRadius.mid],children:".preview-controls.__jsx-style-dynamic-selector{".concat(A.ZP.gapped({direction:"horizontal",alignItems:"center",justifyContent:"center"}),";").concat(A.ZP.shadow.md(),"\n            background-color: ").concat(n.props.websiteDesign.theme.colors.surfaceDefault,";-webkit-border-radius:").concat(n.props.websiteDesign.productVariables.borderRadius.mid,";-moz-border-radius:").concat(n.props.websiteDesign.productVariables.borderRadius.mid,";border-radius:").concat(n.props.websiteDesign.productVariables.borderRadius.mid,";color:inherit}")})]})},n.onPreviewChangeWrapper=function(e){n.props.onDeviceChange&&n.props.onDeviceChange(e)},n.onNudgeDismissed=function(){n.setState({hasSeenNudge:!0}),(0,ye.s)({id:n.props.itemType===V.o.Story?fe:xe,value:!0})},n.state={hasSeenNudge:!!(0,ye.n)({id:n.props.itemType===V.o.Story?fe:xe})},n}return o.prototype.render=function(){return(0,u.jsx)(ue.Z,{target:this.renderControls(),title:this.props.intl.formatMessage({id:"component.preview.controls.nudge.description"}),placement:"top",isShowing:!!this.props.canShowNudge&&!this.state.hasSeenNudge,onClick:this.onNudgeDismissed})},o}(g.Component);ve.defaultProps={device:"fullscreen",onDeviceChange:function(){}};var we=(0,b.EL)((0,P.Df)((0,f.ZP)((0,z.Jh)(ve)))),be=o(77260),Ze=o(58650),Se=o(81192),Ie=o(26015),ke=o(48773),Te=function(e,t,o,n,i,a,s,r,c,p){return JSON.stringify({"@context":"https://schema.org","@type":"NewsArticle",mainEntityOfPage:{"@type":"WebPage","@id":"".concat(r).concat(p.BASE_URL,"/").concat(e,"/").concat(c)},headline:"".concat(a),image:["".concat(t)],datePublished:"".concat(o),dateModified:"".concat(n),author:{"@type":"Person",name:"".concat(i)},publisher:{"@type":"Organization",name:"Esri",logo:{"@type":"ImageObject",url:"".concat(r).concat(p.BASE_URL,"/static/images/logo.png")}},description:"".concat(s)})},je=function(){return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("link",{rel:"preconnect",href:"https://www.arcgis.com"}),(0,u.jsx)("link",{rel:"preconnect",href:"https://js.arcgis.com"}),(0,u.jsx)("link",{rel:"preconnect",href:"https://static.arcgis.com"})]})},Pe=function(e){var t,o,n,i,a,s,r,c,p,l,d,m=e.itemType,h=e.itemDetails,y=e.publishedDate,f=e.host,x=e.config,w=e.gaid,b=w&&(0,be.b)(w),Z=x.ESRI_MARKETING_ANALYTICS&&((null!==(d=h.typeKeywords)&&void 0!==d?d:[]).includes(Ie.hH)||"string"===typeof h.orgId&&x.ESRI_MARKETING_ANALYTICS.orgIds.includes(h.orgId))?x.ESRI_MARKETING_ANALYTICS.scriptSrc:void 0,S=(0,H.Gr)().requestNextRouteChangeWithFullPageLoad;(0,g.useEffect)((function(){(b||"undefined"!==typeof Z)&&S()}),[b,Z,S]);var I="".concat(f?"https://"+f:x.SITE_URL),k=(0,Ze.Sg)({portalHost:x.PORTAL_HOST,itemDetails:h,fallbackUrl:"".concat(I).concat((0,ke.Zr)(x.BASE_URL)),shouldIgnoreDPR:!0,returnOriginalAspectRatio:!0}),T=m===V.o.Story?"stories":"collections",j=(null===(t=h.properties)||void 0===t||null===(o=t.metaProperties)||void 0===o?void 0:o.title)?(0,ce.dW)(null===(n=h.properties)||void 0===n||null===(i=n.metaProperties)||void 0===i?void 0:i.title):(0,ce.dW)(e.title),P=(0,ce.dW)(e.author),_=(null===(a=h.properties)||void 0===a||null===(s=a.metaProperties)||void 0===s?void 0:s.description)?(0,ce.dW)(null===(r=h.properties)||void 0===r||null===(c=r.metaProperties)||void 0===c?void 0:c.description):h.snippet?(0,ce.dW)(h.snippet):h.description?(0,ce.dW)(h.description):"",C="".concat(I).concat(x.BASE_URL,"/").concat(T,"/").concat(h.id),D=null===(p=h.typeKeywords)||void 0===p?void 0:p.includes(Se.L7);return(0,u.jsxs)(v(),{children:[(0,u.jsx)("title",{children:j},"title"),(0,u.jsx)("meta",{name:"author",content:P},"author"),(0,u.jsx)("meta",{property:"article:published_time",content:y.toISOString()},"publishedDate"),(0,u.jsx)("link",{rel:"canonical",href:C}),(0,u.jsx)("link",{rel:"alternate",type:"application/json+oembed",href:"".concat(I,"/oembed?url=").concat(encodeURIComponent(C),"&format=json"),title:j}),(0,u.jsx)("link",{rel:"alternate",type:"text/xml+oembed",href:"".concat(I,"/oembed?url=").concat(encodeURIComponent(C),"&format=xml"),title:j}),(0,u.jsx)(je,{}),("undefined"!==typeof h.robots||D)&&(0,u.jsx)("meta",{name:"robots",content:D?"noindex, nofollow":"function"===typeof(null===(l=h.robots)||void 0===l?void 0:l.join)?h.robots.join(","):"noindex, nofollow"}),(0,u.jsx)("meta",{property:"og:title",content:j},"og:title"),(0,u.jsx)("meta",{property:"og:description",content:_},"og:description"),(0,u.jsx)("meta",{property:"og:url",content:C},"og:url"),(0,u.jsx)("meta",{property:"og:image",content:k},"og:image"),(0,u.jsx)("meta",{name:"twitter:creator",content:P},"twitter:creator"),(0,u.jsx)("meta",{name:"twitter:url",content:C},"twitter:url"),(0,u.jsx)("meta",{name:"twitter:title",content:j},"twitter:title"),(0,u.jsx)("meta",{name:"twitter:description",content:_},"twitter:description"),(0,u.jsx)("meta",{name:"twitter:image",content:k},"twitter:image"),(0,u.jsx)("script",{type:"application/ld+json",dangerouslySetInnerHTML:{__html:"".concat(Te(T,k,new Date(h.created).toISOString(),y.toISOString(),P,j,_,I,h.id,x))}}),b&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("script",{async:!0,src:"https://www.googletagmanager.com/gtag/js?id=".concat(w,"&l=gDataLayer")}),(0,u.jsx)("script",{dangerouslySetInnerHTML:{__html:"\n                window.gDataLayer = window.gDataLayer || [];\n                function gtag(){gDataLayer.push(arguments);}\n                gtag('js', new Date());\n                gtag('config', '".concat(w,"', {'anonymize_ip':true});")}})]}),Z&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)("script",{dangerouslySetInnerHTML:{__html:"(function(){window.dataLayer = Object.assign({}, window.dataLayer, {pageTitle: 'StoryMap: ".concat(h.owner,": ' + document.title, pageName: 'StoryMap: ' + document.title, pageType: 'StoryMaps', pageSubType: 'StoryMap', domain: window.location.host, language: 'en',countryCode: 'us'});})()")}}),(0,u.jsx)("script",{src:Z,async:!0})]})]})},_e=o(50331),Ce=o(52641),De=o(95030),Ae=o(72779),Me=o.n(Ae),Le=o(48574),Ee=function(e){return(0,u.jsx)($.ZP,{type:"secondary",className:e.className,onClick:function(){return window.history.back()},children:(0,u.jsx)(y.Z,{id:"page.error.back"})})},Oe=function(e){(0,r.Z)(o,e);var t=(0,l.Z)(o);function o(){var e;return(0,a.Z)(this,o),(e=t.apply(this,arguments)).print=function(){j.Z.trackEvent(j.Z.Category.Viewer,j.Z.Action.Viewer_Print),window.print()},e}return o.prototype.render=function(){return(0,u.jsx)($.ZP,{className:this.props.className,onClick:this.print,children:(0,u.jsx)(y.Z,{id:"common.print"})})},o}(g.PureComponent),Re=Oe,Be=function(){var e={styles:(0,u.jsx)(h(),{id:"670c5ea701ffc9da",dynamic:[Z.Z.spacing.xs],children:".side-margins.__jsx-style-dynamic-selector{margin:0 ".concat(Z.Z.spacing.xs,"}")}),className:h().dynamic([["670c5ea701ffc9da",[Z.Z.spacing.xs]]])};return(0,u.jsxs)("div",{className:h().dynamic([["8958a3e2ea8738ad",[Z.Z.spacing.lg,Z.Z.spacing.xs,S.K.RTL]]])+" basic-wrapper",children:[(0,u.jsxs)("div",{className:h().dynamic([["8958a3e2ea8738ad",[Z.Z.spacing.lg,Z.Z.spacing.xs,S.K.RTL]]])+" print-wrapper",children:[(0,u.jsx)(Re,{className:"side-margins ".concat(e.className)}),(0,u.jsx)(Ee,{className:"side-margins ".concat(e.className)})]}),(0,u.jsx)(h(),{id:"8958a3e2ea8738ad",dynamic:[Z.Z.spacing.lg,Z.Z.spacing.xs,S.K.RTL],children:".basic-wrapper.__jsx-style-dynamic-selector{position:relative;display:none}@media screen{.basic-wrapper.__jsx-style-dynamic-selector{display:block}}.print-wrapper.__jsx-style-dynamic-selector{position:absolute;top:".concat(Z.Z.spacing.lg,";left:100%;display:grid;grid-gap:").concat(Z.Z.spacing.xs,"}").concat(S.K.RTL," .print-wrapper.__jsx-style-dynamic-selector{left:unset;right:100%}")}),e.styles]})},Ne=function(e){var t=(0,z.YO)().vertical,o=(0,b.Fj)().theme,n=Me()("viewer-main",Ie.MH,{"device-preview":"preview"===e.mode});return(0,u.jsxs)(Le.Z,{className:Me()({"inline-story":e.isInlineStory}),children:[e.viewerHeader,e.printMode&&(0,u.jsx)(Be,{}),(0,u.jsx)("main",{className:h().dynamic([["6e2f67f06aa6f1b1",[Z.Z.print.pageWidthLetter,Z.Z.print.backgroundColor]],["70455dddcd24beff",[t,o.colors.focus]]])+" "+(n||""),children:e.children}),(0,u.jsx)(h(),{id:"70455dddcd24beff",dynamic:[t,o.colors.focus],children:".viewer-main.__jsx-style-dynamic-selector{min-height:-webkit-calc(100vh - ".concat(t,");min-height:-moz-calc(100vh - ").concat(t,");min-height:calc(100vh - ").concat(t,")}.viewer-main.device-preview.__jsx-style-dynamic-selector{min-height:0}*:focus{outline-color:").concat(o.colors.focus,"}body.print .viewer-main.__jsx-style-dynamic-selector{min-height:0}")}),(0,u.jsx)(h(),{id:"6e2f67f06aa6f1b1",dynamic:[Z.Z.print.pageWidthLetter,Z.Z.print.backgroundColor],children:"body.print{width:".concat(Z.Z.print.pageWidthLetter,";margin:0 auto}body.print .page-container{background:").concat(Z.Z.print.backgroundColor,"}")})]})},He=function(e){(0,r.Z)(o,e);var t=(0,l.Z)(o);function o(e){var s,r;(0,a.Z)(this,o),(s=t.call(this,e)).getItemHref=function(e){var t;return null===(t=s.itemBlock)||void 0===t?void 0:t.do("getItemUrl",e)},s.renderBanner=function(e){return(0,u.jsxs)(g.Fragment,{children:["fullscreen-preview"===e&&!s.props.isViewportMinWidth("large")&&(0,u.jsx)("div",{className:h().dynamic([["90ba8ababd9ea64a",[s.props.appOffset.top]]])+" draft-preview-banner",children:(0,u.jsx)(w.Z,{size:"small",title:(0,u.jsx)(y.Z,{id:"common.banner.viewDraftStory.mobile"}),backgroundColor:s.props.websiteDesign.theme.colors.interactiveDefault,textColor:s.props.websiteDesign.theme.colors.labelPrimaryReverse,closeBtnColor:s.props.websiteDesign.theme.colors.labelPrimaryReverse,closeButtonLabel:s.props.intl.formatMessage({id:"common.close"})})}),(0,u.jsx)(h(),{id:"90ba8ababd9ea64a",dynamic:[s.props.appOffset.top],children:".draft-preview-banner.__jsx-style-dynamic-selector{position:absolute;top:".concat(s.props.appOffset.top,";left:0;width:100%;z-index:1}body.print .draft-preview-banner.__jsx-style-dynamic-selector{display:none}")})]})};var p=(0,n.Z)(s);s.favoriteItem=(0,i.Z)((function(){return(0,d.__generator)(this,(function(e){return[2,(0,U.Vx)({id:p.props.storyItem.itemId,authManager:p.props.authManager,toast:p.props.toast,owner:p.props.storyItem.itemOwner,itemType:p.props.itemType})]}))}));var l=(0,n.Z)(s);s.unfavoriteItem=(0,i.Z)((function(){return(0,d.__generator)(this,(function(e){return[2,(0,U.mA)({id:l.props.storyItem.itemId,authManager:l.props.authManager,toast:l.props.toast,owner:l.props.storyItem.itemOwner,itemType:l.props.itemType})]}))})),s.renderBody=function(e){var t;return"preview"===e?(0,u.jsx)(le,(0,c.Z)({device:s.state.previewDevice,orientation:s.state.previewOrientation,onOrientationChange:s.onOrientationChange,query:s.props.query},null!==(t=s.props.additionalDevicePreviewProps)&&void 0!==t?t:{})):(0,u.jsxs)(G.ZP.Provider,{value:s.props.storyItem,children:[s.renderBanner(e),s.state.ui]})},s.onOrientationChange=function(){var e="landscape"===s.state.previewOrientation?"portrait":"landscape";s.setState({previewOrientation:e})},s.onPreviewDeviceChange=function(e){if(e){var t={previewDevice:e};"phone"===e?(Object.assign(t,{previewOrientation:"portrait"}),j.Z.trackEvent(j.Z.Category.Preview,j.Z.Action.Preview_Device_Phone)):"tablet"===e&&(Object.assign(t,{previewOrientation:"landscape"}),j.Z.trackEvent(j.Z.Category.Preview,j.Z.Action.Preview_Device_Tablet)),s.setState(t,(function(){var t,o;null===(o=(t=s.props).onPreviewDeviceChange)||void 0===o||o.call(t,e)}))}},s.resetItemBlock=function(){var e;null===(e=s.itemBlock)||void 0===e||e.do("reset")},s.getTrackableGAId=function(){var e=!s.props.environment.isPortal||s.props.featureDecisions.canHaveGoogleAnalytics,t=(0,Ce.Pn)(s.props.storyItem.itemData,e);return"view"===s.props.mode&&t&&t.trackingId?!!t.trackingId&&!!t.consentMessage&&!s.state.hasUserAcceptedGoogleAnalytics?"":t.trackingId:""},s.onGoogleAnalyticsConsentMessageAccepted=function(){s.setState({isGoogleAnalyticsConsentMessageShowing:!1,hasUserAcceptedGoogleAnalytics:!0})},s.onGoogleAnalyticsConsentMessageDismissed=function(){s.setState({isGoogleAnalyticsConsentMessageShowing:!1})},s.jumpToBlock=function(){var e=0,t=0,o=document.body.offsetHeight,a=(0,n.Z)(s),r=setInterval((0,i.Z)((function(){var n,i;return(0,d.__generator)(this,(function(s){switch(s.label){case 0:return t++,(n=document.body.offsetHeight)===o?e++:(o=n,e=0),e>=5||t>=25?(clearInterval(r),(0,Ce.tc)(),a.state.linkedBlockId?[4,null===(i=a.itemBlock)||void 0===i?void 0:i.do("jumpToBlock",a.state.linkedBlockId)]:[3,2]):[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}}))})),100)},s.getHasDocumentLoaded=function(){return"undefined"!==typeof document&&"complete"===document.readyState},s.onWindowLoaded=function(){s.setState({hasPageLoaded:!0}),s.state.linkedBlockId&&s.state.hasItemRendered&&s.jumpToBlock()},s.getBylineFromStoryItemData=function(e,t){if(t===V.o.Story){var o=e.nodes[e.root];if(!o.children)return"";var n=!0,i=!1,a=void 0;try{for(var s,r=o.children[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){var c,p=s.value,l=e.nodes[p];if(l&&"storycover"===l.type)return null===(c=l.data)||void 0===c?void 0:c.byline}}catch(x){i=!0,a=x}finally{try{n||null==r.return||r.return()}finally{if(i)throw a}}}else{if(t!==V.o.Collection)throw new Error("only call getBylineFromStoryItemData for story and collection");var d=!0,u=!1,m=void 0;try{for(var h,g=Object.values(e.nodes)[Symbol.iterator]();!(d=(h=g.next()).done);d=!0){var y,f=h.value;if(f&&"collection-cover"===f.type)return null===(y=f.data)||void 0===y?void 0:y.byline}}catch(x){u=!0,m=x}finally{try{d||null==g.return||g.return()}finally{if(u)throw m}}}return""};var m=(0,n.Z)(s);return s.onSkipLink=(0,i.Z)((function(){var e,t,o;return(0,d.__generator)(this,(function(n){switch(n.label){case 0:return(t=null===(e=m.itemBlock)||void 0===e?void 0:e.do("getSkipLinkId"))?[4,null===(o=m.itemBlock)||void 0===o?void 0:o.do("jumpToBlock",t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))})),s.state={ui:void 0,viewerHeaderTheme:"light",title:(null===(r=s.props.storyItem.itemDetails)||void 0===r?void 0:r.title)||"",areSocialIconsHidden:!1,previewDevice:"fullscreen",previewOrientation:"landscape",isMounted:!1,isGoogleAnalyticsConsentMessageShowing:!1,hasUserAcceptedGoogleAnalytics:!1,hasPageLoaded:s.getHasDocumentLoaded(),linkedBlockId:s.props.canJumpToLinkedBlock&&!s.props.printMode?(0,Ce.g2)():void 0,hasItemRendered:!1},s}var m=o.prototype;return m.componentDidMount=function(){var e=this;(this.setState({isMounted:!0}),this.state.linkedBlockId)&&(this.getHasDocumentLoaded()?this.onWindowLoaded():window.addEventListener("load",this.onWindowLoaded));var t,o="view"===this.props.mode?this.props.storyItem.itemData:this.props.storyItem.itemDraftData,n=(0,p.Z)((0,c.Z)({shouldHideCoverActions:this.props.storyItem.itemId===De.BD||this.props.shouldHideCoverActions,printMode:this.props.printMode,viewMode:this.props.mode,query:this.props.query,lazy:!this.props.printMode,storyItem:this.props.storyItem,config:this.props.config,featureDecisions:this.props.featureDecisions,environment:this.props.environment,toast:this.props.toast,portalSelfResponse:this.props.portalSelfResponse,authManager:this.props.authManager,getIntl:function(){return e.props.intl},getAppOffset:function(){return e.props.appOffset},getStoryOffset:function(){return e.props.storyOffsetContext},getStoryRouting:function(){return e.props.storyRouting}},null!==(t=this.props.additionalBuildOptions)&&void 0!==t?t:{}),{root:{initialThemeItemInfo:this.props.initialThemeItemInfo},canCopyLinks:!this.props.isInlineStory}),i=!1,a=window.location.search;a.includes("lazy=false")&&Object.assign(n,{lazy:!1}),a.includes("lab=true")&&(i=!0,Object.assign(n,{lab:!0})),document&&document.body&&this.props.printMode&&document.body.classList.add("print",this.props.printMode),(0,C.J_)({data:o,mode:"viewer",context:(0,c.Z)({},n),registry:(0,N.J)({featureDecisions:this.props.featureDecisions,includeLabItems:i})}).then((function(t){e.itemBlock=t;var o=e.itemBlock.do("getStoryTheme");return e.setState({viewerHeaderTheme:o.websiteThemeFlavor,title:e.itemBlock.do("getCoverTitle"),areSocialIconsHidden:e.itemBlock.do("isSocialIconsHidden"),coverData:e.itemBlock.do("getCoverData")}),e.itemBlock.render()})).then((function(t){var o,n;e.setState({ui:t,hasItemRendered:!0,isGoogleAnalyticsConsentMessageShowing:"view"===e.props.mode&&!!(null===(o=e.itemBlock)||void 0===o?void 0:o.do("getGAID"))&&!!(null===(n=e.itemBlock)||void 0===n?void 0:n.do("getGAConsentMessage"))}),e.state.linkedBlockId&&e.state.hasPageLoaded&&e.jumpToBlock()})).then((function(){if(e.props.storyItem.itemId!==De.BD)try{(0,U.Az)({itemId:e.props.storyItem.itemId,portalHost:e.props.config.PORTAL_HOST,authManager:e.props.authManager})}catch(t){console.log("Increment view count error: ",t)}})).catch((function(t){j.Z.trackEvent(j.Z.Category.Viewer,j.Z.Action.Story_Render_Error,e.props.storyItem.itemId),e.props.redirectOnLoadError({config:e.props.config,signInUrl:e.props.signInUrl,authManager:e.props.authManager})}))},m.componentWillUnmount=function(){this.setState({isMounted:!1}),window.removeEventListener("load",this.onWindowLoaded)},m.render=function(){var e,t,o,n,i,a,r,l=(a={},(0,s.Z)(a,V.o.Story,"component.builderHeader.defaultTitle"),(0,s.Z)(a,V.o.Collection,"component.collections.emptyTitle"),a)[this.props.itemType],d=this.props.intl.formatMessage({id:l}),m=null===(e=this.itemBlock)||void 0===e?void 0:e.do("getMetaSettings"),y=(0,Ce.ds)({itemType:this.props.itemType,title:null!==(r=null===m||void 0===m?void 0:m.title)&&void 0!==r?r:this.state.title,isBuilderHeader:!1,fallbackTitle:d,formatMsg:this.props.intl.formatMessage}),f=this.props.storyItem.itemDetails&&"embedded-preview"!==this.props.mode&&"preview"!==this.props.mode&&!this.props.storyItem.itemDetails.origin&&("admin"===this.props.storyItem.itemDetails.itemControl||"update"===this.props.storyItem.itemDetails.itemControl),x=this.props.storyItem.getItemPublishStatus(),w=this.props.storyItem.itemSharingLevel,I=this.props.mode;"preview"!==this.props.mode||"fullscreen"!==this.state.previewDevice&&this.props.isViewportMinWidth("large")||(I="fullscreen-preview");var k=!this.props.printMode&&("preview"===this.props.mode||"fullscreen-preview"===this.props.mode&&this.props.isViewportMinWidth("large")),T=this.props.shouldShowViewerHeader&&("preview"!==this.props.mode||"preview"===this.props.mode&&"fullscreen"===this.state.previewDevice),j=(0,p.Z)((0,c.Z)({},this.props),{storyId:this.props.storyItem.itemId,title:this.state.title,isOrgItem:this.props.storyItem.isOrgItem,storyType:this.props.itemType,publishStatus:x,sharingLevel:w,canEdit:f,canShowEditButtonNudge:this.props.canShowEditButtonNudge&&!this.props.printMode,onFavoriteClicked:this.favoriteItem,onUnfavoriteClicked:this.unfavoriteItem,areSocialIconsHidden:this.state.areSocialIconsHidden,appLogo:this.props.appLogo,shouldShowSkipLink:!0,onSkipLink:this.onSkipLink}),P=!!(null===(t=this.props.additionalBuildOptions)||void 0===t?void 0:t.isShowingCollectionItem),_="cover"===this.props.config.VIEWER_ACTIONS_LOCATION&&P?"common.shareCollection":void 0,C=T?(0,u.jsx)(b.tT,{defaultTheme:this.state.viewerHeaderTheme,isStoryThemeDependent:!0,children:this.props.itemType===V.o.Collection?(0,u.jsx)(se.Z,(0,p.Z)((0,c.Z)({},j),{getItemHref:this.getItemHref,shouldDisplayActionButtonsInHeader:P,socialSharingTooltipId:_})):(0,u.jsx)(_e.Z,(0,p.Z)((0,c.Z)({},j),{onTitleClicked:this.resetItemBlock}))}):null,D=(null===(o=this.props.storyItem.itemDetails.properties)||void 0===o||null===(n=o.metaProperties)||void 0===n?void 0:n.description)||this.props.storyItem.itemDetails.snippet;return(0,u.jsxs)(g.Fragment,{children:[(0,u.jsxs)(v(),{children:[(0,u.jsx)("title",{className:h().dynamic([["6d74b22bbfbfa55a",[this.props.appOffset.bottom,Z.Z.spacing.md,S.K.RTL]]]),children:y},"title"),D&&(0,u.jsx)("meta",{name:"description",content:D,className:h().dynamic([["6d74b22bbfbfa55a",[this.props.appOffset.bottom,Z.Z.spacing.md,S.K.RTL]]])},"description")]}),this.props.itemType===V.o.Story&&(0,u.jsx)(R.Z,{}),this.props.storyItem.itemDetails&&this.props.storyItem&&this.props.storyItem.itemData&&this.props.storyItem.getItemPublishDate()&&(0,u.jsx)(Pe,{title:y,itemType:this.props.itemType,itemDetails:this.props.storyItem.itemDetails,author:this.getBylineFromStoryItemData(this.props.storyItem.itemData,this.props.itemType),publishedDate:this.props.storyItem.getItemPublishDate(),host:this.props.host,config:this.props.config,gaid:this.getTrackableGAId()}),(0,u.jsx)(F.UV,{initialQuery:this.props.query,children:(0,u.jsx)(K.b,{children:(0,u.jsx)(B.M2,{storyItem:this.props.storyItem,children:(0,u.jsxs)(W.H9,{children:[this.state.isGoogleAnalyticsConsentMessageShowing&&(0,u.jsx)(O,{onAllowClicked:this.onGoogleAnalyticsConsentMessageAccepted,onDismissClicked:this.onGoogleAnalyticsConsentMessageDismissed,message:null===(i=this.itemBlock)||void 0===i?void 0:i.do("getGAConsentMessage")}),(0,u.jsxs)(Ne,(0,p.Z)((0,c.Z)({},this.props),{viewerHeader:C,mode:I,printMode:this.props.printMode,isInlineStory:this.props.isInlineStory,children:[(0,u.jsx)(ae,{onScrolledToBottom:this.resetItemBlock,collectionBlock:this.props.itemType===V.o.Collection?this.itemBlock:void 0}),k&&this.props.isViewportMinWidth("large")&&this.state.isMounted&&(0,u.jsx)("div",{className:h().dynamic([["6d74b22bbfbfa55a",[this.props.appOffset.bottom,Z.Z.spacing.md,S.K.RTL]]])+" preview-controls-container",children:(0,u.jsx)(we,{onDeviceChange:this.onPreviewDeviceChange,device:this.state.previewDevice,itemType:this.props.itemType,itemId:this.props.storyItem.itemId,canShowNudge:this.props.canShowPreviewControlsNudge})}),this.renderBody(I),this.props.footerBanner]}))]})})})}),(0,u.jsx)(h(),{id:"6d74b22bbfbfa55a",dynamic:[this.props.appOffset.bottom,Z.Z.spacing.md,S.K.RTL],children:".preview-controls-container.__jsx-style-dynamic-selector{position:fixed;z-index:98;bottom:-webkit-calc(".concat(this.props.appOffset.bottom," + ").concat(Z.Z.spacing.md,");bottom:-moz-calc(").concat(this.props.appOffset.bottom," + ").concat(Z.Z.spacing.md,");bottom:calc(").concat(this.props.appOffset.bottom," + ").concat(Z.Z.spacing.md,");right:7.2rem}").concat(S.K.RTL," .preview-controls-container.__jsx-style-dynamic-selector{right:unset;left:7.2rem}")})]})},o}(g.PureComponent),ze=(0,b.EL)((0,P.Df)((0,f.ZP)((0,H.Jy)((0,q.F)((0,_.oh)((0,z.Jh)((0,I.d2)((0,k.ZP)((0,T.VO)(He))))))))))},95030:function(e,t,o){o.d(t,{BD:function(){return k},nt:function(){return P},kS:function(){return _}});var n=o(66383);function i(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var a=o(81192);function s(){var e=i(["storycover.title"]);return s=function(){return e},e}function r(){var e=i(["storycover.summary"]);return r=function(){return e},e}function c(){var e=i(["text1"]);return c=function(){return e},e}function p(){var e=i(["text2"]);return p=function(){return e},e}function l(){var e=i(["button.text"]);return l=function(){return e},e}function d(){var e=i(["text3"]);return d=function(){return e},e}function u(){var e=i(["text4"]);return u=function(){return e},e}function m(){var e=i(["link"]);return m=function(){return e},e}function h(){var e=i(["text5"]);return h=function(){return e},e}function g(){var e=i(["text6"]);return g=function(){return e},e}function y(){var e=i(["text7"]);return y=function(){return e},e}function f(){var e=i(["expressmap.caption"]);return f=function(){return e},e}function x(){var e=i(["text8"]);return x=function(){return e},e}function v(){var e=i(["audio.caption"]);return v=function(){return e},e}function w(){var e=i(["text9"]);return w=function(){return e},e}function b(){var e=i(["text10"]);return b=function(){return e},e}function Z(){var e=i(["text11"]);return Z=function(){return e},e}function S(){var e=i(["attribution.content"]);return S=function(){return e},e}function I(){var e=i(["attribution.attribution"]);return I=function(){return e},e}var k="sample32charactersvaliditemidaaa",T=function(e){var t,o=Date.now();return{id:k,owner:"StoryMaps Team",created:o,modified:o,title:null!==(t=null===e||void 0===e?void 0:e({id:"component.themeEditor.storyHeaderText"}))&&void 0!==t?t:"",type:a.Cs,typeKeywords:["arcgis-storymaps","smdraftresourceid:".concat(a.AY,"0.json"),"smpublisheddate:".concat(o),"smstatuspublished","smversiondraft:20.27.0","smversionpublished:20.27.0","StoryMap","Web Application"],tags:[""],numViews:0,size:0}},j=function(e){var t,o,i=e.formatMessage,a=e.baseUrl,k=e.siteUrl,T=e.productName,j=e.baseThemeId,P=function(e){var o=(0,n.Z)(e,1)[0];return null!==(t=null===i||void 0===i?void 0:i({id:"component.themePreviewSampleStory.".concat(o)}))&&void 0!==t?t:""};return{root:"n-lMEvw3",nodes:{"n-ZEqBEg":{type:"storycover",data:{type:"minimal",title:P(s()),summary:P(r()),byline:T,titlePanelPosition:"start"}},"n-YKldSA":{type:"navigation",data:{links:[{nodeId:"n-VMrERe"}]},config:{isHidden:!0}},"n-EDAcop":{type:"text",data:{text:P(c()),type:"paragraph"}},"n-erhBAh":{type:"text",data:{text:P(p()),type:"paragraph"}},"n-PHc2cM":{type:"button",data:{text:P(l()),link:""}},"n-VMrERe":{type:"text",data:{type:"h2",text:P(d())}},"n-lfXBaT":{type:"text",data:{text:P(u()),type:"paragraph"}},"n-links":{type:"text",data:{text:P(m()),type:"paragraph"}},"n-vbQaVc":{type:"text",data:{text:P(h()),type:"quote"}},"n-Y2phK6":{type:"text",data:{text:P(g()),type:"h3"}},"n-CKO4Ak":{type:"text",data:{text:P(y()),type:"paragraph"}},"n-expressmap":{type:"expressmap",data:{map:"r-expressmap",alt:"",caption:P(f())},config:{size:"standard"}},"n-6bhWAJ":{type:"text",data:{type:"paragraph",text:P(x())}},"n-4Dsx7p":{type:"separator"},"n-EcdqDK":{type:"audio",data:{audio:"r-j7OSzQ",caption:P(v())}},"n-7KLTO8":{type:"text",data:{text:P(w()),type:"paragraph"}},"n-r7trnc":{type:"embed",data:{url:k,embedType:"link",title:T,description:null!==(o=null===i||void 0===i?void 0:i({id:"page.index.subtitle"}))&&void 0!==o?o:"",thumbnailUrl:"".concat(a,"/static/images/social-sharing-card.jpeg?v=22.15"),providerUrl:k,caption:T,display:"card"}},"n-8CSjqa":{type:"text",data:{text:P(b()),type:"h4"}},"n-1GjFLq":{type:"text",data:{text:P(Z()),type:"paragraph"}},"n-80Orlw":{type:"attribution",data:{content:P(S()),attribution:P(I())}},"n-TiLsTS":{type:"credits",children:["n-8CSjqa","n-1GjFLq","n-80Orlw"]},"n-lMEvw3":{type:"story",data:{storyTheme:"r-82O3KC"},children:["n-ZEqBEg","n-YKldSA","n-EDAcop","n-erhBAh","n-PHc2cM","n-VMrERe","n-lfXBaT","n-links","n-vbQaVc","n-Y2phK6","n-CKO4Ak","n-expressmap","n-4Dsx7p","n-6bhWAJ","n-EcdqDK","n-7KLTO8","n-r7trnc","n-TiLsTS"]}},resources:{"r-expressmap":{type:"expressmap",data:{src:"".concat(a,"/static/storymaps-builder/expressmaps/theme_preview_sample_expressmap.json"),provider:"uri"}},"r-j7OSzQ":{type:"audio",data:{src:"".concat(a,"/static/storymaps-builder/audio/theme_preview_sample_audio.wav"),provider:"uri"}},"r-82O3KC":{type:"story-theme",data:{themeId:j,themeBaseVariableOverrides:{}}}}}},P={AUDIO:"n-EcdqDK",BUTTON:"n-PHc2cM",SEPARATOR:"n-4Dsx7p",STORYCOVER:"n-ZEqBEg",QUOTE:"n-vbQaVc",LINK:"n-links",EXPRESSMAP:"n-expressmap"},_=function(e){return{id:k,draftData:j(e),itemDetails:T(e.formatMessage)}}},65716:function(e,t,o){o.d(t,{W:function(){return n}});var n=(0,o(2784).createContext)({collectionData:{titlesArray:[],updateCollectionData:function(){}},collectionDisplay:{currentIndex:-1,isCoverShowing:!0,isItemViewTransitionComplete:!1,updateCollectionDisplay:function(){}}})},49309:function(e,t,o){o.d(t,{k:function(){return n}});var n=(0,o(2784).createContext)({toggleDesignPanelHook:function(){},updateStoryContext:function(){},storyLogo:{src:"https://example.org/logo.png",link:"https://example.org",alt:"alt"}})},50706:function(e,t,o){o.d(t,{b:function(){return c}});var n=o(70865),i=o(96670),a=o(52322),s=o(2784),r=o(49309),c=function(e){var t=(0,s.useState)({}),o=t[0],c=t[1];return(0,a.jsx)(r.k.Provider,{value:(0,i.Z)((0,n.Z)({},o),{updateStoryContext:function(e){c((function(t){return(0,n.Z)({},t,e)}))}}),children:e.children})}},18558:function(e,t,o){o.d(t,{B:function(){return n}});var n=(0,o(2784).createContext)({updateStoryOffsetContext:function(){},storyOffset:{navBarHeight:"0rem"}})},23796:function(e,t,o){o.d(t,{Db:function(){return l},Mq:function(){return c},NH:function(){return p},kz:function(){return r}});var n=o(98788),i=o(45680),a=o(8859),s=o(84117),r=function(e){var t,o;return null===(t=e.nodes[e.root])||void 0===t||null===(o=t.config)||void 0===o?void 0:o.storyLocale},c=function(){var e=(0,n.Z)((function(e){var t;return(0,i.__generator)(this,(function(n){switch(n.label){case 0:return[4,Promise.all([o.e(44817),o.e(37586),o.e(4516)]).then(o.bind(o,4516))];case 1:(0,n.sent().setLocale)(null!==(t=null!==e&&void 0!==e?e:window.document.documentElement.lang)&&void 0!==t?t:"en"),n.label=2;case 2:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,n.Z)((function(e,t){var o,n,r,c;return(0,i.__generator)(this,(function(i){switch(i.label){case 0:return r=t||(null===window||void 0===window||null===(o=window.document)||void 0===o||null===(n=o.documentElement)||void 0===n?void 0:n.lang)||"en-us",c="".concat((0,s.Zl)(e),"/portals/regions?f=json&culture=").concat(r),[4,(0,a.WY)(c)];case 1:return[2,i.sent()]}}))}));return function(t,o){return e.apply(this,arguments)}}(),l=function(e){return e.map((function(e,t){return{id:t,content:e.localizedName,searchModifier:"",iSearchOptions:{categories:"/Region/".concat(e.region)}}}))}},82639:function(e,t,o){o.d(t,{J:function(){return n}});var n=function(e){return"string"===typeof e&&/^[a-zA-Z\d]{32}$/g.test(e)}},49997:function(e,t,o){o.d(t,{z:function(){return n}});var n=function(e,t,o){return o.indexOf(e)===t}},23177:function(e,t,o){o.d(t,{A:function(){return S},t:function(){return k}});var n=o(98788),i=o(42838),a=o(70865),s=o(96670),r=o(66383),c=o(45680),p=o(30425),l=o(79792),d=o(42258),u=o(23796),m=o(60120),h=o(95030),g=o(24084),y=o(82619),f=o(16924),x=o(58650),v=o(16202),w=o(95255),b=o(47208),Z=o(35164),S=function(){var e=(0,n.Z)((function(e){var t,o,n,i,m,h,g,y,f,b,S,k,T,j,P,_,C;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:if(t=e.id,o=e.authManager,n=e.config,i=e.ctx,m=e.itemType,!t)throw new Error("no ".concat(m," id"));h=(0,p.N)(m),g={itemId:t,authManager:o,portalHost:n.PORTAL_HOST},y=(0,s.Z)((0,a.Z)({},g),{type:m,config:n}),c.label=1;case 1:return c.trys.push([1,6,,7]),[4,Promise.all([l.ZP.fetchItemDetails(g),l.ZP.fetchPublishedItemData(y)])];case 2:return f=r.Z.apply(void 0,[c.sent(),2]),b=f[0],S=f[1],[4,(0,d.ir)({storyItemData:S,authManager:o,portalHost:n.PORTAL_HOST})];case 3:return k=c.sent(),(0,x.ZX)(b)||(0,v.bk)(b)&&("admin"===b.itemControl||"update"===b.itemControl)?((0,w.j)({ctx:i,href:"/".concat(h,"/edit?id=").concat(t),asPath:"".concat(n.BASE_URL,"/").concat(h,"/").concat(t,"/edit")}),[2,{}]):"public"!==b.access&&o?[4,(0,Z.T)({authManager:o,config:n})]:[3,5];case 4:if("user-unauthorized"===c.sent())throw new Error("user-unauthorized");c.label=5;case 5:return T="","undefined"!==typeof i&&(j=i.req,(P=i.res)&&"function"===typeof P.setHeader&&("public"===b.access?P.setHeader("Cache-Control","public, max-age=".concat(e.skipCache?0:n.CACHE_MAX_AGE)):P.setHeader("Cache-Control","private, max-age=".concat(e.skipCache?0:n.NON_PUBLIC_CACHE_MAX_AGE))),T=(null===j||void 0===j?void 0:j.headers.host)||""),_=(0,u.kz)(S),[2,{id:t,itemDetails:b,publishedData:S,host:T,initialThemeItemInfo:k,pageLocale:_}];case 6:return C=c.sent(),I(C,e),[2,{}];case 7:return[2]}}))}));return function(t){return e.apply(this,arguments)}}(),I=function(e,t){var o=t.id,n=t.authManager,i=t.config,a=t.ctx,s=t.signInUrl,r=t.itemType;if(e&&e.code)(0,b.q)({ctx:a,authManager:n,signInUrl:s,error:e,config:i});else if("string"===typeof e.message&&e.message.search("items/".concat(o,"/data"))>=0&&"invalid-json"===e.type){var c=r===m.o.Collection?"edit":"preview",l=(0,p.N)(r);(0,w.j)({ctx:a,href:"/".concat(l,"/").concat(c,"?id=").concat(o),asPath:"".concat(i.BASE_URL,"/").concat(l,"/").concat(o,"/").concat(c)})}else"string"===typeof e.message&&"user-unauthorized"===e.message?(0,w.j)({ctx:a,href:"/error?errType=unsupported-account&itemType=".concat(r),asPath:"".concat(i.BASE_URL,"/error?errType=unsupported-account&itemType=").concat(r)}):(0,w.j)({ctx:a,href:"/error?itemType=".concat(r),asPath:"".concat(i.BASE_URL,"/error?itemType=").concat(r)})},k=function(){var e=(0,n.Z)((function(e){var t,o,n,r,l,m,Z,S,I,k,T,j,P,_,C;return(0,c.__generator)(this,(function(c){switch(c.label){case 0:if(!e.id)throw new Error("no item id");if(t=e.id,o=e.authManager,n=e.config,r=e.ctx,l=e.signInUrl,m=e.formatMessage,Z=e.itemType,t===h.BD)return[2,(0,s.Z)((0,a.Z)({},(0,h.kS)({formatMessage:m,baseUrl:n.BASE_URL,siteUrl:n.SITE_URL,productName:n.PRODUCT_NAME,baseThemeId:(0,g.TI)(n.INCLUDED_STORY_THEMES)})),{pageLocale:void 0})];S={itemId:t,authManager:o,portalHost:n.PORTAL_HOST},c.label=1;case 1:return c.trys.push([1,6,,7]),I=(0,p.N)(Z),[4,y.ZP.fetchItemDetails(S)];case 2:return(k=c.sent()).origin&&(0,w.j)({ctx:r,href:"/".concat(I,"/").concat(t),asPath:"".concat(n.BASE_URL,"/").concat(I,"/").concat(t)}),"update"!==k.itemControl&&"admin"!==k.itemControl?[3,5]:(((0,x.ZX)(k)||(0,v.bk)(k))&&(0,w.j)({ctx:r,href:"/".concat(I,"/edit?id=").concat(t),asPath:"".concat(n.BASE_URL,"/").concat(I,"/").concat(t,"/edit")}),"undefined"!==typeof r&&(T=r.res)&&"function"===typeof T.setHeader&&T.setHeader("Cache-Control","max-age=0, private, must-revalidate"),[4,y.ZP.fetchItemDraftData({itemDetails:k,type:Z,authManager:o,portalHost:n.PORTAL_HOST,config:n})]);case 3:return j=c.sent(),[4,(0,d.ir)({storyItemData:j,authManager:o,portalHost:n.PORTAL_HOST})];case 4:return P=c.sent(),_=(0,u.kz)(j),[2,{id:t,itemDetails:k,draftData:j,initialThemeItemInfo:P,pageLocale:_}];case 5:throw new f.Z({type:"story-privileges-preview",itemType:Z});case 6:if(C=c.sent(),(0,i.Z)(C,f.Z))throw new f.Z(C);return(0,b.q)({ctx:r,authManager:o,signInUrl:l,error:C,config:n}),[2];case 7:return[2]}}))}));return function(t){return e.apply(this,arguments)}}()},47208:function(e,t,o){o.d(t,{q:function(){return m}});var n=o(60120),i=o(16924),a=o(31274),s=o(90581),r=o(21218),c=o(96397),p=o(39309),l=o(70490),d=function(e){(0,r.Z)(o,e);var t=(0,p.Z)(o);function o(e){var n;(0,s.Z)(this,o),(n=t.call(this)).name="WebsiteError",n.type=n.message=e;var i=(0,l.P)(n.type).statusCode;return n.statusCode=i,n}return o}((0,c.Z)(Error)),u=o(95255),m=function(e){var t,o=e.authManager,s=e.error,r=e.signInUrl,c=e.config,p=e.ctx,l=function(e){(0,u.j)({ctx:p,asPath:"".concat(c.BASE_URL).concat(e),href:e})};if(s&&s.code){var m,h=null===(t=e.ctx)||void 0===t?void 0:t.pathname;switch(m=(null===h||void 0===h?void 0:h.includes("/collections/"))?n.o.Collection:(null===h||void 0===h?void 0:h.includes("/themes/"))?n.o.Theme:n.o.Story,s.code){case a._n.ITEM_ACCESS_UNAUTHORIZED:if(o&&o.token)throw new i.Z({type:"story-inaccessible",itemType:m});(0,u.j)({ctx:p,href:r,isExternal:!0});break;case a._n.OWNER_SUBSCRIPTION_DISABLED:l("/error?errType=story-inaccessible");break;case a._n.ITEM_NONEXISTENT_OR_INACCESSIBLE:throw new i.Z({type:"story-not-found",itemType:m});case a._n.APP_BLOCKED_FOR_ORG:throw new d("blocked-org");default:var g,y,f=null===s||void 0===s||null===(g=s.response)||void 0===g||null===(y=g.error)||void 0===y?void 0:y.code;throw 403===f?new i.Z({type:"story-inaccessible",itemType:m}):400===f||404===f?new i.Z({type:"story-not-found",itemType:m}):new i.Z({type:"story-load",itemType:m})}}else l("/error?errType=story-load")}},58013:function(e,t,o){function n(){return n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n])}return e},n.apply(this,arguments)}function i(){return n.apply(this,arguments)}o.d(t,{Z:function(){return i}})}}]);